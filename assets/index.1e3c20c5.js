var pf=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var kT=pf((Pt,Ut)=>{const vf=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}};vf();function mf(t){var r=this.constructor;return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){return r.reject(e)})})}function _f(t){var r=this;return new r(function(e,i){if(!(t&&typeof t.length!="undefined"))return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var a=n.length;function o(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var h=u.then;if(typeof h=="function"){h.call(u,function(f){o(l,f)},function(f){n[l]={status:"rejected",reason:f},--a===0&&e(n)});return}}n[l]={status:"fulfilled",value:u},--a===0&&e(n)}for(var s=0;s<n.length;s++)o(s,n[s])})}var gf=setTimeout;function $u(t){return Boolean(t&&typeof t.length!="undefined")}function yf(){}function bf(t,r){return function(){t.apply(r,arguments)}}function _t(t){if(!(this instanceof _t))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Vu(t,this)}function ju(t,r){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(r);return}t._handled=!0,_t._immediateFn(function(){var e=t._state===1?r.onFulfilled:r.onRejected;if(e===null){(t._state===1?Tn:br)(r.promise,t._value);return}var i;try{i=e(t._value)}catch(n){br(r.promise,n);return}Tn(r.promise,i)})}function Tn(t,r){try{if(r===t)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var e=r.then;if(r instanceof _t){t._state=3,t._value=r,En(t);return}else if(typeof e=="function"){Vu(bf(e,r),t);return}}t._state=1,t._value=r,En(t)}catch(i){br(t,i)}}function br(t,r){t._state=2,t._value=r,En(t)}function En(t){t._state===2&&t._deferreds.length===0&&_t._immediateFn(function(){t._handled||_t._unhandledRejectionFn(t._value)});for(var r=0,e=t._deferreds.length;r<e;r++)ju(t,t._deferreds[r]);t._deferreds=null}function xf(t,r,e){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof r=="function"?r:null,this.promise=e}function Vu(t,r){var e=!1;try{t(function(i){e||(e=!0,Tn(r,i))},function(i){e||(e=!0,br(r,i))})}catch(i){if(e)return;e=!0,br(r,i)}}_t.prototype.catch=function(t){return this.then(null,t)};_t.prototype.then=function(t,r){var e=new this.constructor(yf);return ju(this,new xf(t,r,e)),e};_t.prototype.finally=mf;_t.all=function(t){return new _t(function(r,e){if(!$u(t))return e(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return r([]);var n=i.length;function a(s,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(h){a(s,h)},e);return}}i[s]=l,--n===0&&r(i)}catch(h){e(h)}}for(var o=0;o<i.length;o++)a(o,i[o])})};_t.allSettled=_f;_t.resolve=function(t){return t&&typeof t=="object"&&t.constructor===_t?t:new _t(function(r){r(t)})};_t.reject=function(t){return new _t(function(r,e){e(t)})};_t.race=function(t){return new _t(function(r,e){if(!$u(t))return e(new TypeError("Promise.race accepts an array"));for(var i=0,n=t.length;i<n;i++)_t.resolve(t[i]).then(r,e)})};_t._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){gf(t,0)};_t._unhandledRejectionFn=function(r){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};var Bi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ja=Object.getOwnPropertySymbols,Tf=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable;function If(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Cf(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var r={},e=0;e<10;e++)r["_"+String.fromCharCode(e)]=e;var i=Object.getOwnPropertyNames(r).map(function(a){return r[a]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(a){n[a]=a}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var wf=Cf()?Object.assign:function(t,r){for(var e,i=If(t),n,a=1;a<arguments.length;a++){e=Object(arguments[a]);for(var o in e)Tf.call(e,o)&&(i[o]=e[o]);if(Ja){n=Ja(e);for(var s=0;s<n.length;s++)Ef.call(e,n[s])&&(i[n[s]]=e[n[s]])}}return i};/*!
 * @pixi/polyfill - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof global!="undefined"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=_t);Object.assign||(Object.assign=wf);var Rf=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var Af=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-Af}}var Mi=Date.now(),Qa=["ms","moz","webkit","o"];for(var ki=0;ki<Qa.length&&!globalThis.requestAnimationFrame;++ki){var Di=Qa[ki];globalThis.requestAnimationFrame=globalThis[Di+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Di+"CancelAnimationFrame"]||globalThis[Di+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var r=Date.now(),e=Rf+Mi-r;return e<0&&(e=0),Mi=r,globalThis.self.setTimeout(function(){Mi=Date.now(),t(performance.now())},e)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)});Math.sign||(Math.sign=function(r){return r=Number(r),r===0||isNaN(r)?r:r>0?1:-1});Number.isInteger||(Number.isInteger=function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/settings - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var to;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(to||(to={}));var eo;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(eo||(eo={}));var ro;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ro||(ro={}));var io;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(io||(io={}));var no;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(no||(no={}));var ao;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(ao||(ao={}));var oo;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(oo||(oo={}));var so;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(so||(so={}));var lo;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(lo||(lo={}));var In;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(In||(In={}));var Cn;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Cn||(Cn={}));var wn;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(wn||(wn={}));var uo;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(uo||(uo={}));var ho;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(ho||(ho={}));var Rn;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Rn||(Rn={}));var mr;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(mr||(mr={}));var fo;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(fo||(fo={}));var co;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(co||(co={}));var An;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(An||(An={}));var po;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(po||(po={}));var Nf={createCanvas:function(t,r){var e=document.createElement("canvas");return e.width=t,e.height=r,e},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,r){return fetch(t,r)}},Hi=/iPhone/i,vo=/iPod/i,mo=/iPad/i,_o=/\biOS-universal(?:.+)Mac\b/i,Xi=/\bAndroid(?:.+)Mobile\b/i,go=/Android/i,De=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Xr=/Silk/i,Zt=/Windows Phone/i,yo=/\bWindows(?:.+)ARM\b/i,bo=/BlackBerry/i,xo=/BB10/i,To=/Opera Mini/i,Eo=/\b(CriOS|Chrome)(?:.+)Mobile/i,Io=/Mobile(?:.+)Firefox\b/i,Co=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function Pf(t){return function(r){return r.test(t)}}function Uf(t){var r={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?r.userAgent=t:t&&t.userAgent&&(r={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var e=r.userAgent,i=e.split("[FBAN");typeof i[1]!="undefined"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]!="undefined"&&(e=i[0]);var n=Pf(e),a={apple:{phone:n(Hi)&&!n(Zt),ipod:n(vo),tablet:!n(Hi)&&(n(mo)||Co(r))&&!n(Zt),universal:n(_o),device:(n(Hi)||n(vo)||n(mo)||n(_o)||Co(r))&&!n(Zt)},amazon:{phone:n(De),tablet:!n(De)&&n(Xr),device:n(De)||n(Xr)},android:{phone:!n(Zt)&&n(De)||!n(Zt)&&n(Xi),tablet:!n(Zt)&&!n(De)&&!n(Xi)&&(n(Xr)||n(go)),device:!n(Zt)&&(n(De)||n(Xr)||n(Xi)||n(go))||n(/\bokhttp\b/i)},windows:{phone:n(Zt),tablet:n(yo),device:n(Zt)||n(yo)},other:{blackberry:n(bo),blackberry10:n(xo),opera:n(To),firefox:n(Io),chrome:n(Eo),device:n(bo)||n(xo)||n(To)||n(Io)||n(Eo)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var Ht=Uf(globalThis.navigator);function Of(){return!Ht.apple.device}function Sf(t){var r=!0;if(Ht.tablet||Ht.phone){if(Ht.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var i=parseInt(e[1],10);i<11&&(r=!1)}}if(Ht.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var i=parseInt(e[1],10);i<7&&(r=!1)}}}return r?t:4}var U={ADAPTER:Nf,MIPMAP_TEXTURES:wn.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:An.NONE,SPRITE_MAX_TEXTURES:Sf(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Rn.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Cn.CLAMP,SCALE_MODE:In.LINEAR,PRECISION_VERTEX:mr.HIGH,PRECISION_FRAGMENT:Ht.apple.device?mr.HIGH:mr.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Of(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},zu={exports:{}};(function(t){var r=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function a(l,u,h,f,c){if(typeof h!="function")throw new TypeError("The listener must be a function");var d=new n(h,f||l,c),p=e?e+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function s(){this._events=new i,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)r.call(h,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},s.prototype.listeners=function(u){var h=e?e+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,p=new Array(d);c<d;c++)p[c]=f[c].fn;return p},s.prototype.listenerCount=function(u){var h=e?e+u:u,f=this._events[h];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,h,f,c,d,p){var v=e?e+u:u;if(!this._events[v])return!1;var m=this._events[v],_=arguments.length,g,y;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,f),!0;case 4:return m.fn.call(m.context,h,f,c),!0;case 5:return m.fn.call(m.context,h,f,c,d),!0;case 6:return m.fn.call(m.context,h,f,c,d,p),!0}for(y=1,g=new Array(_-1);y<_;y++)g[y-1]=arguments[y];m.fn.apply(m.context,g)}else{var T=m.length,x;for(y=0;y<T;y++)switch(m[y].once&&this.removeListener(u,m[y].fn,void 0,!0),_){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,h);break;case 3:m[y].fn.call(m[y].context,h,f);break;case 4:m[y].fn.call(m[y].context,h,f,c);break;default:if(!g)for(x=1,g=new Array(_-1);x<_;x++)g[x-1]=arguments[x];m[y].fn.apply(m[y].context,g)}}return!0},s.prototype.on=function(u,h,f){return a(this,u,h,f,!1)},s.prototype.once=function(u,h,f){return a(this,u,h,f,!0)},s.prototype.removeListener=function(u,h,f,c){var d=e?e+u:u;if(!this._events[d])return this;if(!h)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===h&&(!c||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var v=0,m=[],_=p.length;v<_;v++)(p[v].fn!==h||c&&!p[v].once||f&&p[v].context!==f)&&m.push(p[v]);m.length?this._events[d]=m.length===1?m[0]:m:o(this,d)}return this},s.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,t.exports=s})(zu);var Lr=zu.exports,wa={exports:{}};wa.exports=Pi;wa.exports.default=Pi;function Pi(t,r,e){e=e||2;var i=r&&r.length,n=i?r[0]*e:t.length,a=Wu(t,0,n,e,!0),o=[];if(!a||a.next===a.prev)return o;var s,l,u,h,f,c,d;if(i&&(a=Mf(t,r,a,e)),t.length>80*e){s=u=t[0],l=h=t[1];for(var p=e;p<n;p+=e)f=t[p],c=t[p+1],f<s&&(s=f),c<l&&(l=c),f>u&&(u=f),c>h&&(h=c);d=Math.max(u-s,h-l),d=d!==0?32767/d:0}return xr(a,o,e,s,l,d,0),o}function Wu(t,r,e,i,n){var a,o;if(n===Un(t,r,e,i)>0)for(a=r;a<e;a+=i)o=wo(a,t[a],t[a+1],o);else for(a=e-i;a>=r;a-=i)o=wo(a,t[a],t[a+1],o);return o&&Ui(o,o.next)&&(Er(o),o=o.next),o}function Ne(t,r){if(!t)return t;r||(r=t);var e=t,i;do if(i=!1,!e.steiner&&(Ui(e,e.next)||pt(e.prev,e,e.next)===0)){if(Er(e),e=r=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==r);return r}function xr(t,r,e,i,n,a,o){if(!!t){!o&&a&&$f(t,i,n,a);for(var s=t,l,u;t.prev!==t.next;){if(l=t.prev,u=t.next,a?Lf(t,i,n,a):Ff(t)){r.push(l.i/e|0),r.push(t.i/e|0),r.push(u.i/e|0),Er(t),t=u.next,s=u.next;continue}if(t=u,t===s){o?o===1?(t=Gf(Ne(t),r,e),xr(t,r,e,i,n,a,2)):o===2&&Bf(t,r,e,i,n,a):xr(Ne(t),r,e,i,n,a,1);break}}}}function Ff(t){var r=t.prev,e=t,i=t.next;if(pt(r,e,i)>=0)return!1;for(var n=r.x,a=e.x,o=i.x,s=r.y,l=e.y,u=i.y,h=n<a?n<o?n:o:a<o?a:o,f=s<l?s<u?s:u:l<u?l:u,c=n>a?n>o?n:o:a>o?a:o,d=s>l?s>u?s:u:l>u?l:u,p=i.next;p!==r;){if(p.x>=h&&p.x<=c&&p.y>=f&&p.y<=d&&ze(n,s,a,l,o,u,p.x,p.y)&&pt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Lf(t,r,e,i){var n=t.prev,a=t,o=t.next;if(pt(n,a,o)>=0)return!1;for(var s=n.x,l=a.x,u=o.x,h=n.y,f=a.y,c=o.y,d=s<l?s<u?s:u:l<u?l:u,p=h<f?h<c?h:c:f<c?f:c,v=s>l?s>u?s:u:l>u?l:u,m=h>f?h>c?h:c:f>c?f:c,_=Nn(d,p,r,e,i),g=Nn(v,m,r,e,i),y=t.prevZ,T=t.nextZ;y&&y.z>=_&&T&&T.z<=g;){if(y.x>=d&&y.x<=v&&y.y>=p&&y.y<=m&&y!==n&&y!==o&&ze(s,h,l,f,u,c,y.x,y.y)&&pt(y.prev,y,y.next)>=0||(y=y.prevZ,T.x>=d&&T.x<=v&&T.y>=p&&T.y<=m&&T!==n&&T!==o&&ze(s,h,l,f,u,c,T.x,T.y)&&pt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;y&&y.z>=_;){if(y.x>=d&&y.x<=v&&y.y>=p&&y.y<=m&&y!==n&&y!==o&&ze(s,h,l,f,u,c,y.x,y.y)&&pt(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;T&&T.z<=g;){if(T.x>=d&&T.x<=v&&T.y>=p&&T.y<=m&&T!==n&&T!==o&&ze(s,h,l,f,u,c,T.x,T.y)&&pt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Gf(t,r,e){var i=t;do{var n=i.prev,a=i.next.next;!Ui(n,a)&&Yu(n,i,i.next,a)&&Tr(n,a)&&Tr(a,n)&&(r.push(n.i/e|0),r.push(i.i/e|0),r.push(a.i/e|0),Er(i),Er(i.next),i=t=a),i=i.next}while(i!==t);return Ne(i)}function Bf(t,r,e,i,n,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&zf(o,s)){var l=qu(o,s);o=Ne(o,o.next),l=Ne(l,l.next),xr(o,r,e,i,n,a,0),xr(l,r,e,i,n,a,0);return}s=s.next}o=o.next}while(o!==t)}function Mf(t,r,e,i){var n=[],a,o,s,l,u;for(a=0,o=r.length;a<o;a++)s=r[a]*i,l=a<o-1?r[a+1]*i:t.length,u=Wu(t,s,l,i,!1),u===u.next&&(u.steiner=!0),n.push(Vf(u));for(n.sort(kf),a=0;a<n.length;a++)e=Df(n[a],e);return e}function kf(t,r){return t.x-r.x}function Df(t,r){var e=Hf(t,r);if(!e)return r;var i=qu(e,t);return Ne(i,i.next),Ne(e,e.next)}function Hf(t,r){var e=r,i=t.x,n=t.y,a=-1/0,o;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var s=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(s<=i&&s>a&&(a=s,o=e.x<e.next.x?e:e.next,s===i))return o}e=e.next}while(e!==r);if(!o)return null;var l=o,u=o.x,h=o.y,f=1/0,c;e=o;do i>=e.x&&e.x>=u&&i!==e.x&&ze(n<h?i:a,n,u,h,n<h?a:i,n,e.x,e.y)&&(c=Math.abs(n-e.y)/(i-e.x),Tr(e,t)&&(c<f||c===f&&(e.x>o.x||e.x===o.x&&Xf(o,e)))&&(o=e,f=c)),e=e.next;while(e!==l);return o}function Xf(t,r){return pt(t.prev,t,r.prev)<0&&pt(r.next,t,t.next)<0}function $f(t,r,e,i){var n=t;do n.z===0&&(n.z=Nn(n.x,n.y,r,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,jf(n)}function jf(t){var r,e,i,n,a,o,s,l,u=1;do{for(e=t,t=null,a=null,o=0;e;){for(o++,i=e,s=0,r=0;r<u&&(s++,i=i.nextZ,!!i);r++);for(l=u;s>0||l>0&&i;)s!==0&&(l===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;e=i}a.nextZ=null,u*=2}while(o>1);return t}function Nn(t,r,e,i,n){return t=(t-e)*n|0,r=(r-i)*n|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t|r<<1}function Vf(t){var r=t,e=t;do(r.x<e.x||r.x===e.x&&r.y<e.y)&&(e=r),r=r.next;while(r!==t);return e}function ze(t,r,e,i,n,a,o,s){return(n-o)*(r-s)>=(t-o)*(a-s)&&(t-o)*(i-s)>=(e-o)*(r-s)&&(e-o)*(a-s)>=(n-o)*(i-s)}function zf(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!Wf(t,r)&&(Tr(t,r)&&Tr(r,t)&&Yf(t,r)&&(pt(t.prev,t,r.prev)||pt(t,r.prev,r))||Ui(t,r)&&pt(t.prev,t,t.next)>0&&pt(r.prev,r,r.next)>0)}function pt(t,r,e){return(r.y-t.y)*(e.x-r.x)-(r.x-t.x)*(e.y-r.y)}function Ui(t,r){return t.x===r.x&&t.y===r.y}function Yu(t,r,e,i){var n=jr(pt(t,r,e)),a=jr(pt(t,r,i)),o=jr(pt(e,i,t)),s=jr(pt(e,i,r));return!!(n!==a&&o!==s||n===0&&$r(t,e,r)||a===0&&$r(t,i,r)||o===0&&$r(e,t,i)||s===0&&$r(e,r,i))}function $r(t,r,e){return r.x<=Math.max(t.x,e.x)&&r.x>=Math.min(t.x,e.x)&&r.y<=Math.max(t.y,e.y)&&r.y>=Math.min(t.y,e.y)}function jr(t){return t>0?1:t<0?-1:0}function Wf(t,r){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==r.i&&e.next.i!==r.i&&Yu(e,e.next,t,r))return!0;e=e.next}while(e!==t);return!1}function Tr(t,r){return pt(t.prev,t,t.next)<0?pt(t,r,t.next)>=0&&pt(t,t.prev,r)>=0:pt(t,r,t.prev)<0||pt(t,t.next,r)<0}function Yf(t,r){var e=t,i=!1,n=(t.x+r.x)/2,a=(t.y+r.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&n<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==t);return i}function qu(t,r){var e=new Pn(t.i,t.x,t.y),i=new Pn(r.i,r.x,r.y),n=t.next,a=r.prev;return t.next=r,r.prev=t,e.next=n,n.prev=e,i.next=e,e.prev=i,a.next=i,i.prev=a,i}function wo(t,r,e,i){var n=new Pn(t,r,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Er(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Pn(t,r,e){this.i=t,this.x=r,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Pi.deviation=function(t,r,e,i){var n=r&&r.length,a=n?r[0]*e:t.length,o=Math.abs(Un(t,0,a,e));if(n)for(var s=0,l=r.length;s<l;s++){var u=r[s]*e,h=s<l-1?r[s+1]*e:t.length;o-=Math.abs(Un(t,u,h,e))}var f=0;for(s=0;s<i.length;s+=3){var c=i[s]*e,d=i[s+1]*e,p=i[s+2]*e;f+=Math.abs((t[c]-t[p])*(t[d+1]-t[c+1])-(t[c]-t[d])*(t[p+1]-t[c+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function Un(t,r,e,i){for(var n=0,a=r,o=e-i;a<e;a+=i)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}Pi.flatten=function(t){for(var r=t[0][0].length,e={vertices:[],holes:[],dimensions:r},i=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var o=0;o<r;o++)e.vertices.push(t[n][a][o]);n>0&&(i+=t[n-1].length,e.holes.push(i))}return e};var Zu=wa.exports,On={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,r){(function(e){var i=r&&!r.nodeType&&r,n=t&&!t.nodeType&&t,a=typeof Bi=="object"&&Bi;(a.global===a||a.window===a||a.self===a)&&(e=a);var o,s=2147483647,l=36,u=1,h=26,f=38,c=700,d=72,p=128,v="-",m=/^xn--/,_=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=l-u,x=Math.floor,b=String.fromCharCode,R;function N(E){throw RangeError(y[E])}function I(E,C){for(var P=E.length,L=[];P--;)L[P]=C(E[P]);return L}function w(E,C){var P=E.split("@"),L="";P.length>1&&(L=P[0]+"@",E=P[1]),E=E.replace(g,".");var k=E.split("."),W=I(k,C).join(".");return L+W}function F(E){for(var C=[],P=0,L=E.length,k,W;P<L;)k=E.charCodeAt(P++),k>=55296&&k<=56319&&P<L?(W=E.charCodeAt(P++),(W&64512)==56320?C.push(((k&1023)<<10)+(W&1023)+65536):(C.push(k),P--)):C.push(k);return C}function M(E){return I(E,function(C){var P="";return C>65535&&(C-=65536,P+=b(C>>>10&1023|55296),C=56320|C&1023),P+=b(C),P}).join("")}function $(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:l}function it(E,C){return E+22+75*(E<26)-((C!=0)<<5)}function O(E,C,P){var L=0;for(E=P?x(E/c):E>>1,E+=x(E/C);E>T*h>>1;L+=l)E=x(E/T);return x(L+(T+1)*E/(E+f))}function S(E){var C=[],P=E.length,L,k=0,W=p,H=d,Z,rt,tt,et,X,Y,D,ut,ot;for(Z=E.lastIndexOf(v),Z<0&&(Z=0),rt=0;rt<Z;++rt)E.charCodeAt(rt)>=128&&N("not-basic"),C.push(E.charCodeAt(rt));for(tt=Z>0?Z+1:0;tt<P;){for(et=k,X=1,Y=l;tt>=P&&N("invalid-input"),D=$(E.charCodeAt(tt++)),(D>=l||D>x((s-k)/X))&&N("overflow"),k+=D*X,ut=Y<=H?u:Y>=H+h?h:Y-H,!(D<ut);Y+=l)ot=l-ut,X>x(s/ot)&&N("overflow"),X*=ot;L=C.length+1,H=O(k-et,L,et==0),x(k/L)>s-W&&N("overflow"),W+=x(k/L),k%=L,C.splice(k++,0,W)}return M(C)}function V(E){var C,P,L,k,W,H,Z,rt,tt,et,X,Y=[],D,ut,ot,q;for(E=F(E),D=E.length,C=p,P=0,W=d,H=0;H<D;++H)X=E[H],X<128&&Y.push(b(X));for(L=k=Y.length,k&&Y.push(v);L<D;){for(Z=s,H=0;H<D;++H)X=E[H],X>=C&&X<Z&&(Z=X);for(ut=L+1,Z-C>x((s-P)/ut)&&N("overflow"),P+=(Z-C)*ut,C=Z,H=0;H<D;++H)if(X=E[H],X<C&&++P>s&&N("overflow"),X==C){for(rt=P,tt=l;et=tt<=W?u:tt>=W+h?h:tt-W,!(rt<et);tt+=l)q=rt-et,ot=l-et,Y.push(b(it(et+q%ot,0))),rt=x(q/ot);Y.push(b(it(rt,0))),W=O(P,ut,L==k),P=0,++L}++P,++C}return Y.join("")}function vt(E){return w(E,function(C){return m.test(C)?S(C.slice(4).toLowerCase()):C})}function Q(E){return w(E,function(C){return _.test(C)?"xn--"+V(C):C})}if(o={version:"1.3.2",ucs2:{decode:F,encode:M},decode:S,encode:V,toASCII:Q,toUnicode:vt},i&&n)if(t.exports==i)n.exports=o;else for(R in o)o.hasOwnProperty(R)&&(i[R]=o[R]);else e.punycode=o})(Bi)})(On,On.exports);var qf={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},Ir={};function Zf(t,r){return Object.prototype.hasOwnProperty.call(t,r)}var Kf=function(t,r,e,i){r=r||"&",e=e||"=";var n={};if(typeof t!="string"||t.length===0)return n;var a=/\+/g;t=t.split(r);var o=1e3;i&&typeof i.maxKeys=="number"&&(o=i.maxKeys);var s=t.length;o>0&&s>o&&(s=o);for(var l=0;l<s;++l){var u=t[l].replace(a,"%20"),h=u.indexOf(e),f,c,d,p;h>=0?(f=u.substr(0,h),c=u.substr(h+1)):(f=u,c=""),d=decodeURIComponent(f),p=decodeURIComponent(c),Zf(n,d)?Array.isArray(n[d])?n[d].push(p):n[d]=[n[d],p]:n[d]=p}return n},or=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Jf=function(t,r,e,i){return r=r||"&",e=e||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(n){var a=encodeURIComponent(or(n))+e;return Array.isArray(t[n])?t[n].map(function(o){return a+encodeURIComponent(or(o))}).join(r):a+encodeURIComponent(or(t[n]))}).join(r):i?encodeURIComponent(or(i))+e+encodeURIComponent(or(t)):""};Ir.decode=Ir.parse=Kf;Ir.encode=Ir.stringify=Jf;var Qf=On.exports,Dt=qf,tc=Oi,ec=cc,rc=fc;function Bt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ic=/^([a-z0-9.+-]+:)/i,nc=/:[0-9]*$/,ac=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,oc=["<",">",'"',"`"," ","\r",`
`,"	"],sc=["{","}","|","\\","^","`"].concat(oc),Sn=["'"].concat(sc),Ro=["%","/","?",";","#"].concat(Sn),Ao=["/","?","#"],lc=255,No=/^[+a-z0-9A-Z_-]{0,63}$/,uc=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hc={javascript:!0,"javascript:":!0},Fn={javascript:!0,"javascript:":!0},Ke={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ln=Ir;function Oi(t,r,e){if(t&&Dt.isObject(t)&&t instanceof Bt)return t;var i=new Bt;return i.parse(t,r,e),i}Bt.prototype.parse=function(t,r,e){if(!Dt.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=i!==-1&&i<t.indexOf("#")?"?":"#",a=t.split(n),o=/\\/g;a[0]=a[0].replace(o,"/"),t=a.join(n);var s=t;if(s=s.trim(),!e&&t.split("#").length===1){var l=ac.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],r?this.query=Ln.parse(this.search.substr(1)):this.query=this.search.substr(1)):r&&(this.search="",this.query={}),this}var u=ic.exec(s);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,s=s.substr(u.length)}if(e||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=s.substr(0,2)==="//";f&&!(u&&Fn[u])&&(s=s.substr(2),this.slashes=!0)}if(!Fn[u]&&(f||u&&!Ke[u])){for(var c=-1,d=0;d<Ao.length;d++){var p=s.indexOf(Ao[d]);p!==-1&&(c===-1||p<c)&&(c=p)}var v,m;c===-1?m=s.lastIndexOf("@"):m=s.lastIndexOf("@",c),m!==-1&&(v=s.slice(0,m),s=s.slice(m+1),this.auth=decodeURIComponent(v)),c=-1;for(var d=0;d<Ro.length;d++){var p=s.indexOf(Ro[d]);p!==-1&&(c===-1||p<c)&&(c=p)}c===-1&&(c=s.length),this.host=s.slice(0,c),s=s.slice(c),this.parseHost(),this.hostname=this.hostname||"";var _=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_)for(var g=this.hostname.split(/\./),d=0,y=g.length;d<y;d++){var T=g[d];if(!!T&&!T.match(No)){for(var x="",b=0,R=T.length;b<R;b++)T.charCodeAt(b)>127?x+="x":x+=T[b];if(!x.match(No)){var N=g.slice(0,d),I=g.slice(d+1),w=T.match(uc);w&&(N.push(w[1]),I.unshift(w[2])),I.length&&(s="/"+I.join(".")+s),this.hostname=N.join(".");break}}}this.hostname.length>lc?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=Qf.toASCII(this.hostname));var F=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+F,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!hc[h])for(var d=0,y=Sn.length;d<y;d++){var $=Sn[d];if(s.indexOf($)!==-1){var it=encodeURIComponent($);it===$&&(it=escape($)),s=s.split($).join(it)}}var O=s.indexOf("#");O!==-1&&(this.hash=s.substr(O),s=s.slice(0,O));var S=s.indexOf("?");if(S!==-1?(this.search=s.substr(S),this.query=s.substr(S+1),r&&(this.query=Ln.parse(this.query)),s=s.slice(0,S)):r&&(this.search="",this.query={}),s&&(this.pathname=s),Ke[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",V=this.search||"";this.path=F+V}return this.href=this.format(),this};function fc(t){return Dt.isString(t)&&(t=Oi(t)),t instanceof Bt?t.format():Bt.prototype.format.call(t)}Bt.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=this.protocol||"",e=this.pathname||"",i=this.hash||"",n=!1,a="";this.host?n=t+this.host:this.hostname&&(n=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Dt.isObject(this.query)&&Object.keys(this.query).length&&(a=Ln.stringify(this.query));var o=this.search||a&&"?"+a||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||Ke[r])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),o=o.replace("#","%23"),r+n+e+o+i};function cc(t,r){return Oi(t,!1,!0).resolve(r)}Bt.prototype.resolve=function(t){return this.resolveObject(Oi(t,!1,!0)).format()};Bt.prototype.resolveObject=function(t){if(Dt.isString(t)){var r=new Bt;r.parse(t,!1,!0),t=r}for(var e=new Bt,i=Object.keys(this),n=0;n<i.length;n++){var a=i[n];e[a]=this[a]}if(e.hash=t.hash,t.href==="")return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];l!=="protocol"&&(e[l]=t[l])}return Ke[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!Ke[t.protocol]){for(var u=Object.keys(t),h=0;h<u.length;h++){var f=u[h];e[f]=t[f]}return e.href=e.format(),e}if(e.protocol=t.protocol,!t.host&&!Fn[t.protocol]){for(var y=(t.pathname||"").split("/");y.length&&!(t.host=y.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),e.pathname=y.join("/")}else e.pathname=t.pathname;if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var c=e.pathname||"",d=e.search||"";e.path=c+d}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var p=e.pathname&&e.pathname.charAt(0)==="/",v=t.host||t.pathname&&t.pathname.charAt(0)==="/",m=v||p||e.host&&t.pathname,_=m,g=e.pathname&&e.pathname.split("/")||[],y=t.pathname&&t.pathname.split("/")||[],T=e.protocol&&!Ke[e.protocol];if(T&&(e.hostname="",e.port=null,e.host&&(g[0]===""?g[0]=e.host:g.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(y[0]===""?y[0]=t.host:y.unshift(t.host)),t.host=null),m=m&&(y[0]===""||g[0]==="")),v)e.host=t.host||t.host===""?t.host:e.host,e.hostname=t.hostname||t.hostname===""?t.hostname:e.hostname,e.search=t.search,e.query=t.query,g=y;else if(y.length)g||(g=[]),g.pop(),g=g.concat(y),e.search=t.search,e.query=t.query;else if(!Dt.isNullOrUndefined(t.search)){if(T){e.hostname=e.host=g.shift();var x=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;x&&(e.auth=x.shift(),e.host=e.hostname=x.shift())}return e.search=t.search,e.query=t.query,(!Dt.isNull(e.pathname)||!Dt.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!g.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var b=g.slice(-1)[0],R=(e.host||t.host||g.length>1)&&(b==="."||b==="..")||b==="",N=0,I=g.length;I>=0;I--)b=g[I],b==="."?g.splice(I,1):b===".."?(g.splice(I,1),N++):N&&(g.splice(I,1),N--);if(!m&&!_)for(;N--;N)g.unshift("..");m&&g[0]!==""&&(!g[0]||g[0].charAt(0)!=="/")&&g.unshift(""),R&&g.join("/").substr(-1)!=="/"&&g.push("");var w=g[0]===""||g[0]&&g[0].charAt(0)==="/";if(T){e.hostname=e.host=w?"":g.length?g.shift():"";var x=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;x&&(e.auth=x.shift(),e.host=e.hostname=x.shift())}return m=m||e.host&&g.length,m&&!w&&g.unshift(""),g.length?e.pathname=g.join("/"):(e.pathname=null,e.path=null),(!Dt.isNull(e.pathname)||!Dt.isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e};Bt.prototype.parseHost=function(){var t=this.host,r=nc.exec(t);r&&(r=r[0],r!==":"&&(this.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(this.hostname=t)};/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ne;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(ne||(ne={}));var Cr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Cr||(Cr={}));var _i;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(_i||(_i={}));var B;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(B||(B={}));var Gt;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Gt||(Gt={}));var A;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(A||(A={}));var Re;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Re||(Re={}));var G;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(G||(G={}));var gi;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(gi||(gi={}));var re;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(re||(re={}));var ie;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ie||(ie={}));var ae;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(ae||(ae={}));var Mt;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Mt||(Mt={}));var he;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(he||(he={}));var Gn;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Gn||(Gn={}));var Xt;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Xt||(Xt={}));var xt;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(xt||(xt={}));var Po;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Po||(Po={}));var bt;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(bt||(bt={}));var $t;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})($t||($t={}));/*!
 * @pixi/utils - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var We={parse:tc,format:rc,resolve:ec};U.RETINA_PREFIX=/@([0-9\.]+)x/;U.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Uo=!1,Oo="6.5.1";function dc(t){var r;if(!Uo){if(U.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+Oo+" - \u2730 "+t+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(r=globalThis.console).log.apply(r,e)}else globalThis.console&&globalThis.console.log("PixiJS "+Oo+" - "+t+" - http://www.pixijs.com/");Uo=!0}}var $i;function pc(){return typeof $i=="undefined"&&($i=function(){var r={stencil:!0,failIfMajorPerformanceCaveat:U.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!U.ADAPTER.getWebGLRenderingContext())return!1;var e=U.ADAPTER.createCanvas(),i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),n=!!(i&&i.getContextAttributes().stencil);if(i){var a=i.getExtension("WEBGL_lose_context");a&&a.loseContext()}return i=null,n}catch{return!1}}()),$i}var vc="#f0f8ff",mc="#faebd7",_c="#00ffff",gc="#7fffd4",yc="#f0ffff",bc="#f5f5dc",xc="#ffe4c4",Tc="#000000",Ec="#ffebcd",Ic="#0000ff",Cc="#8a2be2",wc="#a52a2a",Rc="#deb887",Ac="#5f9ea0",Nc="#7fff00",Pc="#d2691e",Uc="#ff7f50",Oc="#6495ed",Sc="#fff8dc",Fc="#dc143c",Lc="#00ffff",Gc="#00008b",Bc="#008b8b",Mc="#b8860b",kc="#a9a9a9",Dc="#006400",Hc="#a9a9a9",Xc="#bdb76b",$c="#8b008b",jc="#556b2f",Vc="#ff8c00",zc="#9932cc",Wc="#8b0000",Yc="#e9967a",qc="#8fbc8f",Zc="#483d8b",Kc="#2f4f4f",Jc="#2f4f4f",Qc="#00ced1",td="#9400d3",ed="#ff1493",rd="#00bfff",id="#696969",nd="#696969",ad="#1e90ff",od="#b22222",sd="#fffaf0",ld="#228b22",ud="#ff00ff",hd="#dcdcdc",fd="#f8f8ff",cd="#daa520",dd="#ffd700",pd="#808080",vd="#008000",md="#adff2f",_d="#808080",gd="#f0fff0",yd="#ff69b4",bd="#cd5c5c",xd="#4b0082",Td="#fffff0",Ed="#f0e68c",Id="#fff0f5",Cd="#e6e6fa",wd="#7cfc00",Rd="#fffacd",Ad="#add8e6",Nd="#f08080",Pd="#e0ffff",Ud="#fafad2",Od="#d3d3d3",Sd="#90ee90",Fd="#d3d3d3",Ld="#ffb6c1",Gd="#ffa07a",Bd="#20b2aa",Md="#87cefa",kd="#778899",Dd="#778899",Hd="#b0c4de",Xd="#ffffe0",$d="#00ff00",jd="#32cd32",Vd="#faf0e6",zd="#ff00ff",Wd="#800000",Yd="#66cdaa",qd="#0000cd",Zd="#ba55d3",Kd="#9370db",Jd="#3cb371",Qd="#7b68ee",tp="#00fa9a",ep="#48d1cc",rp="#c71585",ip="#191970",np="#f5fffa",ap="#ffe4e1",op="#ffe4b5",sp="#ffdead",lp="#000080",up="#fdf5e6",hp="#808000",fp="#6b8e23",cp="#ffa500",dp="#ff4500",pp="#da70d6",vp="#eee8aa",mp="#98fb98",_p="#afeeee",gp="#db7093",yp="#ffefd5",bp="#ffdab9",xp="#cd853f",Tp="#ffc0cb",Ep="#dda0dd",Ip="#b0e0e6",Cp="#800080",wp="#663399",Rp="#ff0000",Ap="#bc8f8f",Np="#4169e1",Pp="#8b4513",Up="#fa8072",Op="#f4a460",Sp="#2e8b57",Fp="#fff5ee",Lp="#a0522d",Gp="#c0c0c0",Bp="#87ceeb",Mp="#6a5acd",kp="#708090",Dp="#708090",Hp="#fffafa",Xp="#00ff7f",$p="#4682b4",jp="#d2b48c",Vp="#008080",zp="#d8bfd8",Wp="#ff6347",Yp="#40e0d0",qp="#ee82ee",Zp="#f5deb3",Kp="#ffffff",Jp="#f5f5f5",Qp="#ffff00",tv="#9acd32",ev={aliceblue:vc,antiquewhite:mc,aqua:_c,aquamarine:gc,azure:yc,beige:bc,bisque:xc,black:Tc,blanchedalmond:Ec,blue:Ic,blueviolet:Cc,brown:wc,burlywood:Rc,cadetblue:Ac,chartreuse:Nc,chocolate:Pc,coral:Uc,cornflowerblue:Oc,cornsilk:Sc,crimson:Fc,cyan:Lc,darkblue:Gc,darkcyan:Bc,darkgoldenrod:Mc,darkgray:kc,darkgreen:Dc,darkgrey:Hc,darkkhaki:Xc,darkmagenta:$c,darkolivegreen:jc,darkorange:Vc,darkorchid:zc,darkred:Wc,darksalmon:Yc,darkseagreen:qc,darkslateblue:Zc,darkslategray:Kc,darkslategrey:Jc,darkturquoise:Qc,darkviolet:td,deeppink:ed,deepskyblue:rd,dimgray:id,dimgrey:nd,dodgerblue:ad,firebrick:od,floralwhite:sd,forestgreen:ld,fuchsia:ud,gainsboro:hd,ghostwhite:fd,goldenrod:cd,gold:dd,gray:pd,green:vd,greenyellow:md,grey:_d,honeydew:gd,hotpink:yd,indianred:bd,indigo:xd,ivory:Td,khaki:Ed,lavenderblush:Id,lavender:Cd,lawngreen:wd,lemonchiffon:Rd,lightblue:Ad,lightcoral:Nd,lightcyan:Pd,lightgoldenrodyellow:Ud,lightgray:Od,lightgreen:Sd,lightgrey:Fd,lightpink:Ld,lightsalmon:Gd,lightseagreen:Bd,lightskyblue:Md,lightslategray:kd,lightslategrey:Dd,lightsteelblue:Hd,lightyellow:Xd,lime:$d,limegreen:jd,linen:Vd,magenta:zd,maroon:Wd,mediumaquamarine:Yd,mediumblue:qd,mediumorchid:Zd,mediumpurple:Kd,mediumseagreen:Jd,mediumslateblue:Qd,mediumspringgreen:tp,mediumturquoise:ep,mediumvioletred:rp,midnightblue:ip,mintcream:np,mistyrose:ap,moccasin:op,navajowhite:sp,navy:lp,oldlace:up,olive:hp,olivedrab:fp,orange:cp,orangered:dp,orchid:pp,palegoldenrod:vp,palegreen:mp,paleturquoise:_p,palevioletred:gp,papayawhip:yp,peachpuff:bp,peru:xp,pink:Tp,plum:Ep,powderblue:Ip,purple:Cp,rebeccapurple:wp,red:Rp,rosybrown:Ap,royalblue:Np,saddlebrown:Pp,salmon:Up,sandybrown:Op,seagreen:Sp,seashell:Fp,sienna:Lp,silver:Gp,skyblue:Bp,slateblue:Mp,slategray:kp,slategrey:Dp,snow:Hp,springgreen:Xp,steelblue:$p,tan:jp,teal:Vp,thistle:zp,tomato:Wp,turquoise:Yp,violet:qp,wheat:Zp,white:Kp,whitesmoke:Jp,yellow:Qp,yellowgreen:tv};function wt(t,r){return r===void 0&&(r=[]),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,r}function Ku(t){var r=t.toString(16);return r="000000".substring(0,6-r.length)+r,"#"+r}function Ot(t){return typeof t=="string"&&(t=ev[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1))),parseInt(t,16)}function rv(){for(var t=[],r=[],e=0;e<32;e++)t[e]=e,r[e]=e;t[B.NORMAL_NPM]=B.NORMAL,t[B.ADD_NPM]=B.ADD,t[B.SCREEN_NPM]=B.SCREEN,r[B.NORMAL]=B.NORMAL_NPM,r[B.ADD]=B.ADD_NPM,r[B.SCREEN]=B.SCREEN_NPM;var i=[];return i.push(r),i.push(t),i}var Ju=rv();function Qu(t,r){return Ju[r?1:0][t]}function iv(t,r,e,i){return e=e||new Float32Array(4),i||i===void 0?(e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r):(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=r,e}function Ra(t,r){if(r===1)return(r*255<<24)+t;if(r===0)return 0;var e=t>>16&255,i=t>>8&255,n=t&255;return e=e*r+.5|0,i=i*r+.5|0,n=n*r+.5|0,(r*255<<24)+(e<<16)+(i<<8)+n}function th(t,r,e,i){return e=e||new Float32Array(4),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,(i||i===void 0)&&(e[0]*=r,e[1]*=r,e[2]*=r),e[3]=r,e}function nv(t,r){r===void 0&&(r=null);var e=t*6;if(r=r||new Uint16Array(e),r.length!==e)throw new Error("Out buffer length is incorrect, got "+r.length+" and expected "+e);for(var i=0,n=0;i<e;i+=6,n+=4)r[i+0]=n+0,r[i+1]=n+1,r[i+2]=n+2,r[i+3]=n+0,r[i+4]=n+2,r[i+5]=n+3;return r}function eh(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function yi(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function So(t){return!(t&t-1)&&!!t}function Fo(t){var r=(t>65535?1:0)<<4;t>>>=r;var e=(t>255?1:0)<<3;return t>>>=e,r|=e,e=(t>15?1:0)<<2,t>>>=e,r|=e,e=(t>3?1:0)<<1,t>>>=e,r|=e,r|t>>1}function Je(t,r,e){var i=t.length,n;if(!(r>=i||e===0)){e=r+e>i?i-r:e;var a=i-e;for(n=r;n<a;++n)t[n]=t[n+e];t.length=a}}function Ye(t){return t===0?0:t<0?-1:1}var av=0;function Pe(){return++av}var Lo={};function jt(t,r,e){if(e===void 0&&(e=3),!Lo[r]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t),console.warn(i))),Lo[r]=!0}}var Go={},Qt=Object.create(null),_e=Object.create(null),Bo=function(){function t(r,e,i){this.canvas=U.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||U.RESOLUTION,this.resize(r,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(r,e){this.canvas.width=Math.round(r*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=Math.round(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=Math.round(r)},enumerable:!1,configurable:!0}),t}();function ov(t){var r=t.width,e=t.height,i=t.getContext("2d"),n=i.getImageData(0,0,r,e),a=n.data,o=a.length,s={top:null,left:null,right:null,bottom:null},l=null,u,h,f;for(u=0;u<o;u+=4)a[u+3]!==0&&(h=u/4%r,f=~~(u/4/r),s.top===null&&(s.top=f),(s.left===null||h<s.left)&&(s.left=h),(s.right===null||s.right<h)&&(s.right=h+1),(s.bottom===null||s.bottom<f)&&(s.bottom=f));return s.top!==null&&(r=s.right-s.left,e=s.bottom-s.top+1,l=i.getImageData(s.left,s.top,r,e)),{height:e,width:r,data:l}}var Vr;function sv(t,r){if(r===void 0&&(r=globalThis.location),t.indexOf("data:")===0)return"";r=r||globalThis.location,Vr||(Vr=document.createElement("a")),Vr.href=t;var e=We.parse(Vr.href),i=!e.port&&r.port===""||e.port===r.port;return e.hostname!==r.hostname||!i||e.protocol!==r.protocol?"anonymous":""}function bi(t,r){var e=U.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):r!==void 0?r:1}/*!
 * @pixi/math - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xi=Math.PI*2,lv=180/Math.PI,uv=Math.PI/180,It;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(It||(It={}));var ft=function(){function t(r,e){r===void 0&&(r=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=r,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(r){return this.set(r.x,r.y),this},t.prototype.copyTo=function(r){return r.set(this.x,this.y),r},t.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},t.prototype.set=function(r,e){return r===void 0&&(r=0),e===void 0&&(e=r),this.x=r,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),zr=[new ft,new ft,new ft,new ft],J=function(){function t(r,e,i,n){r===void 0&&(r=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(r),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=It.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},t.prototype.copyTo=function(r){return r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r},t.prototype.contains=function(r,e){return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.intersects=function(r,e){if(!e){var i=this.x<r.x?r.x:this.x,n=this.right>r.right?r.right:this.right;if(n<=i)return!1;var a=this.y<r.y?r.y:this.y,o=this.bottom>r.bottom?r.bottom:this.bottom;return o>a}var s=this.left,l=this.right,u=this.top,h=this.bottom;if(l<=s||h<=u)return!1;var f=zr[0].set(r.left,r.top),c=zr[1].set(r.left,r.bottom),d=zr[2].set(r.right,r.top),p=zr[3].set(r.right,r.bottom);if(d.x<=f.x||c.y<=f.y)return!1;var v=Math.sign(e.a*e.d-e.b*e.c);if(v===0||(e.apply(f,f),e.apply(c,c),e.apply(d,d),e.apply(p,p),Math.max(f.x,c.x,d.x,p.x)<=s||Math.min(f.x,c.x,d.x,p.x)>=l||Math.max(f.y,c.y,d.y,p.y)<=u||Math.min(f.y,c.y,d.y,p.y)>=h))return!1;var m=v*(c.y-f.y),_=v*(f.x-c.x),g=m*s+_*u,y=m*l+_*u,T=m*s+_*h,x=m*l+_*h;if(Math.max(g,y,T,x)<=m*f.x+_*f.y||Math.min(g,y,T,x)>=m*p.x+_*p.y)return!1;var b=v*(f.y-d.y),R=v*(d.x-f.x),N=b*s+R*u,I=b*l+R*u,w=b*s+R*h,F=b*l+R*h;return!(Math.max(N,I,w,F)<=b*f.x+R*f.y||Math.min(N,I,w,F)>=b*p.x+R*p.y)},t.prototype.pad=function(r,e){return r===void 0&&(r=0),e===void 0&&(e=r),this.x-=r,this.y-=e,this.width+=r*2,this.height+=e*2,this},t.prototype.fit=function(r){var e=Math.max(this.x,r.x),i=Math.min(this.x+this.width,r.x+r.width),n=Math.max(this.y,r.y),a=Math.min(this.y+this.height,r.y+r.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(a-n,0),this},t.prototype.ceil=function(r,e){r===void 0&&(r=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*r)/r,n=Math.ceil((this.y+this.height-e)*r)/r;return this.x=Math.floor((this.x+e)*r)/r,this.y=Math.floor((this.y+e)*r)/r,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(r){var e=Math.min(this.x,r.x),i=Math.max(this.x+this.width,r.x+r.width),n=Math.min(this.y,r.y),a=Math.max(this.y+this.height,r.y+r.height);return this.x=e,this.width=i-e,this.y=n,this.height=a-n,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),hv=function(){function t(r,e,i){r===void 0&&(r=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=r,this.y=e,this.radius=i,this.type=It.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(r,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-r,a=this.y-e;return n*=n,a*=a,n+a<=i},t.prototype.getBounds=function(){return new J(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),fv=function(){function t(r,e,i,n){r===void 0&&(r=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=r,this.y=e,this.width=i,this.height=n,this.type=It.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(r,e){if(this.width<=0||this.height<=0)return!1;var i=(r-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new J(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),pi=function(){function t(){for(var r=arguments,e=[],i=0;i<arguments.length;i++)e[i]=r[i];var n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){for(var a=[],o=0,s=n.length;o<s;o++)a.push(n[o].x,n[o].y);n=a}this.points=n,this.type=It.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var r=this.points.slice(),e=new t(r);return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(r,e){for(var i=!1,n=this.points.length/2,a=0,o=n-1;a<n;o=a++){var s=this.points[a*2],l=this.points[a*2+1],u=this.points[o*2],h=this.points[o*2+1],f=l>e!=h>e&&r<(u-s)*((e-l)/(h-l))+s;f&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(r,e){return r+", "+e},"")+"]")},t}(),cv=function(){function t(r,e,i,n,a){r===void 0&&(r=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),a===void 0&&(a=20),this.x=r,this.y=e,this.width=i,this.height=n,this.radius=a,this.type=It.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(r,e){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||r>=this.x+i&&r<=this.x+this.width-i)return!0;var n=r-(this.x+i),a=e-(this.y+i),o=i*i;if(n*n+a*a<=o||(n=r-(this.x+this.width-i),n*n+a*a<=o)||(a=e-(this.y+this.height-i),n*n+a*a<=o)||(n=r-(this.x+i),n*n+a*a<=o))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),qe=function(){function t(r,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=r,this.scope=e}return t.prototype.clone=function(r,e){return r===void 0&&(r=this.cb),e===void 0&&(e=this.scope),new t(r,e,this._x,this._y)},t.prototype.set=function(r,e){return r===void 0&&(r=0),e===void 0&&(e=r),(this._x!==r||this._y!==e)&&(this._x=r,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(r){return(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(r){return r.set(this._x,this._y),r},t.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),Et=function(){function t(r,e,i,n,a,o){r===void 0&&(r=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),a===void 0&&(a=0),o===void 0&&(o=0),this.array=null,this.a=r,this.b=e,this.c=i,this.d=n,this.tx=a,this.ty=o}return t.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},t.prototype.set=function(r,e,i,n,a,o){return this.a=r,this.b=e,this.c=i,this.d=n,this.tx=a,this.ty=o,this},t.prototype.toArray=function(r,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return r?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(r,e){e=e||new ft;var i=r.x,n=r.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(r,e){e=e||new ft;var i=1/(this.a*this.d+this.c*-this.b),n=r.x,a=r.y;return e.x=this.d*i*n+-this.c*i*a+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*a+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(r,e){return this.tx+=r,this.ty+=e,this},t.prototype.scale=function(r,e){return this.a*=r,this.d*=e,this.c*=r,this.b*=e,this.tx*=r,this.ty*=e,this},t.prototype.rotate=function(r){var e=Math.cos(r),i=Math.sin(r),n=this.a,a=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=a*e-this.d*i,this.d=a*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(r){var e=this.a,i=this.b,n=this.c,a=this.d;return this.a=r.a*e+r.b*n,this.b=r.a*i+r.b*a,this.c=r.c*e+r.d*n,this.d=r.c*i+r.d*a,this.tx=r.tx*e+r.ty*n+this.tx,this.ty=r.tx*i+r.ty*a+this.ty,this},t.prototype.setTransform=function(r,e,i,n,a,o,s,l,u){return this.a=Math.cos(s+u)*a,this.b=Math.sin(s+u)*a,this.c=-Math.sin(s-l)*o,this.d=Math.cos(s-l)*o,this.tx=r-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(r){var e=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){var i=this.a,n=this.c;this.a=i*r.a+this.b*r.c,this.b=i*r.b+this.b*r.d,this.c=n*r.a+this.d*r.c,this.d=n*r.b+this.d*r.d}return this.tx=e*r.a+this.ty*r.c+r.tx,this.ty=e*r.b+this.ty*r.d+r.ty,this},t.prototype.decompose=function(r){var e=this.a,i=this.b,n=this.c,a=this.d,o=r.pivot,s=-Math.atan2(-n,a),l=Math.atan2(i,e),u=Math.abs(s+l);return u<1e-5||Math.abs(xi-u)<1e-5?(r.rotation=l,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=s,r.skew.y=l),r.scale.x=Math.sqrt(e*e+i*i),r.scale.y=Math.sqrt(n*n+a*a),r.position.x=this.tx+(o.x*e+o.y*n),r.position.y=this.ty+(o.x*i+o.y*a),r},t.prototype.invert=function(){var r=this.a,e=this.b,i=this.c,n=this.d,a=this.tx,o=r*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=r/o,this.tx=(i*this.ty-n*a)/o,this.ty=-(r*this.ty-e*a)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var r=new t;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},t.prototype.copyTo=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},t.prototype.copyFrom=function(r){return this.a=r.a,this.b=r.b,this.c=r.c,this.d=r.d,this.tx=r.tx,this.ty=r.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),xe=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Te=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ee=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ie=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Bn=[],rh=[],Wr=Math.sign;function dv(){for(var t=0;t<16;t++){var r=[];Bn.push(r);for(var e=0;e<16;e++)for(var i=Wr(xe[t]*xe[e]+Ee[t]*Te[e]),n=Wr(Te[t]*xe[e]+Ie[t]*Te[e]),a=Wr(xe[t]*Ee[e]+Ee[t]*Ie[e]),o=Wr(Te[t]*Ee[e]+Ie[t]*Ie[e]),s=0;s<16;s++)if(xe[s]===i&&Te[s]===n&&Ee[s]===a&&Ie[s]===o){r.push(s);break}}for(var t=0;t<16;t++){var l=new Et;l.set(xe[t],Te[t],Ee[t],Ie[t],0,0),rh.push(l)}}dv();var dt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return xe[t]},uY:function(t){return Te[t]},vX:function(t){return Ee[t]},vY:function(t){return Ie[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,r){return Bn[t][r]},sub:function(t,r){return Bn[t][dt.inv(r)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,r){return Math.abs(t)*2<=Math.abs(r)?r>=0?dt.S:dt.N:Math.abs(r)*2<=Math.abs(t)?t>0?dt.E:dt.W:r>0?t>0?dt.SE:dt.SW:t>0?dt.NE:dt.NW},matrixAppendRotationInv:function(t,r,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=rh[dt.inv(r)];n.tx=e,n.ty=i,t.append(n)}},ih=function(){function t(){this.worldTransform=new Et,this.localTransform=new Et,this.position=new qe(this.onChange,this,0,0),this.scale=new qe(this.onChange,this,1,1),this.pivot=new qe(this.onChange,this,0,0),this.skew=new qe(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(r){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){var i=r.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=r._worldID,this._worldID++}},t.prototype.setFromMatrix=function(r){r.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/display - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */U.SORTABLE_CHILDREN=!1;var Ti=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?J.EMPTY:(r=r||new J(0,0,1,1),r.x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},t.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},t.prototype.addPointMatrix=function(r,e){var i=r.a,n=r.b,a=r.c,o=r.d,s=r.tx,l=r.ty,u=i*e.x+a*e.y+s,h=n*e.x+o*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)},t.prototype.addQuad=function(r){var e=this.minX,i=this.minY,n=this.maxX,a=this.maxY,o=r[0],s=r[1];e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,a=s>a?s:a,o=r[2],s=r[3],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,a=s>a?s:a,o=r[4],s=r[5],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,a=s>a?s:a,o=r[6],s=r[7],e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,a=s>a?s:a,this.minX=e,this.minY=i,this.maxX=n,this.maxY=a},t.prototype.addFrame=function(r,e,i,n,a){this.addFrameMatrix(r.worldTransform,e,i,n,a)},t.prototype.addFrameMatrix=function(r,e,i,n,a){var o=r.a,s=r.b,l=r.c,u=r.d,h=r.tx,f=r.ty,c=this.minX,d=this.minY,p=this.maxX,v=this.maxY,m=o*e+l*i+h,_=s*e+u*i+f;c=m<c?m:c,d=_<d?_:d,p=m>p?m:p,v=_>v?_:v,m=o*n+l*i+h,_=s*n+u*i+f,c=m<c?m:c,d=_<d?_:d,p=m>p?m:p,v=_>v?_:v,m=o*e+l*a+h,_=s*e+u*a+f,c=m<c?m:c,d=_<d?_:d,p=m>p?m:p,v=_>v?_:v,m=o*n+l*a+h,_=s*n+u*a+f,c=m<c?m:c,d=_<d?_:d,p=m>p?m:p,v=_>v?_:v,this.minX=c,this.minY=d,this.maxX=p,this.maxY=v},t.prototype.addVertexData=function(r,e,i){for(var n=this.minX,a=this.minY,o=this.maxX,s=this.maxY,l=e;l<i;l+=2){var u=r[l],h=r[l+1];n=u<n?u:n,a=h<a?h:a,o=u>o?u:o,s=h>s?h:s}this.minX=n,this.minY=a,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(r,e,i,n){this.addVerticesMatrix(r.worldTransform,e,i,n)},t.prototype.addVerticesMatrix=function(r,e,i,n,a,o){a===void 0&&(a=0),o===void 0&&(o=a);for(var s=r.a,l=r.b,u=r.c,h=r.d,f=r.tx,c=r.ty,d=this.minX,p=this.minY,v=this.maxX,m=this.maxY,_=i;_<n;_+=2){var g=e[_],y=e[_+1],T=s*g+u*y+f,x=h*y+l*g+c;d=Math.min(d,T-a),v=Math.max(v,T+a),p=Math.min(p,x-o),m=Math.max(m,x+o)}this.minX=d,this.minY=p,this.maxX=v,this.maxY=m},t.prototype.addBounds=function(r){var e=this.minX,i=this.minY,n=this.maxX,a=this.maxY;this.minX=r.minX<e?r.minX:e,this.minY=r.minY<i?r.minY:i,this.maxX=r.maxX>n?r.maxX:n,this.maxY=r.maxY>a?r.maxY:a},t.prototype.addBoundsMask=function(r,e){var i=r.minX>e.minX?r.minX:e.minX,n=r.minY>e.minY?r.minY:e.minY,a=r.maxX<e.maxX?r.maxX:e.maxX,o=r.maxY<e.maxY?r.maxY:e.maxY;if(i<=a&&n<=o){var s=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=n<l?n:l,this.maxX=a>u?a:u,this.maxY=o>h?o:h}},t.prototype.addBoundsMatrix=function(r,e){this.addFrameMatrix(e,r.minX,r.minY,r.maxX,r.maxY)},t.prototype.addBoundsArea=function(r,e){var i=r.minX>e.x?r.minX:e.x,n=r.minY>e.y?r.minY:e.y,a=r.maxX<e.x+e.width?r.maxX:e.x+e.width,o=r.maxY<e.y+e.height?r.maxY:e.y+e.height;if(i<=a&&n<=o){var s=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=n<l?n:l,this.maxX=a>u?a:u,this.maxY=o>h?o:h}},t.prototype.pad=function(r,e){r===void 0&&(r=0),e===void 0&&(e=r),this.isEmpty()||(this.minX-=r,this.maxX+=r,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(r,e,i,n,a,o){r-=a,e-=o,i+=a,n+=o,this.minX=this.minX<r?this.minX:r,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mn=function(t,r){return Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Mn(t,r)};function Aa(t,r){Mn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var gt=function(t){Aa(r,t);function r(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new ih,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Ti,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return r.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var a=i[n];Object.defineProperty(r.prototype,a,Object.getOwnPropertyDescriptor(e,a))}},Object.defineProperty(r.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new J),i=this._boundsRect),this._bounds.getRectangle(i)},r.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new J),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Ti);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=a,this._bounds.updateID+=this._boundsID-o,s},r.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},r.prototype.toLocal=function(e,i,n,a){return i&&(e=i.toGlobal(e,n,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},r.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},r.prototype.setTransform=function(e,i,n,a,o,s,l,u,h){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),a===void 0&&(a=1),o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),u===void 0&&(u=0),h===void 0&&(h=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=a||1,this.rotation=o,this.skew.x=s,this.skew.y=l,this.pivot.x=u,this.pivot.y=h,this},r.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(r.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new nh),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),r.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},r.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(r.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.transform.rotation*lv},set:function(e){this.transform.rotation=e*uv},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask!==e){if(this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=e,this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}},enumerable:!1,configurable:!0}),r}(Lr),nh=function(t){Aa(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return r}(gt);gt.prototype.displayObjectUpdateTransform=gt.prototype.updateTransform;/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mo;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Mo||(Mo={}));var ko;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(ko||(ko={}));var Do;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Do||(Do={}));var Ho;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Ho||(Ho={}));var Xo;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Xo||(Xo={}));var $o;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})($o||($o={}));var jo;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(jo||(jo={}));var Vo;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Vo||(Vo={}));var zo;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(zo||(zo={}));var Wo;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Wo||(Wo={}));var Yo;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Yo||(Yo={}));var qo;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(qo||(qo={}));var Zo;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Zo||(Zo={}));var Ko;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Ko||(Ko={}));var Jo;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Jo||(Jo={}));var Qo;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Qo||(Qo={}));var kn;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(kn||(kn={}));var ts;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(ts||(ts={}));var es;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(es||(es={}));var rs;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(rs||(rs={}));function pv(t,r){return t.zIndex===r.zIndex?t._lastSortedIndex-r._lastSortedIndex:t.zIndex-r.zIndex}var zt=function(t){Aa(r,t);function r(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=U.SORTABLE_CHILDREN,e.sortDirty=!1,e}return r.prototype.onChildrenChange=function(e){},r.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var a=0;a<i.length;a++)this.addChild(i[a]);else{var o=i[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return i[0]},r.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},r.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),a=this.getChildIndex(i);this.children[n]=i,this.children[a]=e,this.onChildrenChange(n<a?n:a)}},r.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},r.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Je(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},r.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},r.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var a=0;a<i.length;a++)this.removeChild(i[a]);else{var o=i[0],s=this.children.indexOf(o);if(s===-1)return null;o.parent=null,o.transform._parentID=-1,Je(this.children,s,1),this._boundsID++,this.onChildrenChange(s),o.emit("removed",this),this.emit("childRemoved",o,this,s)}return i[0]},r.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,Je(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},r.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,a=i,o=a-n,s;if(o>0&&o<=a){s=this.children.splice(n,o);for(var l=0;l<s.length;++l)s[l].parent=null,s[l].transform&&(s[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var l=0;l<s.length;++l)s[l].emit("removed",this),this.emit("childRemoved",s[l],this,l);return s}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var a=this.children[i];a._lastSortedIndex=i,!e&&a.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(pv),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.isMaskData?i._mask.maskObject:i._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=t.prototype.getLocalBounds.call(this,e);if(!i)for(var a=0,o=this.children.length;a<o;++a){var s=this.children[a];s.visible&&s.updateTransform()}return n},r.prototype._calculateBounds=function(){},r.prototype._renderWithCulling=function(e){var i=e.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var n,a;if(this.cullArea?(n=this.cullArea,a=this.worldTransform):this._render!==r.prototype._render&&(n=this.getBounds(!0)),n&&i.intersects(n,a))this._render(e);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}},r.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},r.prototype.renderAdvanced=function(e){var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<i.length;a++)i[a].enabled&&this._enabledFilters.push(i[a])}var o=i&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==kn.NONE));if(o&&e.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(var a=0,s=this.children.length;a<s;++a)this.children[a].render(e)}o&&e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},r.prototype._render=function(e){},r.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var a=0;a<n.length;++a)n[a].destroy(e)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),r}(gt);zt.prototype.containerUpdateTransform=zt.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _r=function(){return _r=Object.assign||function(r){for(var e=arguments,i,n=1,a=arguments.length;n<a;n++){i=e[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},_r.apply(this,arguments)},at;(function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"})(at||(at={}));var is=function(t){if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var r=typeof t.extension!="object"?{type:t.extension}:t.extension;t=_r(_r({},r),{ref:t})}if(typeof t=="object")t=_r({},t);else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},se={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,r=this,e=[],i=0;i<arguments.length;i++)e[i]=t[i];return e.map(is).forEach(function(n){n.type.forEach(function(a){var o,s;return(s=(o=r._removeHandlers)[a])===null||s===void 0?void 0:s.call(o,n)})}),this},add:function(){for(var t=arguments,r=this,e=[],i=0;i<arguments.length;i++)e[i]=t[i];return e.map(is).forEach(function(n){n.type.forEach(function(a){var o=r._addHandlers,s=r._queue;o[a]?o[a](n):(s[a]=s[a]||[],s[a].push(n))})}),this},handle:function(t,r,e){var i=this._addHandlers=this._addHandlers||{},n=this._removeHandlers=this._removeHandlers||{};if(i[t]||n[t])throw new Error("Extension type "+t+" already has a handler");i[t]=r,n[t]=e;var a=this._queue;return a[t]&&(a[t].forEach(function(o){return r(o)}),delete a[t]),this},handleByMap:function(t,r){return this.handle(t,function(e){r[e.name]=e.ref},function(e){delete r[e.name]})},handleByList:function(t,r){return this.handle(t,function(e){var i,n;r.push(e.ref),t===at.Loader&&((n=(i=e.ref).add)===null||n===void 0||n.call(i))},function(e){var i=r.indexOf(e.ref);i!==-1&&r.splice(i,1)})}};/*!
 * @pixi/runner - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var At=function(){function t(r){this.items=[],this._name=r,this._aliasCount=0}return t.prototype.emit=function(r,e,i,n,a,o,s,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,h=u.name,f=u.items;this._aliasCount++;for(var c=0,d=f.length;c<d;c++)f[c][h](r,e,i,n,a,o,s,l);return f===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(r){return r[this._name]&&(this.ensureNonAliasedItems(),this.remove(r),this.items.push(r)),this},t.prototype.remove=function(r){var e=this.items.indexOf(r);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(r){return this.items.indexOf(r)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(At.prototype,{dispatch:{value:At.prototype.emit},run:{value:At.prototype.emit}});/*!
 * @pixi/ticker - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */U.TARGET_FPMS=.06;var oe;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(oe||(oe={}));var ji=function(){function t(r,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=r,this.context=e,this.priority=i,this.once=n}return t.prototype.match=function(r,e){return e===void 0&&(e=null),this.fn===r&&this.context===e},t.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},t.prototype.destroy=function(r){r===void 0&&(r=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=r?null:e,this.previous=null,e},t}(),Ct=function(){function t(){var r=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ji(null,null,1/0),this.deltaMS=1/U.TARGET_FPMS,this.elapsedMS=1/U.TARGET_FPMS,this._tick=function(e){r._requestId=null,r.started&&(r.update(e),r.started&&r._requestId===null&&r._head.next&&(r._requestId=requestAnimationFrame(r._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(r,e,i){return i===void 0&&(i=oe.NORMAL),this._addListener(new ji(r,e,i))},t.prototype.addOnce=function(r,e,i){return i===void 0&&(i=oe.NORMAL),this._addListener(new ji(r,e,i,!0))},t.prototype._addListener=function(r){var e=this._head.next,i=this._head;if(!e)r.connect(i);else{for(;e;){if(r.priority>e.priority){r.connect(i);break}i=e,e=e.next}r.previous||r.connect(i)}return this._startIfPossible(),this},t.prototype.remove=function(r,e){for(var i=this._head.next;i;)i.match(r,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var r=0,e=this._head;e=e.next;)r++;return r},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(r){r===void 0&&(r=performance.now());var e;if(r>this.lastTime){if(e=this.elapsedMS=r-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=r-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=r-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*U.TARGET_FPMS;for(var n=this._head,a=n.next;a;)a=a.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=r},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(r){var e=Math.min(this.maxFPS,r),i=Math.min(Math.max(0,e)/1e3,U.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(r){if(r===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,r);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var r=t._shared=new t;r.autoStart=!0,r._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var r=t._system=new t;r.autoStart=!0,r._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),vv=function(){function t(){}return t.init=function(r){var e=this;r=Object.assign({autoStart:!0,sharedTicker:!1},r),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,oe.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=r.sharedTicker?Ct.shared:new Ct,r.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}},t.extension=at.Application,t}();/*!
 * @pixi/core - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */U.PREFER_ENV=Ht.any?ne.WEBGL:ne.WEBGL2;U.STRICT_TEXTURE_CACHE=!1;var Dn=[];function ah(t,r){if(!t)return null;var e="";if(typeof t=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(e=i[1].toLowerCase())}for(var n=Dn.length-1;n>=0;--n){var a=Dn[n];if(a.test&&a.test(t,e))return new a(t,r)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hn=function(t,r){return Hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Hn(t,r)};function lt(t,r){Hn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Xn=function(){return Xn=Object.assign||function(r){for(var e=arguments,i,n=1,a=arguments.length;n<a;n++){i=e[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},Xn.apply(this,arguments)};function mv(t,r){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)r.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(e[i[n]]=t[i[n]]);return e}var wr=function(){function t(r,e){r===void 0&&(r=0),e===void 0&&(e=0),this._width=r,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new At("setRealSize"),this.onUpdate=new At("update"),this.onError=new At("onError")}return t.prototype.bind=function(r){this.onResize.add(r),this.onUpdate.add(r),this.onError.add(r),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(r){this.onResize.remove(r),this.onUpdate.remove(r),this.onError.remove(r)},t.prototype.resize=function(r,e){(r!==this._width||e!==this._height)&&(this._width=r,this._height=e,this.onResize.emit(r,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(r,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(r,e){return!1},t}(),Gr=function(t){lt(r,t);function r(e,i){var n=this,a=i||{},o=a.width,s=a.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return n=t.call(this,o,s)||this,n.data=e,n}return r.prototype.upload=function(e,i,n){var a=e.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Mt.UNPACK);var o=i.realWidth,s=i.realHeight;return n.width===o&&n.height===s?a.texSubImage2D(i.target,0,0,0,o,s,i.format,n.type,this.data):(n.width=o,n.height=s,a.texImage2D(i.target,0,n.internalFormat,o,s,0,i.format,n.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},r}(wr),_v={scaleMode:re.NEAREST,format:A.RGBA,alphaMode:Mt.NPM},K=function(t){lt(r,t);function r(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=t.call(this)||this;i=i||{};var a=i.alphaMode,o=i.mipmap,s=i.anisotropicLevel,l=i.scaleMode,u=i.width,h=i.height,f=i.wrapMode,c=i.format,d=i.type,p=i.target,v=i.resolution,m=i.resourceOptions;return e&&!(e instanceof wr)&&(e=ah(e,m),e.internal=!0),n.resolution=v||U.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((h||0)*n.resolution)/n.resolution,n._mipmap=o!==void 0?o:U.MIPMAP_TEXTURES,n.anisotropicLevel=s!==void 0?s:U.ANISOTROPIC_LEVEL,n._wrapMode=f||U.WRAP_MODE,n._scaleMode=l!==void 0?l:U.SCALE_MODE,n.format=c||A.RGBA,n.type=d||G.UNSIGNED_BYTE,n.target=p||Re.TEXTURE_2D,n.alphaMode=a!==void 0?a:Mt.UNPACK,n.uid=Pe(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&h>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},r.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},r.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=So(this.realWidth)&&So(this.realHeight)},r.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},r.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(e){this.emit("error",this,e)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete _e[this.cacheId],delete Qt[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(e,i,n){n===void 0&&(n=U.STRICT_TEXTURE_CACHE);var a=typeof e=="string",o=null;if(a)o=e;else{if(!e._pixiId){var s=i&&i.pixiIdPrefix||"pixiid";e._pixiId=s+"_"+Pe()}o=e._pixiId}var l=_e[o];if(a&&n&&!l)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return l||(l=new r(e,i),l.cacheId=o,r.addToCache(l,o)),l},r.fromBuffer=function(e,i,n,a){e=e||new Float32Array(i*n*4);var o=new Gr(e,{width:i,height:n}),s=e instanceof Float32Array?G.FLOAT:G.UNSIGNED_BYTE;return new r(o,Object.assign(_v,a||{width:i,height:n,type:s}))},r.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),_e[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),_e[i]=e)},r.removeFromCache=function(e){if(typeof e=="string"){var i=_e[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete _e[e],i}}else if(e&&e.textureCacheIds){for(var a=0;a<e.textureCacheIds.length;++a)delete _e[e.textureCacheIds[a]];return e.textureCacheIds.length=0,e}return null},r._globalBatch=0,r}(Lr),oh=function(t){lt(r,t);function r(e,i){var n=this,a=i||{},o=a.width,s=a.height;n=t.call(this,o,s)||this,n.items=[],n.itemDirtyIds=[];for(var l=0;l<e;l++){var u=new K;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return r.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)!e[n]||(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof wr?this.addResourceAt(e[n],n):this.addResourceAt(ah(e[n],i),n))},r.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},r.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},r.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},r.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(a){return a.resource}).filter(function(a){return a}),n=i.map(function(a){return a.load()});return this._load=Promise.all(n).then(function(){var a=e.items[0],o=a.realWidth,s=a.realHeight;return e.resize(o,s),Promise.resolve(e)}),this._load},r}(wr),gv=function(t){lt(r,t);function r(e,i){var n=this,a=i||{},o=a.width,s=a.height,l,u;return Array.isArray(e)?(l=e,u=e.length):u=e,n=t.call(this,u,{width:o,height:s})||this,l&&n.initFromArray(l,i),n}return r.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},r.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=Re.TEXTURE_2D_ARRAY},r.prototype.upload=function(e,i,n){var a=this,o=a.length,s=a.itemDirtyIds,l=a.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,o,0,i.format,n.type,null);for(var h=0;h<o;h++){var f=l[h];s[h]<f.dirtyId&&(s[h]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,h,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},r}(oh),pe=function(t){lt(r,t);function r(e){var i=this,n=e,a=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return i=t.call(this,a,o)||this,i.source=e,i.noSubImage=!1,i}return r.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=sv(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},r.prototype.upload=function(e,i,n,a){var o=e.gl,s=i.realWidth,l=i.realHeight;if(a=a||this.source,a instanceof HTMLImageElement){if(!a.complete||a.naturalWidth===0)return!1}else if(a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Mt.UNPACK),!this.noSubImage&&i.target===o.TEXTURE_2D&&n.width===s&&n.height===l?o.texSubImage2D(o.TEXTURE_2D,0,0,0,i.format,n.type,a):(n.width=s,n.height=l,o.texImage2D(i.target,0,n.internalFormat,i.format,n.type,a)),!0},r.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),t.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(wr),yv=function(t){lt(r,t);function r(e){return t.call(this,e)||this}return r.test=function(e){var i=globalThis.OffscreenCanvas;return i&&e instanceof i?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement},r}(pe),bv=function(t){lt(r,t);function r(e,i){var n=this,a=i||{},o=a.width,s=a.height,l=a.autoLoad,u=a.linkBaseTexture;if(e&&e.length!==r.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=t.call(this,6,{width:o,height:s})||this;for(var h=0;h<r.SIDES;h++)n.items[h].target=Re.TEXTURE_CUBE_MAP_POSITIVE_X+h;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),l!==!1&&n.load(),n}return r.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=Re.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(e,i,n){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Re.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},r.prototype.upload=function(e,i,n){for(var a=this.itemDirtyIds,o=0;o<r.SIDES;o++){var s=this.items[o];(a[o]<s.dirtyId||n.dirtyId<i.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,n),a[o]=s.dirtyId):a[o]<-1&&(e.gl.texImage2D(s.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),a[o]=-1))}return!0},r.test=function(e){return Array.isArray(e)&&e.length===r.SIDES},r.SIDES=6,r}(oh),sh=function(t){lt(r,t);function r(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var a=new Image;pe.crossOrigin(a,e,i.crossorigin),a.src=e,e=a}return n=t.call(this,e)||this,!e.complete&&!!n._width&&!!n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:U.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return r.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,a){var o=i.source;i.url=o.src;var s=function(){i.destroyed||(o.onload=null,o.onerror=null,i.resize(o.width,o.height),i._load=null,i.createBitmap?n(i.process()):n(i))};o.complete&&o.src?s():(o.onload=s,o.onerror=function(l){a(l),i.onError.emit(l)})}),this._load)},r.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,a=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:a?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return n(o,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Mt.UNPACK?"premultiply":"none"})}).then(function(o){return e.destroyed?Promise.reject():(e.bitmap=o,e.update(),e._process=null,Promise.resolve(e))}),this._process},r.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var a=!0,o=i._glTextures;for(var s in o){var l=o[s];if(l!==n&&l.dirtyId!==i.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},r}(pe),xv=function(t){lt(r,t);function r(e,i){var n=this;return i=i||{},n=t.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return r.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},r.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},r.prototype._loadSvg=function(){var e=this,i=new Image;pe.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){!e._resolve||(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(!!e._resolve){var n=i.width,a=i.height;if(!n||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=n*e.scale,s=a*e.scale;(e._overrideWidth||e._overrideHeight)&&(o=e._overrideWidth||e._overrideHeight/a*n,s=e._overrideHeight||e._overrideWidth/n*a),o=Math.round(o),s=Math.round(s);var l=e.source;l.width=o,l.height=s,l._pixiId="canvas_"+Pe(),l.getContext("2d").drawImage(i,0,0,n,a,0,0,o,s),e._resolve(),e._resolve=null}}},r.getSize=function(e){var i=r.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},r.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&r.SVG_XML.test(e)},r.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r}(pe),Tv=function(t){lt(r,t);function r(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var o=e[0].src||e[0];pe.crossOrigin(a,o,i.crossorigin);for(var s=0;s<e.length;++s){var l=document.createElement("source"),u=e[s],h=u.src,f=u.mime;h=h||e[s];var c=h.split("?").shift().toLowerCase(),d=c.slice(c.lastIndexOf(".")+1);f=f||r.MIME_TYPES[d]||"video/"+d,l.src=h,l.type=f,a.appendChild(l)}e=a}return n=t.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return r.prototype.update=function(e){if(!this.destroyed){var i=Ct.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},r.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},r.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},r.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},r.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ct.shared.add(this.update,this),this._isConnectedToTicker=!0)},r.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1)},r.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},r.prototype.dispose=function(){this._isConnectedToTicker&&(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ct.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),r.test=function(e,i){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||r.TYPES.indexOf(i)>-1},r.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},r}(pe),Ev=function(t){lt(r,t);function r(e){return t.call(this,e)||this}return r.test=function(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap},r}(pe);Dn.push(sh,Ev,yv,Tv,xv,Gr,bv,gv);var Iv=function(t){lt(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.upload=function(e,i,n){var a=e.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Mt.UNPACK);var o=i.realWidth,s=i.realHeight;return n.width===o&&n.height===s?a.texSubImage2D(i.target,0,0,0,o,s,i.format,n.type,this.data):(n.width=o,n.height=s,a.texImage2D(i.target,0,n.internalFormat,o,s,0,i.format,n.type,this.data)),!0},r}(Gr),$n=function(){function t(r,e){this.width=Math.round(r||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new At("disposeFramebuffer"),this.multisample=bt.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(r,e){return r===void 0&&(r=0),this.colorTextures[r]=e||new K(null,{scaleMode:re.NEAREST,resolution:1,mipmap:ae.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(r){return this.depthTexture=r||new K(new Iv(null,{width:this.width,height:this.height}),{scaleMode:re.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ae.OFF,format:A.DEPTH_COMPONENT,type:G.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(r,e){if(r=Math.round(r),e=Math.round(e),!(r===this.width&&e===this.height)){this.width=r,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],a=n.resolution;n.setSize(r/a,e/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(r/a,e/a)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),lh=function(t){lt(r,t);function r(e){e===void 0&&(e={});var i=this;if(typeof e=="number"){var n=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];e={width:n,height:a,scaleMode:o,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:bt.NONE,i=t.call(this,null,e)||this,i.mipmap=ae.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new $n(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return r.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},r.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r}(K),uh=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(r,e,i){var n=e.width,a=e.height;if(i){var o=r.width/2/n,s=r.height/2/a,l=r.x/n+o,u=r.y/a+s;i=dt.add(i,dt.NW),this.x0=l+o*dt.uX(i),this.y0=u+s*dt.uY(i),i=dt.add(i,2),this.x1=l+o*dt.uX(i),this.y1=u+s*dt.uY(i),i=dt.add(i,2),this.x2=l+o*dt.uX(i),this.y2=u+s*dt.uY(i),i=dt.add(i,2),this.x3=l+o*dt.uX(i),this.y3=u+s*dt.uY(i)}else this.x0=r.x/n,this.y0=r.y/a,this.x1=(r.x+r.width)/n,this.y1=r.y/a,this.x2=(r.x+r.width)/n,this.y2=(r.y+r.height)/a,this.x3=r.x/n,this.y3=(r.y+r.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),ns=new uh;function Yr(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var j=function(t){lt(r,t);function r(e,i,n,a,o,s){var l=t.call(this)||this;if(l.noFrame=!1,i||(l.noFrame=!0,i=new J(0,0,1,1)),e instanceof r&&(e=e.baseTexture),l.baseTexture=e,l._frame=i,l.trim=a,l.valid=!1,l._uvs=ns,l.uvMatrix=null,l.orig=n||i,l._rotate=Number(o||0),o===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new ft(s.x,s.y):new ft(0,0),l._updateID=0,l.textureCacheIds=[],e.valid?l.noFrame?e.valid&&l.onBaseTextureUpdated(e):l.frame=i:e.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&e.on("update",l.onBaseTextureUpdated,l),l}return r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&Qt[i.url]&&r.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new r(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},r.prototype.updateUvs=function(){this._uvs===ns&&(this._uvs=new uh),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=U.STRICT_TEXTURE_CACHE);var a=typeof e=="string",o=null;if(a)o=e;else if(e instanceof K){if(!e.cacheId){var s=i&&i.pixiIdPrefix||"pixiid";e.cacheId=s+"-"+Pe(),K.addToCache(e,e.cacheId)}o=e.cacheId}else{if(!e._pixiId){var s=i&&i.pixiIdPrefix||"pixiid";e._pixiId=s+"_"+Pe()}o=e._pixiId}var l=Qt[o];if(a&&n&&!l)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!l&&!(e instanceof K)?(i.resolution||(i.resolution=bi(e)),l=new r(new K(e,i)),l.baseTexture.cacheId=o,K.addToCache(l.baseTexture,o),r.addToCache(l,o)):!l&&e instanceof K&&(l=new r(e),r.addToCache(l,o)),l},r.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),a=r.from(e,Object.assign({resourceOptions:n},i),!1),o=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):o.load().then(function(){return Promise.resolve(a)})},r.fromBuffer=function(e,i,n,a){return new r(K.fromBuffer(e,i,n,a))},r.fromLoader=function(e,i,n,a){var o=new K(e,Object.assign({scaleMode:U.SCALE_MODE,resolution:bi(i)},a)),s=o.resource;s instanceof sh&&(s.url=i);var l=new r(o);return n||(n=i),K.addToCache(l.baseTexture,n),r.addToCache(l,n),n!==i&&(K.addToCache(l.baseTexture,i),r.addToCache(l,i)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},r.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),Qt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),Qt[i]=e)},r.removeFromCache=function(e){if(typeof e=="string"){var i=Qt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete Qt[e],i}}else if(e&&e.textureCacheIds){for(var a=0;a<e.textureCacheIds.length;++a)Qt[e.textureCacheIds[a]]===e&&delete Qt[e.textureCacheIds[a]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(r.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,a=e.width,o=e.height,s=i+a>this.baseTexture.width,l=n+o>this.baseTexture.height;if(s||l){var u=s&&l?"and":"or",h="X: "+i+" + "+a+" = "+(i+a)+" > "+this.baseTexture.width,f="Y: "+n+" + "+o+" = "+(n+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(h+" "+u+" "+f))}this.valid=a&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),r.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(r,"EMPTY",{get:function(){return r._EMPTY||(r._EMPTY=new r(new K),Yr(r._EMPTY),Yr(r._EMPTY.baseTexture)),r._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(r,"WHITE",{get:function(){if(!r._WHITE){var e=U.ADAPTER.createCanvas(16,16),i=e.getContext("2d");e.width=16,e.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),r._WHITE=new r(K.from(e)),Yr(r._WHITE),Yr(r._WHITE.baseTexture)}return r._WHITE},enumerable:!1,configurable:!0}),r}(Lr),Ue=function(t){lt(r,t);function r(e,i){var n=t.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(r.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),r.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var a=this.baseTexture.resolution,o=Math.round(e*a)/a,s=Math.round(i*a)/a;this.valid=o>0&&s>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=s,n&&this.baseTexture.resize(o,s),this.updateUvs()},r.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},r.create=function(e){for(var i=arguments,n=[],a=1;a<arguments.length;a++)n[a-1]=i[a];return typeof e=="number"&&(jt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new r(new lh(e))},r}(j),Cv=function(){function t(r){this.texturePool={},this.textureOptions=r||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(r,e,i){i===void 0&&(i=bt.NONE);var n=new lh(Object.assign({width:r,height:e,resolution:1,multisample:i},this.textureOptions));return new Ue(n)},t.prototype.getOptimalTexture=function(r,e,i,n){i===void 0&&(i=1),n===void 0&&(n=bt.NONE);var a;r=Math.ceil(r*i-1e-6),e=Math.ceil(e*i-1e-6),!this.enableFullScreen||r!==this._pixelsWidth||e!==this._pixelsHeight?(r=yi(r),e=yi(e),a=((r&65535)<<16|e&65535)>>>0,n>1&&(a+=n*4294967296)):a=n>1?-n:-1,this.texturePool[a]||(this.texturePool[a]=[]);var o=this.texturePool[a].pop();return o||(o=this.createTexture(r,e,n)),o.filterPoolKey=a,o.setResolution(i),o},t.prototype.getFilterTexture=function(r,e,i){var n=this.getOptimalTexture(r.width,r.height,e||r.resolution,i||bt.NONE);return n.filterFrame=r.filterFrame,n},t.prototype.returnTexture=function(r){var e=r.filterPoolKey;r.filterFrame=null,this.texturePool[e].push(r)},t.prototype.returnFilterTexture=function(r){this.returnTexture(r)},t.prototype.clear=function(r){if(r=r!==!1,r)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(r){if(!(r.width===this._pixelsWidth&&r.height===this._pixelsHeight)){this.enableFullScreen=r.width>0&&r.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=r.width,this._pixelsHeight=r.height}},t.SCREEN_KEY=-1,t}(),as=function(){function t(r,e,i,n,a,o,s){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=G.FLOAT),this.buffer=r,this.size=e,this.normalized=i,this.type=n,this.stride=a,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(r,e,i,n,a){return new t(r,e,i,n,a)},t}(),wv=0,Tt=function(){function t(r,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=r||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=wv++,this.disposeRunner=new At("disposeBuffer")}return t.prototype.update=function(r){r instanceof Array&&(r=new Float32Array(r)),this.data=r||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===$t.ELEMENT_ARRAY_BUFFER},set:function(r){this.type=r?$t.ELEMENT_ARRAY_BUFFER:$t.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(r){return r instanceof Array&&(r=new Float32Array(r)),new t(r)},t}(),Rv={Float32Array,Uint32Array,Int32Array,Uint8Array};function Av(t,r){for(var e=0,i=0,n={},a=0;a<t.length;a++)i+=r[a],e+=t[a].length;for(var o=new ArrayBuffer(e*4),s=null,l=0,a=0;a<t.length;a++){var u=r[a],h=t[a],f=eh(h);n[f]||(n[f]=new Rv[f](o)),s=n[f];for(var c=0;c<h.length;c++){var d=(c/u|0)*i+l,p=c%u;s[d+p]=h[c]}l+=u}return new Float32Array(o)}var os={5126:4,5123:2,5121:1},Nv=0,Pv={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Br=function(){function t(r,e){r===void 0&&(r=[]),e===void 0&&(e={}),this.buffers=r,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Nv++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new At("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(r,e,i,n,a,o,s,l){if(i===void 0&&(i=0),n===void 0&&(n=!1),l===void 0&&(l=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Tt||(e instanceof Array&&(e=new Float32Array(e)),e=new Tt(e));var u=r.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],e,i,n,a);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[r]=new as(f,i,n,a,o,s,l),this.instanced=this.instanced||l,this},t.prototype.getAttribute=function(r){return this.attributes[r]},t.prototype.getBuffer=function(r){return this.buffers[this.getAttribute(r).buffer]},t.prototype.addIndex=function(r){return r instanceof Tt||(r instanceof Array&&(r=new Uint16Array(r)),r=new Tt(r)),r.type=$t.ELEMENT_ARRAY_BUFFER,this.indexBuffer=r,this.buffers.indexOf(r)===-1&&this.buffers.push(r),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var r=[],e=[],i=new Tt,n;for(n in this.attributes){var a=this.attributes[n],o=this.buffers[a.buffer];r.push(o.data),e.push(a.size*os[a.type]/4),a.buffer=0}for(i.data=Av(r,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var r in this.attributes){var e=this.attributes[r],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var r=new t,e=0;e<this.buffers.length;e++)r.buffers[e]=new Tt(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];r.attributes[e]=new as(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(r.indexBuffer=r.buffers[this.buffers.indexOf(this.indexBuffer)],r.indexBuffer.type=$t.ELEMENT_ARRAY_BUFFER),r},t.merge=function(r){for(var e=new t,i=[],n=[],a=[],o,s=0;s<r.length;s++){o=r[s];for(var l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,a[l]=0}for(var s=0;s<o.buffers.length;s++)i[s]=new Pv[eh(o.buffers[s].data)](n[s]),e.buffers[s]=new Tt(i[s]);for(var s=0;s<r.length;s++){o=r[s];for(var l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,a[l]),a[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=$t.ELEMENT_ARRAY_BUFFER;for(var u=0,h=0,f=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(var s in o.attributes){var d=o.attributes[s];(d.buffer|0)===c&&(h+=d.size*os[d.type]/4)}for(var s=0;s<r.length;s++){for(var p=r[s].indexBuffer.data,l=0;l<p.length;l++)e.indexBuffer.data[l+f]+=u;u+=r[s].buffers[c].data.length/h,f+=p.length}}return e},t}(),Uv=function(t){lt(r,t);function r(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return r}(Br),hh=function(t){lt(r,t);function r(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Tt(e.vertices),e.uvBuffer=new Tt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return r.prototype.map=function(e,i){var n=0,a=0;return this.uvs[0]=n,this.uvs[1]=a,this.uvs[2]=n+i.width/e.width,this.uvs[3]=a,this.uvs[4]=n+i.width/e.width,this.uvs[5]=a+i.height/e.height,this.uvs[6]=n,this.uvs[7]=a+i.height/e.height,n=i.x,a=i.y,this.vertices[0]=n,this.vertices[1]=a,this.vertices[2]=n+i.width,this.vertices[3]=a,this.vertices[4]=n+i.width,this.vertices[5]=a+i.height,this.vertices[6]=n,this.vertices[7]=a+i.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r}(Br),Ov=0,Ae=function(){function t(r,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ov++,this.static=!!e,this.ubo=!!i,r instanceof Tt?(this.buffer=r,this.buffer.type=$t.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=r,this.ubo&&(this.buffer=new Tt(new Float32Array(1)),this.buffer.type=$t.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(r,e,i){if(!this.ubo)this.uniforms[r]=new t(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(r,e,i){return new t(r,e,i)},t.uboFrom=function(r,e){return new t(r,e!=null?e:!0,!0)},t}(),Sv=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=bt.NONE,this.sourceFrame=new J,this.destinationFrame=new J,this.bindingSourceFrame=new J,this.bindingDestinationFrame=new J,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),qr=[new ft,new ft,new ft,new ft],Vi=new Et,Fv=function(){function t(r){this.renderer=r,this.defaultFilterStack=[{}],this.texturePool=new Cv,this.texturePool.setScreenSize(r.view),this.statePool=[],this.quad=new Uv,this.quadUv=new hh,this.tempRect=new J,this.activeState={},this.globalUniforms=new Ae({outputFrame:new J,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(r,e){for(var i,n,a=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new Sv,l=this.renderer.renderTexture,u=e[0].resolution,h=e[0].multisample,f=e[0].padding,c=e[0].autoFit,d=(i=e[0].legacy)!==null&&i!==void 0?i:!0,p=1;p<e.length;p++){var v=e[p];u=Math.min(u,v.resolution),h=Math.min(h,v.multisample),f=this.useMaxPadding?Math.max(f,v.padding):f+v.padding,c=c&&v.autoFit,d=d||((n=v.legacy)!==null&&n!==void 0?n:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=l.current),o.push(s),s.resolution=u,s.multisample=h,s.legacy=d,s.target=r,s.sourceFrame.copyFrom(r.filterArea||r.getBounds(!0)),s.sourceFrame.pad(f);var m=this.tempRect.copyFrom(l.sourceFrame);a.projection.transform&&this.transformAABB(Vi.copyFrom(a.projection.transform).invert(),m),c?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,l.current?l.current.resolution:a.resolution,l.sourceFrame,l.destinationFrame,a.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(l.sourceFrame),s.bindingDestinationFrame.copyFrom(l.destinationFrame),s.transform=a.projection.transform,a.projection.transform=null,l.bind(s.renderTexture,s.sourceFrame,_),a.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var r=this.defaultFilterStack,e=r.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var a=n.inputSize,o=n.inputPixel,s=n.inputClamp;if(a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],o[0]=Math.round(a[0]*e.resolution),o[1]=Math.round(a[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*a[2]-.5*o[2],s[3]=e.sourceFrame.height*a[3]-.5*o[3],e.legacy){var l=n.filterArea;l[0]=e.destinationFrame.width,l[1]=e.destinationFrame.height,l[2]=e.sourceFrame.x,l[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=r[r.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,he.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var h=e.renderTexture,f=this.getOptimalFilterTexture(h.width,h.height,e.resolution);f.filterFrame=h.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(h.width,h.height,e.resolution),f.filterFrame=h.filterFrame),i[c].apply(this,h,f,he.CLEAR,e);var d=h;h=f,f=d}i[c].apply(this,h,u.renderTexture,he.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(r,e){e===void 0&&(e=he.CLEAR);var i=this.renderer,n=i.renderTexture,a=i.state;if(r===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,r&&r.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=r.filterFrame.width,o.height=r.filterFrame.height,n.bind(r,r.filterFrame,o)}else r!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(r):this.renderer.renderTexture.bind(r,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=a.stateId&1||this.forceClear;(e===he.CLEAR||e===he.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(r,e,i,n){var a=this.renderer;a.state.set(r.state),this.bindAndClear(i,n),r.uniforms.uSampler=e,r.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(r),r.legacy=!!r.program.attributeData.aTextureCoord,r.legacy?(this.quadUv.map(e._frame,e.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Gt.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Gt.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(r,e){var i=this.activeState,n=i.sourceFrame,a=i.destinationFrame,o=e._texture.orig,s=r.set(a.width,0,0,a.height,n.x,n.y),l=e.worldTransform.copyTo(Et.TEMP_MATRIX);return l.invert(),s.prepend(l),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(r,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=bt.NONE),this.texturePool.getOptimalTexture(r,e,i,n)},t.prototype.getFilterTexture=function(r,e,i){if(typeof r=="number"){var n=r;r=e,e=n}r=r||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(r.width,r.height,e||r.resolution,i||bt.NONE);return a.filterFrame=r.filterFrame,a},t.prototype.returnFilterTexture=function(r){this.texturePool.returnTexture(r)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(r,e){var i=qr[0],n=qr[1],a=qr[2],o=qr[3];i.set(e.left,e.top),n.set(e.left,e.bottom),a.set(e.right,e.top),o.set(e.right,e.bottom),r.apply(i,i),r.apply(n,n),r.apply(a,a),r.apply(o,o);var s=Math.min(i.x,n.x,a.x,o.x),l=Math.min(i.y,n.y,a.y,o.y),u=Math.max(i.x,n.x,a.x,o.x),h=Math.max(i.y,n.y,a.y,o.y);e.x=s,e.y=l,e.width=u-s,e.height=h-l},t.prototype.roundFrame=function(r,e,i,n,a){if(!(r.width<=0||r.height<=0||i.width<=0||i.height<=0)){if(a){var o=a.a,s=a.b,l=a.c,u=a.d;if((Math.abs(s)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}a=a?Vi.copyFrom(a):Vi.identity(),a.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(a,r),r.ceil(e),this.transformAABB(a.invert(),r)}},t}(),Si=function(){function t(r){this.renderer=r}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(r){},t}(),Lv=function(){function t(r){this.renderer=r,this.emptyRenderer=new Si(r),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(r){this.currentRenderer!==r&&(this.currentRenderer.stop(),this.currentRenderer=r,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(r,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)r[n]=i[n]||null,r[n]&&(r[n]._batchLocation=n)},t.prototype.boundArray=function(r,e,i,n){for(var a=r.elements,o=r.ids,s=r.count,l=0,u=0;u<s;u++){var h=a[u],f=h._batchLocation;if(f>=0&&f<n&&e[f]===h){o[u]=f;continue}for(;l<n;){var c=e[l];if(c&&c._batchEnabled===i&&c._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,e[l]=h;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),ss=0,Gv=function(){function t(r){this.renderer=r,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),r.view.addEventListener("webglcontextlost",this.handleContextLost,!1),r.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(r){this.gl=r,this.renderer.gl=r,this.renderer.CONTEXT_UID=ss++,r.isContextLost()&&r.getExtension("WEBGL_lose_context")&&r.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(r){this.gl=r,this.validateContext(r),this.renderer.gl=r,this.renderer.CONTEXT_UID=ss++,this.renderer.runners.contextChange.emit(r)},t.prototype.initFromOptions=function(r){var e=this.createContext(this.renderer.view,r);this.initFromContext(e)},t.prototype.createContext=function(r,e){var i;if(U.PREFER_ENV>=ne.WEBGL2&&(i=r.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var r=this.gl,e={anisotropicFiltering:r.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:r.getExtension("OES_texture_float_linear"),s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:r.getExtension("WEBGL_draw_buffers"),depthTexture:r.getExtension("WEBGL_depth_texture"),loseContext:r.getExtension("WEBGL_lose_context"),vertexArrayObject:r.getExtension("OES_vertex_array_object")||r.getExtension("MOZ_OES_vertex_array_object")||r.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:r.getExtension("OES_element_index_uint"),floatTexture:r.getExtension("OES_texture_float"),floatTextureLinear:r.getExtension("OES_texture_float_linear"),textureHalfFloat:r.getExtension("OES_texture_half_float"),textureHalfFloatLinear:r.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:r.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(r){r.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var r=this.renderer.view;this.renderer=null,r.removeEventListener("webglcontextlost",this.handleContextLost),r.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(r){var e=r.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!r.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),Bv=function(){function t(r){this.framebuffer=r,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=bt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),Mv=new J,kv=function(){function t(r){this.renderer=r,this.managedFramebuffers=[],this.unknownFramebuffer=new $n(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new J,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;U.PREFER_ENV===ne.WEBGL_LEGACY&&(e=null,i=null),e?r.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,r.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=r.getInternalformatParameter(r.RENDERBUFFER,r.RGBA8,r.SAMPLES)},t.prototype.bind=function(r,e,i){i===void 0&&(i=0);var n=this.gl;if(r){var a=r.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(r);this.current!==r&&(this.current=r,n.bindFramebuffer(n.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==i&&(r.dirtyId++,r.dirtyFormat++,a.mipLevel=i),a.dirtyId!==r.dirtyId&&(a.dirtyId=r.dirtyId,a.dirtyFormat!==r.dirtyFormat?(a.dirtyFormat=r.dirtyFormat,a.dirtySize=r.dirtySize,this.updateFramebuffer(r,i)):a.dirtySize!==r.dirtySize&&(a.dirtySize=r.dirtySize,this.resizeFramebuffer(r)));for(var o=0;o<r.colorTextures.length;o++){var s=r.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(r.depthTexture&&this.renderer.texture.unbind(r.depthTexture),e){var l=e.width>>i,u=e.height>>i,h=l/e.width;this.setViewport(e.x*h,e.y*h,l,u)}else{var l=r.width>>i,u=r.height>>i;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(r,e,i,n){var a=this.viewport;r=Math.round(r),e=Math.round(e),i=Math.round(i),n=Math.round(n),(a.width!==i||a.height!==n||a.x!==r||a.y!==e)&&(a.x=r,a.y=e,a.width=i,a.height=n,this.gl.viewport(r,e,i,n))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(r,e,i,n,a){a===void 0&&(a=_i.COLOR|_i.DEPTH);var o=this.gl;o.clearColor(r,e,i,n),o.clear(a)},t.prototype.initFramebuffer=function(r){var e=this.gl,i=new Bv(e.createFramebuffer());return i.multisample=this.detectSamples(r.multisample),r.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(r),r.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(r){var e=this.gl,i=r.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,r.width,r.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,r.width,r.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height));var n=r.colorTextures,a=n.length;e.drawBuffers||(a=Math.min(a,1));for(var o=0;o<a;o++){var s=n[o],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0)}r.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(r.depthTexture,0)},t.prototype.updateFramebuffer=function(r,e){var i=this.gl,n=r.glFramebuffers[this.CONTEXT_UID],a=r.colorTextures,o=a.length;i.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(r)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,r.width,r.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var s=[],l=0;l<o;l++){var u=a[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),!(l===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,e),s.push(i.COLOR_ATTACHMENT0+l))}if(s.length>1&&i.drawBuffers(s),r.depthTexture){var f=this.writeDepthTexture;if(f){var c=r.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(r.stencil||r.depth)&&!(r.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,r.width,r.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r.width,r.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},t.prototype.canMultisampleFramebuffer=function(r){return this.renderer.context.webGLVersion!==1&&r.colorTextures.length<=1&&!r.depthTexture},t.prototype.detectSamples=function(r){var e=this.msaaSamples,i=bt.NONE;if(r<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=r){i=e[n];break}return i===1&&(i=bt.NONE),i},t.prototype.blit=function(r,e,i){var n=this,a=n.current,o=n.renderer,s=n.gl,l=n.CONTEXT_UID;if(o.context.webGLVersion===2&&!!a){var u=a.glFramebuffers[l];if(!!u){if(!r){if(!u.msaaBuffer)return;var h=a.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new $n(a.width,a.height),u.blitFramebuffer.addColorTexture(0,h)),r=u.blitFramebuffer,r.colorTextures[0]!==h&&(r.colorTextures[0]=h,r.dirtyId++,r.dirtyFormat++),(r.width!==a.width||r.height!==a.height)&&(r.width=a.width,r.height=a.height,r.dirtyId++,r.dirtySize++)}e||(e=Mv,e.width=a.width,e.height=a.height),i||(i=e);var f=e.width===i.width&&e.height===i.height;this.bind(r),s.bindFramebuffer(s.READ_FRAMEBUFFER,u.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,s.COLOR_BUFFER_BIT,f?s.NEAREST:s.LINEAR)}}},t.prototype.disposeFramebuffer=function(r,e){var i=r.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!!i){delete r.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(r);a>=0&&this.managedFramebuffers.splice(a,1),r.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(r){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],r)},t.prototype.forceStencil=function(){var r=this.current;if(!!r){var e=r.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){r.stencil=!0;var i=r.width,n=r.height,a=this.gl,o=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,o),e.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,e.multisample,a.DEPTH24_STENCIL8,i,n):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,i,n),e.stencil=o,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new J},t.prototype.destroy=function(){this.renderer=null},t}(),zi={5126:4,5123:2,5121:1},Dv=function(){function t(r){this.renderer=r,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var r=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;U.PREFER_ENV===ne.WEBGL_LEGACY&&(i=null),i?(r.createVertexArray=function(){return i.createVertexArrayOES()},r.bindVertexArray=function(a){return i.bindVertexArrayOES(a)},r.deleteVertexArray=function(a){return i.deleteVertexArrayOES(a)}):(this.hasVao=!1,r.createVertexArray=function(){return null},r.bindVertexArray=function(){return null},r.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=r.getExtension("ANGLE_instanced_arrays");n?(r.vertexAttribDivisor=function(a,o){return n.vertexAttribDivisorANGLE(a,o)},r.drawElementsInstanced=function(a,o,s,l,u){return n.drawElementsInstancedANGLE(a,o,s,l,u)},r.drawArraysInstanced=function(a,o,s,l){return n.drawArraysInstancedANGLE(a,o,s,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(r,e){e=e||this.renderer.shader.shader;var i=this.gl,n=r.glVertexArrayObjects[this.CONTEXT_UID],a=!1;n||(this.managedGeometries[r.id]=r,r.disposeRunner.add(this),r.glVertexArrayObjects[this.CONTEXT_UID]=n={},a=!0);var o=n[e.program.id]||this.initGeometryVao(r,e,a);this._activeGeometry=r,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(r,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var r=this._activeGeometry,e=this.renderer.buffer,i=0;i<r.buffers.length;i++){var n=r.buffers[i];e.update(n)}},t.prototype.checkCompatibility=function(r,e){var i=r.attributes,n=e.attributeData;for(var a in n)if(!i[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},t.prototype.getSignature=function(r,e){var i=r.attributes,n=e.attributeData,a=["g",r.id];for(var o in i)n[o]&&a.push(o,n[o].location);return a.join("-")},t.prototype.initGeometryVao=function(r,e,i){i===void 0&&(i=!0);var n=this.gl,a=this.CONTEXT_UID,o=this.renderer.buffer,s=e.program;s.glPrograms[a]||this.renderer.shader.generateProgram(e),this.checkCompatibility(r,s);var l=this.getSignature(r,s),u=r.glVertexArrayObjects[this.CONTEXT_UID],h=u[l];if(h)return u[s.id]=h,h;var f=r.buffers,c=r.attributes,d={},p={};for(var v in f)d[v]=0,p[v]=0;for(var v in c)!c[v].size&&s.attributeData[v]?c[v].size=s.attributeData[v].size:c[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[v].buffer]+=c[v].size*zi[c[v].type];for(var v in c){var m=c[v],_=m.size;m.stride===void 0&&(d[m.buffer]===_*zi[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=p[m.buffer],p[m.buffer]+=_*zi[m.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(var g=0;g<f.length;g++){var y=f[g];o.bind(y),i&&y._glBuffers[a].refCount++}return this.activateVao(r,s),this._activeVao=h,u[s.id]=h,u[l]=h,h},t.prototype.disposeGeometry=function(r,e){var i;if(!!this.managedGeometries[r.id]){delete this.managedGeometries[r.id];var n=r.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,o=r.buffers,s=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(r.disposeRunner.remove(this),!!n){if(s)for(var l=0;l<o.length;l++){var u=o[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&s.dispose(o[l],e))}if(!e){for(var h in n)if(h[0]==="g"){var f=n[h];this._activeVao===f&&this.unbind(),a.deleteVertexArray(f)}}delete r.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(r){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],r)},t.prototype.activateVao=function(r,e){var i=this.gl,n=this.CONTEXT_UID,a=this.renderer.buffer,o=r.buffers,s=r.attributes;r.indexBuffer&&a.bind(r.indexBuffer);var l=null;for(var u in s){var h=s[u],f=o[h.buffer],c=f._glBuffers[n];if(e.attributeData[u]){l!==c&&(a.bind(f),l=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(r,e,i,n){var a=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,l=s===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;s===2||s===4&&this.canUseUInt32ElementIndex?o.instanced?a.drawElementsInstanced(r,e||o.indexBuffer.data.length,l,(i||0)*s,n||1):a.drawElements(r,e||o.indexBuffer.data.length,l,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?a.drawArraysInstanced(r,i,e||o.getSize(),n||1):a.drawArrays(r,i,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),Hv=function(){function t(r){r===void 0&&(r=null),this.type=xt.NONE,this.autoDetect=!0,this.maskObject=r||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=U.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(r){r?this._filters?this._filters[0]=r:this._filters=[r]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=xt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(r){r?(this._stencilCounter=r._stencilCounter,this._scissorCounter=r._scissorCounter,this._scissorRect=r._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ls(t,r,e){var i=t.createShader(r);return t.shaderSource(i,e),t.compileShader(i),i}function us(t,r){var e=t.getShaderSource(r).split(`
`).map(function(u,h){return h+": "+u}),i=t.getShaderInfoLog(r),n=i.split(`
`),a={},o=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!a[u]?(a[u]=!0,!0):!1}),s=[""];o.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=e.join(`
`);s[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function Xv(t,r,e,i){t.getProgramParameter(r,t.LINK_STATUS)||(t.getShaderParameter(e,t.COMPILE_STATUS)||us(t,e),t.getShaderParameter(i,t.COMPILE_STATUS)||us(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(r)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(r)))}function Wi(t){for(var r=new Array(t),e=0;e<r.length;e++)r[e]=!1;return r}function fh(t,r){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*r);case"vec3":return new Float32Array(3*r);case"vec4":return new Float32Array(4*r);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*r);case"ivec3":return new Int32Array(3*r);case"ivec4":return new Int32Array(4*r);case"uvec2":return new Uint32Array(2*r);case"uvec3":return new Uint32Array(3*r);case"uvec4":return new Uint32Array(4*r);case"bool":return!1;case"bvec2":return Wi(2*r);case"bvec3":return Wi(3*r);case"bvec4":return Wi(4*r);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ch={},sr=ch;function $v(){if(sr===ch||sr&&sr.isContextLost()){var t=U.ADAPTER.createCanvas(),r=void 0;U.PREFER_ENV>=ne.WEBGL2&&(r=t.getContext("webgl2",{})),r||(r=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),r?r.getExtension("WEBGL_draw_buffers"):r=null),sr=r}return sr}var Zr;function jv(){if(!Zr){Zr=Xt.MEDIUM;var t=$v();if(t&&t.getShaderPrecisionFormat){var r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Zr=r.precision?Xt.HIGH:Xt.MEDIUM}}return Zr}function hs(t,r,e){if(t.substring(0,9)!=="precision"){var i=r;return r===Xt.HIGH&&e!==Xt.HIGH&&(i=Xt.MEDIUM),"precision "+i+` float;
`+t}else if(e!==Xt.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var Vv={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function dh(t){return Vv[t]}var Kr=null,fs={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ph(t,r){if(!Kr){var e=Object.keys(fs);Kr={};for(var i=0;i<e.length;++i){var n=e[i];Kr[t[n]]=fs[n]}}return Kr[r]}var Qe=[{test:function(t){return t.type==="float"&&t.size===1},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,r){return t.type==="mat3"&&t.size===1&&r.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,r){return t.type==="vec2"&&t.size===1&&r.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,r){return t.type==="vec4"&&t.size===1&&r.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],zv={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Wv={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Yv(t,r){var e,i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var n in t.uniforms){var a=r[n];if(!a){!((e=t.uniforms[n])===null||e===void 0)&&e.group&&(t.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+n+", '"+n+`');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.`+n+`, syncData);
                    `));continue}for(var o=t.uniforms[n],s=!1,l=0;l<Qe.length;l++)if(Qe[l].test(a,o)){i.push(Qe[l].code(n,o)),s=!0;break}if(!s){var u=a.size===1?zv:Wv,h=u[a.type].replace("location",'ud["'+n+'"].location');i.push(`
            cu = ud["`+n+`"];
            cv = cu.value;
            v = uv["`+n+`"];
            `+h+";")}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var qv=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Zv(t){for(var r="",e=0;e<t;++e)e>0&&(r+=`
else `),e<t-1&&(r+="if(test == "+e+".0){}");return r}function Kv(t,r){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=r.createShader(r.FRAGMENT_SHADER);;){var i=qv.replace(/%forloop%/gi,Zv(t));if(r.shaderSource(e,i),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS))t=t/2|0;else break}return t}var lr;function Jv(){if(typeof lr=="boolean")return lr;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");lr=t({a:"b"},"a","b")===!0}catch{lr=!1}return lr}var Qv=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,tm=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,em=0,Jr={},Mr=function(){function t(r,e,i){i===void 0&&(i="pixi-shader"),this.id=em++,this.vertexSrc=r||t.defaultVertexSrc,this.fragmentSrc=e||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Jr[i]?(Jr[i]++,i+="-"+Jr[i]):Jr[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=hs(this.vertexSrc,U.PRECISION_VERTEX,Xt.HIGH),this.fragmentSrc=hs(this.fragmentSrc,U.PRECISION_FRAGMENT,jv())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return tm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Qv},enumerable:!1,configurable:!0}),t.from=function(r,e,i){var n=r+e,a=Go[n];return a||(Go[n]=a=new t(r,e,i)),a},t}(),de=function(){function t(r,e){this.uniformBindCount=0,this.program=r,e?e instanceof Ae?this.uniformGroup=e:this.uniformGroup=new Ae(e):this.uniformGroup=new Ae({})}return t.prototype.checkUniformExists=function(r,e){if(e.uniforms[r])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(r,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(r,e,i){var n=Mr.from(r,e);return new t(n,i)},t}(),Yi=0,qi=1,Zi=2,Ki=3,Ji=4,Qi=5,Se=function(){function t(){this.data=0,this.blendMode=B.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<Yi)},set:function(r){!!(this.data&1<<Yi)!==r&&(this.data^=1<<Yi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<qi)},set:function(r){!!(this.data&1<<qi)!==r&&(this.data^=1<<qi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<Zi)},set:function(r){!!(this.data&1<<Zi)!==r&&(this.data^=1<<Zi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<Ki)},set:function(r){!!(this.data&1<<Ki)!==r&&(this.data^=1<<Ki)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<Qi)},set:function(r){!!(this.data&1<<Qi)!==r&&(this.data^=1<<Qi)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Ji)},set:function(r){!!(this.data&1<<Ji)!==r&&(this.data^=1<<Ji)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(r){this.blend=r!==B.NONE,this._blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(r){this.offsets=!!r,this._polygonOffset=r},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var r=new t;return r.depthTest=!1,r.blend=!0,r},t}(),rm=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,im=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,yt=function(t){lt(r,t);function r(e,i,n){var a=this,o=Mr.from(e||r.defaultVertexSrc,i||r.defaultFragmentSrc);return a=t.call(this,o,n)||this,a.padding=0,a.resolution=U.FILTER_RESOLUTION,a.multisample=U.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Se,a}return r.prototype.apply=function(e,i,n,a,o){e.applyFilter(this,i,n,a)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultVertexSrc",{get:function(){return im},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return rm},enumerable:!1,configurable:!0}),r}(de),nm=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,am=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,cs=new Et,Na=function(){function t(r,e){this._texture=r,this.mapCoord=new Et,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e=="undefined"?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture=r,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(r,e){e===void 0&&(e=r);for(var i=this.mapCoord,n=0;n<r.length;n+=2){var a=r[n],o=r[n+1];e[n]=a*i.a+o*i.c+i.tx,e[n+1]=a*i.b+o*i.d+i.ty}return e},t.prototype.update=function(r){var e=this._texture;if(!e||!e.valid||!r&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,a=e.trim;a&&(cs.set(n.width/a.width,0,0,n.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(cs));var o=e.baseTexture,s=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+l+u)/o.width,s[1]=(e._frame.y+l+u)/o.height,s[2]=(e._frame.x+e._frame.width-l+u)/o.width,s[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0},t}(),om=function(t){lt(r,t);function r(e,i,n){var a=this,o=null;return typeof e!="string"&&i===void 0&&n===void 0&&(o=e,e=void 0,i=void 0,n=void 0),a=t.call(this,e||nm,i||am,n)||this,a.maskSprite=o,a.maskMatrix=new Et,a}return Object.defineProperty(r.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),r.prototype.apply=function(e,i,n,a){var o=this._maskSprite,s=o._texture;!s.valid||(s.uvMatrix||(s.uvMatrix=new Na(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,o).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,e.applyFilter(this,i,n,a))},r}(yt),sm=function(){function t(r){this.renderer=r,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(r){this.maskStack=r,this.renderer.scissor.setMaskStack(r),this.renderer.stencil.setMaskStack(r)},t.prototype.push=function(r,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Hv;n.pooled=!0,n.maskObject=e,i=n}var a=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(a),i._colorMask=a?a._colorMask:15,i.autoDetect&&this.detect(i),i._target=r,i.type!==xt.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case xt.SCISSOR:this.renderer.scissor.push(i);break;case xt.STENCIL:this.renderer.stencil.push(i);break;case xt.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case xt.COLOR:this.pushColorMask(i);break}i.type===xt.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(r){var e=this.maskStack.pop();if(!(!e||e._target!==r)){if(e.enabled)switch(e.type){case xt.SCISSOR:this.renderer.scissor.pop(e);break;case xt.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case xt.SPRITE:this.popSpriteMask(e);break;case xt.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===xt.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(r){var e=r.maskObject;e?e.isSprite?r.type=xt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(r)?r.type=xt.SCISSOR:r.type=xt.STENCIL:r.type=xt.COLOR},t.prototype.pushSpriteMask=function(r){var e,i,n=r.maskObject,a=r._target,o=r._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new om]));var s=this.renderer,l=s.renderTexture,u,h;if(l.current){var f=l.current;u=r.resolution||f.resolution,h=(e=r.multisample)!==null&&e!==void 0?e:f.multisample}else u=r.resolution||s.resolution,h=(i=r.multisample)!==null&&i!==void 0?i:s.multisample;o[0].resolution=u,o[0].multisample=h,o[0].maskSprite=n;var c=a.filterArea;a.filterArea=n.getBounds(!0),s.filter.push(a,o),a.filterArea=c,r._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(r){this.renderer.filter.pop(),r._filters?r._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(r){var e=r._colorMask,i=r._colorMask=e&r.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.popColorMask=function(r){var e=r._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.destroy=function(){this.renderer=null},t}(),vh=function(){function t(r){this.renderer=r,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(r){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=r;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),ds=new Et,ps=[],lm=function(t){lt(r,t);function r(e){var i=t.call(this,e)||this;return i.glConst=U.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return r.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},r.prototype.calcScissorRect=function(e){var i;if(!e._scissorRectLocal){var n=e._scissorRect,a=e.maskObject,o=this.renderer,s=o.renderTexture,l=a.getBounds(!0,(i=ps.pop())!==null&&i!==void 0?i:new J);this.roundFrameToPixels(l,s.current?s.current.resolution:o.resolution,s.sourceFrame,s.destinationFrame,o.projection.transform),n&&l.fit(n),e._scissorRectLocal=l}},r.isMatrixRotated=function(e){if(!e)return!1;var i=e.a,n=e.b,a=e.c,o=e.d;return(Math.abs(n)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(o)>1e-4)},r.prototype.testScissor=function(e){var i=e.maskObject;if(!i.isFastRect||!i.isFastRect()||r.isMatrixRotated(i.worldTransform)||r.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var n=e._scissorRectLocal;return n.width>0&&n.height>0},r.prototype.roundFrameToPixels=function(e,i,n,a,o){r.isMatrixRotated(o)||(o=o?ds.copyFrom(o):ds.identity(),o.translate(-n.x,-n.y).scale(a.width/n.width,a.height/n.height).translate(a.x,a.y),this.renderer.filter.transformAABB(o,e),e.fit(a),e.x=Math.round(e.x*i),e.y=Math.round(e.y*i),e.width=Math.round(e.width*i),e.height=Math.round(e.height*i))},r.prototype.push=function(e){e._scissorRectLocal||this.calcScissorRect(e);var i=this.renderer.gl;e._scissorRect||i.enable(i.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()},r.prototype.pop=function(e){var i=this.renderer.gl;e&&ps.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},r.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i;this.renderer.renderTexture.current?i=e.y:i=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,i,e.width,e.height)},r}(vh),um=function(t){lt(r,t);function r(e){var i=t.call(this,e)||this;return i.glConst=U.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return r.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},r.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,a=e._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;var o=e._colorMask;o!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,a,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,o!==0&&(e._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},r.prototype.pop=function(e){var i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{var n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,a=n?n._colorMask:15;a!==0&&(n._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,a!==0&&(n._colorMask=a,i.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}},r.prototype._useCurrent=function(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},r}(vh),hm=function(){function t(r){this.renderer=r,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Et,this.transform=null}return t.prototype.update=function(r,e,i,n){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||r,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(r,e,i,n){var a=this.projectionMatrix,o=n?-1:1;a.identity(),a.a=1/e.width*2,a.d=o*(1/e.height*2),a.tx=-1-e.x*a.a,a.ty=-o-e.y*a.d},t.prototype.setTransform=function(r){},t.prototype.destroy=function(){this.renderer=null},t}(),ge=new J,ur=new J,fm=function(){function t(r){this.renderer=r,this.clearColor=r._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new J,this.destinationFrame=new J,this.viewportFrame=new J}return t.prototype.bind=function(r,e,i){r===void 0&&(r=null);var n=this.renderer;this.current=r;var a,o,s;r?(a=r.baseTexture,s=a.resolution,e||(ge.width=r.frame.width,ge.height=r.frame.height,e=ge),i||(ur.x=r.frame.x,ur.y=r.frame.y,ur.width=e.width,ur.height=e.height,i=ur),o=a.framebuffer):(s=n.resolution,e||(ge.width=n.screen.width,ge.height=n.screen.height,e=ge),i||(i=ge,i.width=e.width,i.height=e.height));var l=this.viewportFrame;l.x=i.x*s,l.y=i.y*s,l.width=i.width*s,l.height=i.height*s,r||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,e,s,!o),r?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(r,e){this.current?r=r||this.current.baseTexture.clearColor:r=r||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,a=i.width!==n.width||i.height!==n.height;if(a){var o=this.viewportFrame,s=o.x,l=o.y,u=o.width,h=o.height;s=Math.round(s),l=Math.round(l),u=Math.round(u),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,l,u,h)}this.renderer.framebuffer.clear(r[0],r[1],r[2],r[3],e),a&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function cm(t,r,e,i,n){e.buffer.update(n)}var dm={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},mh={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function pm(t){for(var r=t.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,a=0;a<r.length;a++){var o=r[a];if(e=mh[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){var s=i%e%16;i+=s,n+=s}i+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,i=e):(o.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:r,size:n}}function vm(t,r){var e=[];for(var i in t)r[i]&&e.push(r[i]);return e.sort(function(n,a){return n.index-a.index}),e}function mm(t,r){if(!t.autoManage)return{size:0,syncFunc:cm};for(var e=vm(t.uniforms,r),i=pm(e),n=i.uboElements,a=i.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],s=0;s<n.length;s++){for(var l=n[s],u=t.uniforms[l.data.name],h=l.data.name,f=!1,c=0;c<Qe.length;c++){var d=Qe[c];if(d.codeUbo&&d.test(l.data,u)){o.push("offset = "+l.offset/4+";",Qe[c].codeUbo(l.data.name,u)),f=!0;break}}if(!f)if(l.data.size>1){var p=dh(l.data.type),v=Math.max(mh[l.data.type]/16,1),m=p/v,_=(4-m%4)%4;o.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*v+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+_+`;
                }

                `)}else{var g=dm[l.data.type];o.push(`
                cv = ud.`+h+`.value;
                v = uv.`+h+`;
                offset = `+l.offset/4+`;
                `+g+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var _m=function(){function t(r,e){this.program=r,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function gm(t,r){for(var e={},i=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var a=r.getActiveAttrib(t,n);if(a.name.indexOf("gl_")!==0){var o=ph(r,a.type),s={type:o,name:a.name,size:dh(o),location:r.getAttribLocation(t,a.name)};e[a.name]=s}}return e}function ym(t,r){for(var e={},i=r.getProgramParameter(t,r.ACTIVE_UNIFORMS),n=0;n<i;n++){var a=r.getActiveUniform(t,n),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),l=ph(r,a.type);e[o]={name:o,index:n,type:l,size:a.size,isArray:s,value:fh(l,a.size)}}return e}function bm(t,r){var e=ls(t,t.VERTEX_SHADER,r.vertexSrc),i=ls(t,t.FRAGMENT_SHADER,r.fragmentSrc),n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||Xv(t,n,e,i),r.attributeData=gm(n,t),r.uniformData=ym(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(r.vertexSrc)){var a=Object.keys(r.attributeData);a.sort(function(h,f){return h>f?1:-1});for(var o=0;o<a.length;o++)r.attributeData[a[o]].location=o,t.bindAttribLocation(n,o,a[o]);t.linkProgram(n)}t.deleteShader(e),t.deleteShader(i);var s={};for(var o in r.uniformData){var l=r.uniformData[o];s[o]={location:t.getUniformLocation(n,o),value:fh(l.type,l.size)}}var u=new _m(n,s);return u}var xm=0,Qr={textureCount:0,uboCount:0},Tm=function(){function t(r){this.destroyed=!1,this.renderer=r,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=xm++}return t.prototype.systemCheck=function(){if(!Jv())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(r){this.gl=r,this.reset()},t.prototype.bind=function(r,e){r.uniforms.globals=this.renderer.globalUniforms;var i=r.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(r);return this.shader=r,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(Qr.textureCount=0,Qr.uboCount=0,this.syncUniformGroup(r.uniformGroup,Qr)),n},t.prototype.setUniforms=function(r){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,r,this.renderer)},t.prototype.syncUniformGroup=function(r,e){var i=this.getGlProgram();(!r.static||r.dirtyId!==i.uniformDirtyGroups[r.id])&&(i.uniformDirtyGroups[r.id]=r.dirtyId,this.syncUniforms(r,i,e))},t.prototype.syncUniforms=function(r,e,i){var n=r.syncUniforms[this.shader.program.id]||this.createSyncGroups(r);n(e.uniformData,r.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(r){var e=this.getSignature(r,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Yv(r,this.shader.program.uniformData)),r.syncUniforms[this.shader.program.id]=this.cache[e],r.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(r,e){var i=this.getGlProgram();if(!r.static||r.dirtyId!==0||!i.uniformGroups[r.id]){r.dirtyId=0;var n=i.uniformGroups[r.id]||this.createSyncBufferGroup(r,i,e);r.buffer.update(),n(i.uniformData,r.uniforms,this.renderer,Qr,r.buffer)}this.renderer.buffer.bindBufferBase(r.buffer,i.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(r,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(r.buffer);var a=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(r,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=mm(r,this.shader.program.uniformData)),r.autoManage){var l=new Float32Array(s.size/4);r.buffer.update(l)}return e.uniformGroups[r.id]=s.syncFunc,e.uniformGroups[r.id]},t.prototype.getSignature=function(r,e,i){var n=r.uniforms,a=[i+"-"];for(var o in n)a.push(o),e[o]&&a.push(e[o].type);return a.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(r){var e=this.gl,i=r.program,n=bm(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function Em(t,r){return r===void 0&&(r=[]),r[B.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.ADD]=[t.ONE,t.ONE],r[B.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.NONE]=[0,0],r[B.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],r[B.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],r[B.SRC_IN]=[t.DST_ALPHA,t.ZERO],r[B.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],r[B.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],r[B.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],r[B.DST_IN]=[t.ZERO,t.SRC_ALPHA],r[B.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],r[B.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],r[B.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],r[B.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],r}var Im=0,Cm=1,wm=2,Rm=3,Am=4,Nm=5,Pm=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=B.NONE,this._blendEq=!1,this.map=[],this.map[Im]=this.setBlend,this.map[Cm]=this.setOffset,this.map[wm]=this.setCullFace,this.map[Rm]=this.setDepthTest,this.map[Am]=this.setFrontFace,this.map[Nm]=this.setDepthMask,this.checks=[],this.defaultState=new Se,this.defaultState.blend=!0}return t.prototype.contextChange=function(r){this.gl=r,this.blendModes=Em(r),this.set(this.defaultState),this.reset()},t.prototype.set=function(r){if(r=r||this.defaultState,this.stateId!==r.data){for(var e=this.stateId^r.data,i=0;e;)e&1&&this.map[i].call(this,!!(r.data&1<<i)),e=e>>1,i++;this.stateId=r.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,r)},t.prototype.forceState=function(r){r=r||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(r.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,r);this.stateId=r.data},t.prototype.setBlend=function(r){this.updateCheck(t.checkBlendMode,r),this.gl[r?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(r){this.updateCheck(t.checkPolygonOffset,r),this.gl[r?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(r){this.gl[r?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(r){this.gl.depthMask(r)},t.prototype.setCullFace=function(r){this.gl[r?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(r){this.gl.frontFace(this.gl[r?"CW":"CCW"])},t.prototype.setBlendMode=function(r){if(r!==this.blendMode){this.blendMode=r;var e=this.blendModes[r],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(r,e){this.gl.polygonOffset(r,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(r,e){var i=this.checks.indexOf(r);e&&i===-1?this.checks.push(r):!e&&i!==-1&&this.checks.splice(i,1)},t.checkBlendMode=function(r,e){r.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(r,e){r.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),Um=function(){function t(r){this.renderer=r,this.count=0,this.checkCount=0,this.maxIdle=U.GC_MAX_IDLE,this.checkCountMax=U.GC_MAX_CHECK_COUNT,this.mode=U.GC_MODE}return t.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==Gn.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var r=this.renderer.texture,e=r.managedTextures,i=!1,n=0;n<e.length;n++){var a=e[n];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(r.destroyTexture(a,!0),e[n]=null,i=!0)}if(i){for(var o=0,n=0;n<e.length;n++)e[n]!==null&&(e[o++]=e[n]);e.length=o}},t.prototype.unload=function(r){var e=this.renderer.texture,i=r._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=r.children.length-1;n>=0;n--)this.unload(r.children[n])},t.prototype.destroy=function(){this.renderer=null},t}();function Om(t){var r,e,i,n,a,o,s,l,u,h,f,c,d,p,v,m,_,g,y,T,x,b,R;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?R=(r={},r[G.UNSIGNED_BYTE]=(e={},e[A.RGBA]=t.RGBA8,e[A.RGB]=t.RGB8,e[A.RG]=t.RG8,e[A.RED]=t.R8,e[A.RGBA_INTEGER]=t.RGBA8UI,e[A.RGB_INTEGER]=t.RGB8UI,e[A.RG_INTEGER]=t.RG8UI,e[A.RED_INTEGER]=t.R8UI,e[A.ALPHA]=t.ALPHA,e[A.LUMINANCE]=t.LUMINANCE,e[A.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,e),r[G.BYTE]=(i={},i[A.RGBA]=t.RGBA8_SNORM,i[A.RGB]=t.RGB8_SNORM,i[A.RG]=t.RG8_SNORM,i[A.RED]=t.R8_SNORM,i[A.RGBA_INTEGER]=t.RGBA8I,i[A.RGB_INTEGER]=t.RGB8I,i[A.RG_INTEGER]=t.RG8I,i[A.RED_INTEGER]=t.R8I,i),r[G.UNSIGNED_SHORT]=(n={},n[A.RGBA_INTEGER]=t.RGBA16UI,n[A.RGB_INTEGER]=t.RGB16UI,n[A.RG_INTEGER]=t.RG16UI,n[A.RED_INTEGER]=t.R16UI,n[A.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,n),r[G.SHORT]=(a={},a[A.RGBA_INTEGER]=t.RGBA16I,a[A.RGB_INTEGER]=t.RGB16I,a[A.RG_INTEGER]=t.RG16I,a[A.RED_INTEGER]=t.R16I,a),r[G.UNSIGNED_INT]=(o={},o[A.RGBA_INTEGER]=t.RGBA32UI,o[A.RGB_INTEGER]=t.RGB32UI,o[A.RG_INTEGER]=t.RG32UI,o[A.RED_INTEGER]=t.R32UI,o[A.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,o),r[G.INT]=(s={},s[A.RGBA_INTEGER]=t.RGBA32I,s[A.RGB_INTEGER]=t.RGB32I,s[A.RG_INTEGER]=t.RG32I,s[A.RED_INTEGER]=t.R32I,s),r[G.FLOAT]=(l={},l[A.RGBA]=t.RGBA32F,l[A.RGB]=t.RGB32F,l[A.RG]=t.RG32F,l[A.RED]=t.R32F,l[A.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),r[G.HALF_FLOAT]=(u={},u[A.RGBA]=t.RGBA16F,u[A.RGB]=t.RGB16F,u[A.RG]=t.RG16F,u[A.RED]=t.R16F,u),r[G.UNSIGNED_SHORT_5_6_5]=(h={},h[A.RGB]=t.RGB565,h),r[G.UNSIGNED_SHORT_4_4_4_4]=(f={},f[A.RGBA]=t.RGBA4,f),r[G.UNSIGNED_SHORT_5_5_5_1]=(c={},c[A.RGBA]=t.RGB5_A1,c),r[G.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[A.RGBA]=t.RGB10_A2,d[A.RGBA_INTEGER]=t.RGB10_A2UI,d),r[G.UNSIGNED_INT_10F_11F_11F_REV]=(p={},p[A.RGB]=t.R11F_G11F_B10F,p),r[G.UNSIGNED_INT_5_9_9_9_REV]=(v={},v[A.RGB]=t.RGB9_E5,v),r[G.UNSIGNED_INT_24_8]=(m={},m[A.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,m),r[G.FLOAT_32_UNSIGNED_INT_24_8_REV]=(_={},_[A.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,_),r):R=(g={},g[G.UNSIGNED_BYTE]=(y={},y[A.RGBA]=t.RGBA,y[A.RGB]=t.RGB,y[A.ALPHA]=t.ALPHA,y[A.LUMINANCE]=t.LUMINANCE,y[A.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,y),g[G.UNSIGNED_SHORT_5_6_5]=(T={},T[A.RGB]=t.RGB,T),g[G.UNSIGNED_SHORT_4_4_4_4]=(x={},x[A.RGBA]=t.RGBA,x),g[G.UNSIGNED_SHORT_5_5_5_1]=(b={},b[A.RGBA]=t.RGBA,b),g),R}var tn=function(){function t(r){this.texture=r,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=G.UNSIGNED_BYTE,this.internalFormat=A.RGBA,this.samplerType=0}return t}(),Sm=function(){function t(r){this.renderer=r,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new K,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Om(r);var e=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new tn(r.createTexture());r.bindTexture(r.TEXTURE_2D,n.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[r.TEXTURE_2D]=n,this.emptyTextures[r.TEXTURE_CUBE_MAP]=new tn(r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.emptyTextures[r.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(r,e){e===void 0&&(e=0);var i=this.gl;if(r=r==null?void 0:r.castToBaseTexture(),r&&r.valid&&!r.parentTextureArray){r.touched=this.renderer.textureGC.count;var n=r._glTextures[this.CONTEXT_UID]||this.initTexture(r);this.boundTextures[e]!==r&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(r.target,n.texture)),n.dirtyId!==r.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(r)),this.boundTextures[e]=r}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]=this.unknownTexture},t.prototype.unbind=function(r){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<n.length;a++)n[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<n.length;a++)n[a]===r&&(this.currentLocation!==a&&(i.activeTexture(i.TEXTURE0+a),this.currentLocation=a),i.bindTexture(r.target,this.emptyTextures[r.target].texture),n[a]=null)},t.prototype.ensureSamplerType=function(r){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,a=e.CONTEXT_UID;if(!!n)for(var o=r-1;o>=0;--o){var s=i[o];if(s){var l=s._glTextures[a];l.samplerType!==gi.FLOAT&&this.renderer.texture.unbind(s)}}},t.prototype.initTexture=function(r){var e=new tn(this.gl.createTexture());return e.dirtyId=-1,r._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(r),r.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(r,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[r.type])===null||i===void 0?void 0:i[r.format])!==null&&n!==void 0?n:r.format,this.webGLVersion===2&&r.type===G.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=r.type},t.prototype.updateTexture=function(r){var e=r._glTextures[this.CONTEXT_UID];if(!!e){var i=this.renderer;if(this.initTextureType(r,e),r.resource&&r.resource.upload(i,r,e))e.samplerType!==gi.FLOAT&&(this.hasIntegerTextures=!0);else{var n=r.realWidth,a=r.realHeight,o=i.gl;(e.width!==n||e.height!==a||e.dirtyId<0)&&(e.width=n,e.height=a,o.texImage2D(r.target,0,e.internalFormat,n,a,0,r.format,e.type,null))}r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(r),e.dirtyId=r.dirtyId}},t.prototype.destroyTexture=function(r,e){var i=this.gl;if(r=r.castToBaseTexture(),r._glTextures[this.CONTEXT_UID]&&(this.unbind(r),i.deleteTexture(r._glTextures[this.CONTEXT_UID].texture),r.off("dispose",this.destroyTexture,this),delete r._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(r);n!==-1&&Je(this.managedTextures,n,1)}},t.prototype.updateTextureStyle=function(r){var e=r._glTextures[this.CONTEXT_UID];!e||((r.mipmap===ae.POW2||this.webGLVersion!==2)&&!r.isPowerOfTwo?e.mipmap=!1:e.mipmap=r.mipmap>=1,this.webGLVersion!==2&&!r.isPowerOfTwo?e.wrapMode=ie.CLAMP:e.wrapMode=r.wrapMode,r.resource&&r.resource.style(this.renderer,r,e)||this.setStyle(r,e),e.dirtyStyleId=r.dirtyStyleId)},t.prototype.setStyle=function(r,e){var i=this.gl;if(e.mipmap&&r.mipmap!==ae.ON_MANUAL&&i.generateMipmap(r.target),i.texParameteri(r.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(r.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(r.target,i.TEXTURE_MIN_FILTER,r.scaleMode===re.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&r.anisotropicLevel>0&&r.scaleMode===re.LINEAR){var a=Math.min(r.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(r.target,n.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else i.texParameteri(r.target,i.TEXTURE_MIN_FILTER,r.scaleMode===re.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(r.target,i.TEXTURE_MAG_FILTER,r.scaleMode===re.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),en=new Et,Fm=function(t){lt(r,t);function r(e,i){e===void 0&&(e=Cr.UNKNOWN);var n=t.call(this)||this;return i=Object.assign({},U.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new J(0,0,i.width,i.height),n.view=i.view||U.ADAPTER.createCanvas(),n.resolution=i.resolution||U.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(jt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return r.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,a=this.view.height/this.resolution;this.screen.width=n,this.screen.height=a,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=a+"px"),this.emit("resize",n,a)},r.prototype.generateTexture=function(e,i,n,a){i===void 0&&(i={}),typeof i=="number"&&(jt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:a});var o=i.region,s=mv(i,["region"]);a=o||e.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var l=Ue.create(Xn({width:a.width,height:a.height},s));return en.tx=-a.x,en.ty=-a.y,this.render(e,{renderTexture:l,clear:!1,transform:en,skipUpdateTransform:!!e.parent}),l},r.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Cr.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=Ku(e),wt(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),r}(Lr),Lm=function(){function t(r){this.buffer=r||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),Gm=function(){function t(r){this.renderer=r,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(r){var e=this,i=e.gl,n=e.CONTEXT_UID,a=r._glBuffers[n]||this.createGLBuffer(r);i.bindBuffer(r.type,a.buffer)},t.prototype.bindBufferBase=function(r,e){var i=this,n=i.gl,a=i.CONTEXT_UID;if(this.boundBufferBases[e]!==r){var o=r._glBuffers[a]||this.createGLBuffer(r);this.boundBufferBases[e]=r,n.bindBufferBase(n.UNIFORM_BUFFER,e,o.buffer)}},t.prototype.bindBufferRange=function(r,e,i){var n=this,a=n.gl,o=n.CONTEXT_UID;i=i||0;var s=r._glBuffers[o]||this.createGLBuffer(r);a.bindBufferRange(a.UNIFORM_BUFFER,e||0,s.buffer,i*256,256)},t.prototype.update=function(r){var e=this,i=e.gl,n=e.CONTEXT_UID,a=r._glBuffers[n];if(r._updateID!==a.updateID)if(a.updateID=r._updateID,i.bindBuffer(r.type,a.buffer),a.byteLength>=r.data.byteLength)i.bufferSubData(r.type,0,r.data);else{var o=r.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;a.byteLength=r.data.byteLength,i.bufferData(r.type,r.data,o)}},t.prototype.dispose=function(r,e){if(!!this.managedBuffers[r.id]){delete this.managedBuffers[r.id];var i=r._glBuffers[this.CONTEXT_UID],n=this.gl;r.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete r._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(r){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],r)},t.prototype.createGLBuffer=function(r){var e=this,i=e.CONTEXT_UID,n=e.gl;return r._glBuffers[i]=new Lm(n.createBuffer()),this.managedBuffers[r.id]=r,r.disposeRunner.add(this),r._glBuffers[i]},t}(),_h=function(t){lt(r,t);function r(e){var i=t.call(this,Cr.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new At("destroy"),contextChange:new At("contextChange"),reset:new At("reset"),update:new At("update"),postrender:new At("postrender"),prerender:new At("prerender"),resize:new At("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Ae({projectionMatrix:new Et},!0),i.addSystem(sm,"mask").addSystem(Gv,"context").addSystem(Pm,"state").addSystem(Tm,"shader").addSystem(Sm,"texture").addSystem(Gm,"buffer").addSystem(Dv,"geometry").addSystem(kv,"framebuffer").addSystem(lm,"scissor").addSystem(um,"stencil").addSystem(hm,"projection").addSystem(Um,"textureGC").addSystem(Fv,"filter").addSystem(fm,"renderTexture").addSystem(Lv,"batch"),i.initPlugins(r.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,dc(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return r.create=function(e){if(pc())return new r(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=bt.HIGH?this.multisample=bt.HIGH:i>=bt.MEDIUM?this.multisample=bt.MEDIUM:i>=bt.LOW?this.multisample=bt.LOW:this.multisample=bt.NONE},r.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var a in this.runners)this.runners[a].add(n);return this},r.prototype.render=function(e,i){var n,a,o,s;if(i&&(i instanceof Ue?(jt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,a=arguments[2],o=arguments[3],s=arguments[4]):(n=i.renderTexture,a=i.clear,o=i.transform,s=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(n||(this._lastObjectRendered=e),!s){var l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.generateTexture=function(e,i,n,a){i===void 0&&(i={});var o=t.prototype.generateTexture.call(this,e,i,n,a);return this.framebuffer.blit(),o},r.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(r.prototype,"extract",{get:function(){return jt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),r.registerPlugin=function(e,i){jt("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),se.add({name:e,type:at.RendererPlugin,ref:i})},r.__plugins={},r}(Fm);se.handleByMap(at.RendererPlugin,_h.__plugins);function Bm(t){return _h.create(t)}var Mm=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,km=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Dm=Mm,gh=km,jn=function(){function t(){this.texArray=null,this.blend=0,this.type=Gt.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),Vn=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var r=0;r<this.count;r++)this.elements[r]=null;this.count=0},t}(),zn=function(){function t(r){typeof r=="number"?this.rawBinaryData=new ArrayBuffer(r):r instanceof Uint8Array?this.rawBinaryData=r.buffer:this.rawBinaryData=r,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(r){return this[r+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(r){switch(r){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(r+" isn't a valid view type")}},t}(),Hm=function(t){lt(r,t);function r(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Se.for2d(),i.size=U.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return r.prototype.contextChange=function(){var e=this.renderer.gl;U.PREFER_ENV===ne.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),U.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Kv(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var e=r._drawCallPool,i=r._textureArrayPool,n=this.size/4,a=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new jn);for(;i.length<a;)i.push(new Vn);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(e){!e._texture.valid||(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},r.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,a=r._textureArrayPool,o=this.renderer.batch,s=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++K._globalBatch,h=0,f=a[0],c=0;o.copyBoundTextures(s,n);for(var d=0;d<this._bufferSize;++d){var p=i[d];i[d]=null,p._batchEnabled!==u&&(f.count>=n&&(o.boundArray(f,s,u,n),this.buildDrawCalls(f,c,d),c=d,f=a[++h],++u),p._batchEnabled=u,p.touched=l,f.elements[f.count++]=p)}f.count>0&&(o.boundArray(f,s,u,n),this.buildDrawCalls(f,c,this._bufferSize),++h,++u);for(var d=0;d<s.length;d++)s[d]=null;K._globalBatch=u},r.prototype.buildDrawCalls=function(e,i,n){var a=this,o=a._bufferedElements,s=a._attributeBuffer,l=a._indexBuffer,u=a.vertexSize,h=r._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,p=h[f];p.start=this._iIndex,p.texArray=e;for(var v=i;v<n;++v){var m=o[v],_=m._texture.baseTexture,g=Ju[_.alphaMode?1:0][m.blendMode];o[v]=null,i<v&&p.blend!==g&&(p.size=d-p.start,i=v,p=h[++f],p.texArray=e,p.start=d),this.packInterleavedGeometry(m,s,l,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,p.blend=g}i<n&&(p.size=d-p.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},r.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},r.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,a=e._indexBuffer;U.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,a=i.state,o=r._drawCallPool,s=null,l=0;l<e;l++){var u=o[l],h=u.texArray,f=u.type,c=u.size,d=u.start,p=u.blend;s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=p,a.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},r.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),U.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(e){var i=yi(Math.ceil(e/8)),n=Fo(i),a=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._aBuffers[a];return o||(this._aBuffers[a]=o=new zn(a*this.vertexSize*4)),o},r.prototype.getIndexBuffer=function(e){var i=yi(Math.ceil(e/12)),n=Fo(i),a=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(a)),o},r.prototype.packInterleavedGeometry=function(e,i,n,a,o){for(var s=i.uint32View,l=i.float32View,u=a/this.vertexSize,h=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),v=p<1&&e._texture.baseTexture.alphaMode?Ra(e._tintRGB,p):e._tintRGB+(p*255<<24),m=0;m<c.length;m+=2)l[a++]=c[m],l[a++]=c[m+1],l[a++]=h[m],l[a++]=h[m+1],s[a++]=v,l[a++]=d;for(var m=0;m<f.length;m++)n[o++]=u+f[m]},r._drawCallPool=[],r._textureArrayPool=[],r}(Si),Xm=function(){function t(r,e){if(this.vertexSrc=r,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(r){if(!this.programCache[r]){for(var e=new Int32Array(r),i=0;i<r;i++)e[i]=i;this.defaultGroupCache[r]=Ae.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+r),n=n.replace(/%forloop%/gi,this.generateSampleSrc(r)),this.programCache[r]=new Mr(this.vertexSrc,n)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Et,default:this.defaultGroupCache[r]};return new de(this.programCache[r],a)},t.prototype.generateSampleSrc=function(r){var e="";e+=`
`,e+=`
`;for(var i=0;i<r;i++)i>0&&(e+=`
else `),i<r-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},t}(),yh=function(t){lt(r,t);function r(e){e===void 0&&(e=!1);var i=t.call(this)||this;return i._buffer=new Tt(null,e,!1),i._indexBuffer=new Tt(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,G.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,G.FLOAT).addAttribute("aColor",i._buffer,4,!0,G.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,G.FLOAT).addIndex(i._indexBuffer),i}return r}(Br),vs=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,ms=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,$m=function(){function t(){}return t.create=function(r){var e=Object.assign({vertex:vs,fragment:ms,geometryClass:yh,vertexSize:6},r),i=e.vertex,n=e.fragment,a=e.vertexSize,o=e.geometryClass;return function(s){lt(l,s);function l(u){var h=s.call(this,u)||this;return h.shaderGenerator=new Xm(i,n),h.geometryClass=o,h.vertexSize=a,h}return l}(Hm)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return vs},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return ms},enumerable:!1,configurable:!0}),t}(),bh=$m.create();Object.assign(bh,{extension:{name:"batch",type:at.RendererPlugin}});/*!
 * @pixi/accessibility - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var jm={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};gt.mixin(jm);var Vm=9,ti=100,zm=0,Wm=0,_s=2,gs=1,Ym=-1e3,qm=-1e3,Zm=2,Km=function(){function t(r){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ht.tablet||Ht.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=ti+"px",e.style.height=ti+"px",e.style.position="absolute",e.style.top=zm+"px",e.style.left=Wm+"px",e.style.zIndex=_s.toString(),this.div=e,this.renderer=r,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var r=this,e=document.createElement("button");e.style.width=gs+"px",e.style.height=gs+"px",e.style.position="absolute",e.style.top=Ym+"px",e.style.left=qm+"px",e.style.zIndex=Zm.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){r._isMobileAccessibility=!0,r.activate(),r.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var r;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(r=this.renderer.view.parentNode)===null||r===void 0||r.appendChild(this.div))},t.prototype.deactivate=function(){var r;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(r=this.div.parentNode)===null||r===void 0||r.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(r){if(!(!r.visible||!r.accessibleChildren)){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);var e=r.children;if(e)for(var i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var r=performance.now();if(!(Ht.android.device&&r<this.androidUpdateCount)&&(this.androidUpdateCount=r+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,n=e.top,a=e.width,o=e.height,s=this.renderer,l=s.width,u=s.height,h=s.resolution,f=a/l*h,c=o/u*h,d=this.div;d.style.left=i+"px",d.style.top=n+"px",d.style.width=l+"px",d.style.height=u+"px";for(var p=0;p<this.children.length;p++){var v=this.children[p];if(v.renderId!==this.renderId)v._accessibleActive=!1,Je(this.children,p,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,p--;else{d=v._accessibleDiv;var m=v.hitArea,_=v.worldTransform;v.hitArea?(d.style.left=(_.tx+m.x*_.a)*f+"px",d.style.top=(_.ty+m.y*_.d)*c+"px",d.style.width=m.width*_.a*f+"px",d.style.height=m.height*_.d*c+"px"):(m=v.getBounds(),this.capHitArea(m),d.style.left=m.x*f+"px",d.style.top=m.y*c+"px",d.style.width=m.width*f+"px",d.style.height=m.height*c+"px",d.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(d.title=v.accessibleTitle),d.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&d.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==d.title||v.tabIndex!==d.tabIndex)&&(d.title=v.accessibleTitle,d.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(r){r.innerHTML="type: "+r.type+"</br> title : "+r.title+"</br> tabIndex: "+r.tabIndex},t.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0);var e=this.renderer,i=e.width,n=e.height;r.x+r.width>i&&(r.width=i-r.x),r.y+r.height>n&&(r.height=n-r.y)},t.prototype.addChild=function(r){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=ti+"px",e.style.height=ti+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=_s.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=r.accessiblePointerEvents,e.type=r.accessibleType,r.accessibleTitle&&r.accessibleTitle!==null?e.title=r.accessibleTitle:(!r.accessibleHint||r.accessibleHint===null)&&(e.title="displayObject "+r.tabIndex),r.accessibleHint&&r.accessibleHint!==null&&e.setAttribute("aria-label",r.accessibleHint),this.debug&&this.updateDebugHTML(e),r._accessibleActive=!0,r._accessibleDiv=e,e.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},t.prototype._onClick=function(r){var e=this.renderer.plugins.interaction,i=r.target.displayObject,n=e.eventData;e.dispatchEvent(i,"click",n),e.dispatchEvent(i,"pointertap",n),e.dispatchEvent(i,"tap",n)},t.prototype._onFocus=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=r.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseover",n)},t.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live")||r.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=r.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseout",n)},t.prototype._onKeyDown=function(r){r.keyCode===Vm&&this.activate()},t.prototype._onMouseMove=function(r){r.movementX===0&&r.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[at.RendererPlugin,at.CanvasRendererPlugin]},t}();/*!
 * @pixi/interaction - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ys=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ft,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(r,e,i){return r.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(r){"isPrimary"in r&&r.isPrimary&&(this.isPrimary=!0),this.button="button"in r&&r.button;var e="buttons"in r&&r.buttons;this.buttons=Number.isInteger(e)?e:"which"in r&&r.which,this.width="width"in r&&r.width,this.height="height"in r&&r.height,this.tiltX="tiltX"in r&&r.tiltX,this.tiltY="tiltY"in r&&r.tiltY,this.pointerType="pointerType"in r&&r.pointerType,this.pressure="pressure"in r&&r.pressure,this.rotationAngle="rotationAngle"in r&&r.rotationAngle,this.twist="twist"in r&&r.twist||0,this.tangentialPressure="tangentialPressure"in r&&r.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wn=function(t,r){return Wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Wn(t,r)};function Jm(t,r){Wn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Qm=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),rn=function(){function t(r){this._pointerId=r,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(r,e){e?this._flags=this._flags|r:this._flags=this._flags&~r},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(r){this._flags=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(r){this._doSet(t.FLAGS.OVER,r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(r){this._doSet(t.FLAGS.RIGHT_DOWN,r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(r){this._doSet(t.FLAGS.LEFT_DOWN,r)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),t}(),t0=function(){function t(){this._tempPoint=new ft}return t.prototype.recursiveFindHit=function(r,e,i,n,a){var o;if(!e||!e.visible)return!1;var s=r.data.global;a=e.interactive||a;var l=!1,u=a,h=!0;if(e.hitArea)n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?l=!0:(n=!1,h=!1)),u=!1;else if(e._mask&&n){var f=e._mask.isMaskData?e._mask.maskObject:e._mask;f&&!(!((o=f.containsPoint)===null||o===void 0)&&o.call(f,s))&&(n=!1)}if(h&&e.interactiveChildren&&e.children)for(var c=e.children,d=c.length-1;d>=0;d--){var p=c[d],v=this.recursiveFindHit(r,p,i,n,u);if(v){if(!p.parent)continue;u=!1,v&&(r.target&&(n=!1),l=!0)}}return a&&(n&&!r.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(l=!0),e.interactive&&(l&&!r.target&&(r.target=e),i&&i(r,e,!!l))),l},t.prototype.findHit=function(r,e,i,n){this.recursiveFindHit(r,e,i,n,!1)},t}(),e0={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};gt.mixin(e0);var ei=1,ri={target:null,data:{global:null}},r0=function(t){Jm(r,t);function r(e,i){var n=t.call(this)||this;return i=i||{},n.renderer=e,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new ys,n.mouse.identifier=ei,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[ei]=n.mouse,n.interactionDataPool=[],n.eventData=new Qm,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new t0,n._tempDisplayObject=new nh,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(e,i){return ri.target=null,ri.data.global=e,i||(i=this.lastObjectRendered),this.processInteractive(ri,i,null,!0),ri.target},r.prototype.setTargetElement=function(e,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=i,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ct.system.add(this.tickerUpdate,this,oe.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){!this.tickerAdded||(Ct.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},r.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(e){e=e||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var n=this.cursorStyles[e];if(n)switch(typeof n){case"string":i&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(e);break;case"object":i&&Object.assign(this.interactionDOMElement.style,n);break}else i&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},r.prototype.dispatchEvent=function(e,i,n){(!n.stopPropagationHint||e===n.stopsPropagatingAt)&&(n.currentTarget=e,n.type=i,e.emit(i,n),e[i]&&e[i](n))},r.prototype.delayDispatchEvent=function(e,i,n){this.delayedEvents.push({displayObject:e,eventString:i,eventData:n})},r.prototype.mapPositionToPoint=function(e,i,n){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;e.x=(i-a.left)*(this.interactionDOMElement.width/a.width)*o,e.y=(n-a.top)*(this.interactionDOMElement.height/a.height)*o},r.prototype.processInteractive=function(e,i,n,a){var o=this.search.findHit(e,i,n,a),s=this.delayedEvents;if(!s.length)return o;e.stopPropagationHint=!1;var l=s.length;this.delayedEvents=[];for(var u=0;u<l;u++){var h=s[u],f=h.displayObject,c=h.eventString,d=h.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,c,d)}return o},r.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);if(this.autoPreventDefault&&i[0].isNormalized){var n=e.cancelable||!("cancelable"in e);n&&e.preventDefault()}for(var a=i.length,o=0;o<a;o++){var s=i[o],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),s.pointerType==="touch")this.emit("touchstart",u);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var h=s.button===2;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},r.prototype.processPointerDown=function(e,i,n){var a=e.data,o=e.data.identifier;if(n){if(i.trackedPointers[o]||(i.trackedPointers[o]=new rn(o)),this.dispatchEvent(i,"pointerdown",e),a.pointerType==="touch")this.dispatchEvent(i,"touchstart",e);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;s?i.trackedPointers[o].rightDown=!0:i.trackedPointers[o].leftDown=!0,this.dispatchEvent(i,s?"rightdown":"mousedown",e)}}},r.prototype.onPointerComplete=function(e,i,n){var a=this.normalizeToPointerData(e),o=a.length,s=e.target;e.composedPath&&e.composedPath().length>0&&(s=e.composedPath()[0]);for(var l=s!==this.interactionDOMElement?"outside":"",u=0;u<o;u++){var h=a[u],f=this.getInteractionDataForPointerId(h),c=this.configureInteractionEventForDOMEvent(this.eventData,h,f);if(c.data.originalEvent=e,this.processInteractive(c,this.lastObjectRendered,n,i||!l),this.emit(i?"pointercancel":"pointerup"+l,c),h.pointerType==="mouse"||h.pointerType==="pen"){var d=h.button===2;this.emit(d?"rightup"+l:"mouseup"+l,c)}else h.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+l,c),this.releaseInteractionDataForPointerId(h.pointerId))}},r.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(e,i){var n=e.data,a=e.data.identifier;i.trackedPointers[a]!==void 0&&(delete i.trackedPointers[a],this.dispatchEvent(i,"pointercancel",e),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",e))},r.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},r.prototype.processPointerUp=function(e,i,n){var a=e.data,o=e.data.identifier,s=i.trackedPointers[o],l=a.pointerType==="touch",u=a.pointerType==="mouse"||a.pointerType==="pen",h=!1;if(u){var f=a.button===2,c=rn.FLAGS,d=f?c.RIGHT_DOWN:c.LEFT_DOWN,p=s!==void 0&&s.flags&d;n?(this.dispatchEvent(i,f?"rightup":"mouseup",e),p&&(this.dispatchEvent(i,f?"rightclick":"click",e),h=!0)):p&&this.dispatchEvent(i,f?"rightupoutside":"mouseupoutside",e),s&&(f?s.rightDown=!1:s.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",e),l&&this.dispatchEvent(i,"touchend",e),s&&((!u||h)&&this.dispatchEvent(i,"pointertap",e),l&&(this.dispatchEvent(i,"tap",e),s.over=!1))):s&&(this.dispatchEvent(i,"pointerupoutside",e),l&&this.dispatchEvent(i,"touchendoutside",e)),s&&s.none&&delete i.trackedPointers[o]},r.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,a=0;a<n;a++){var o=i[a],s=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,s);l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),o.pointerType==="touch"&&this.emit("touchmove",l),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",l)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(e,i,n){var a=e.data,o=a.pointerType==="touch",s=a.pointerType==="mouse"||a.pointerType==="pen";s&&this.processPointerOverOut(e,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",e),o&&this.dispatchEvent(i,"touchmove",e),s&&this.dispatchEvent(i,"mousemove",e))},r.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,a);o.data.originalEvent=n,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(a.identifier)}},r.prototype.processPointerOverOut=function(e,i,n){var a=e.data,o=e.data.identifier,s=a.pointerType==="mouse"||a.pointerType==="pen",l=i.trackedPointers[o];n&&!l&&(l=i.trackedPointers[o]=new rn(o)),l!==void 0&&(n&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(i,"pointerover",e),s&&this.delayDispatchEvent(i,"mouseover",e)),s&&this.cursor===null&&(this.cursor=i.cursor)):l.over&&(l.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),s&&this.dispatchEvent(i,"mouseout",e),l.none&&delete i.trackedPointers[o]))},r.prototype.onPointerOver=function(e){var i=this.normalizeToPointerData(e),n=i[0],a=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,a);o.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",o)},r.prototype.getInteractionDataForPointerId=function(e){var i=e.pointerId,n;return i===ei||e.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new ys,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(e),n},r.prototype.releaseInteractionDataForPointerId=function(e){var i=this.activeInteractionData[e];i&&(delete this.activeInteractionData[e],i.reset(),this.interactionDataPool.push(i))},r.prototype.configureInteractionEventForDOMEvent=function(e,i,n){return e.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,e.reset(),e},r.prototype.normalizeToPointerData=function(e){var i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,a=e.changedTouches.length;n<a;n++){var o=e.changedTouches[n];typeof o.button=="undefined"&&(o.button=e.touches.length?1:0),typeof o.buttons=="undefined"&&(o.buttons=e.touches.length?1:0),typeof o.isPrimary=="undefined"&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof o.width=="undefined"&&(o.width=o.radiusX||1),typeof o.height=="undefined"&&(o.height=o.radiusY||1),typeof o.tiltX=="undefined"&&(o.tiltX=0),typeof o.tiltY=="undefined"&&(o.tiltY=0),typeof o.pointerType=="undefined"&&(o.pointerType="touch"),typeof o.pointerId=="undefined"&&(o.pointerId=o.identifier||0),typeof o.pressure=="undefined"&&(o.pressure=o.force||.5),typeof o.twist=="undefined"&&(o.twist=0),typeof o.tangentialPressure=="undefined"&&(o.tangentialPressure=0),typeof o.layerX=="undefined"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY=="undefined"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,i.push(o)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){var s=e;typeof s.isPrimary=="undefined"&&(s.isPrimary=!0),typeof s.width=="undefined"&&(s.width=1),typeof s.height=="undefined"&&(s.height=1),typeof s.tiltX=="undefined"&&(s.tiltX=0),typeof s.tiltY=="undefined"&&(s.tiltY=0),typeof s.pointerType=="undefined"&&(s.pointerType="mouse"),typeof s.pointerId=="undefined"&&(s.pointerId=ei),typeof s.pressure=="undefined"&&(s.pressure=.5),typeof s.twist=="undefined"&&(s.twist=0),typeof s.tangentialPressure=="undefined"&&(s.tangentialPressure=0),s.isNormalized=!0,i.push(s)}else i.push(e);return i},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r.extension={name:"interaction",type:[at.RendererPlugin,at.CanvasRendererPlugin]},r}(Lr);/*!
 * @pixi/extract - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var bs=new J,xs=4,i0=function(){function t(r){this.renderer=r}return t.prototype.image=function(r,e,i){var n=new Image;return n.src=this.base64(r,e,i),n},t.prototype.base64=function(r,e,i){return this.canvas(r).toDataURL(e,i)},t.prototype.canvas=function(r,e){var i=this.renderer,n,a=!1,o,s=!1;r&&(r instanceof Ue?o=r:(o=this.renderer.generateTexture(r),s=!0)),o?(n=o.baseTexture.resolution,e=e!=null?e:o.frame,a=!1,i.renderTexture.bind(o)):(n=i.resolution,e||(e=bs,e.width=i.width,e.height=i.height),a=!0,i.renderTexture.bind(null));var l=Math.round(e.width*n),u=Math.round(e.height*n),h=new Bo(l,u,1),f=new Uint8Array(xs*l*u),c=i.gl;c.readPixels(Math.round(e.x*n),Math.round(e.y*n),l,u,c.RGBA,c.UNSIGNED_BYTE,f);var d=h.context.getImageData(0,0,l,u);if(t.arrayPostDivide(f,d.data),h.context.putImageData(d,0,0),a){var p=new Bo(h.width,h.height,1);p.context.scale(1,-1),p.context.drawImage(h.canvas,0,-u),h.destroy(),h=p}return s&&o.destroy(!0),h.canvas},t.prototype.pixels=function(r,e){var i=this.renderer,n,a,o=!1;r&&(r instanceof Ue?a=r:(a=this.renderer.generateTexture(r),o=!0)),a?(n=a.baseTexture.resolution,e=e!=null?e:a.frame,i.renderTexture.bind(a)):(n=i.resolution,e||(e=bs,e.width=i.width,e.height=i.height),i.renderTexture.bind(null));var s=Math.round(e.width*n),l=Math.round(e.height*n),u=new Uint8Array(xs*s*l),h=i.gl;return h.readPixels(Math.round(e.x*n),Math.round(e.y*n),s,l,h.RGBA,h.UNSIGNED_BYTE,u),o&&a.destroy(!0),t.arrayPostDivide(u,u),u},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(r,e){for(var i=0;i<r.length;i+=4){var n=e[i+3]=r[i+3];n!==0?(e[i]=Math.round(Math.min(r[i]*255/n,255)),e[i+1]=Math.round(Math.min(r[i+1]*255/n,255)),e[i+2]=Math.round(Math.min(r[i+2]*255/n,255))):(e[i]=r[i],e[i+1]=r[i+1],e[i+2]=r[i+2])}},t.extension={name:"extract",type:at.RendererPlugin},t}();/*!
 * @pixi/loaders - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ii=function(){function t(r,e,i){e===void 0&&(e=!1),this._fn=r,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function Ts(t,r){return t._head?(t._tail._next=r,r._prev=t._tail,t._tail=r):(t._head=r,t._tail=r),r._owner=t,r}var ee=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(r){r===void 0&&(r=!1);var e=this._head;if(r)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},t.prototype.has=function(r){if(!(r instanceof ii))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return r._owner===this},t.prototype.dispatch=function(){for(var r=arguments,e=[],i=0;i<arguments.length;i++)e[i]=r[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,e),n=n._next;return!0},t.prototype.add=function(r,e){if(e===void 0&&(e=null),typeof r!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Ts(this,new ii(r,!1,e))},t.prototype.once=function(r,e){if(e===void 0&&(e=null),typeof r!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Ts(this,new ii(r,!0,e))},t.prototype.detach=function(r){if(!(r instanceof ii))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return r._owner!==this?this:(r._prev&&(r._prev._next=r._next),r._next&&(r._next._prev=r._prev),r===this._head?(this._head=r._next,r._next===null&&(this._tail=null)):r===this._tail&&(this._tail=r._prev,this._tail._next=null),r._owner=null,this)},t.prototype.detachAll=function(){var r=this._head;if(!r)return this;for(this._head=this._tail=null;r;)r._owner=null,r=r._next;return this},t}();function xh(t,r){r=r||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=e.parser[r.strictMode?"strict":"loose"].exec(t),n={},a=14;a--;)n[e.key[a]]=i[a]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(o,s,l){s&&(n[e.q.name][s]=l)}),n}var nn,ni=null,n0=0,Es=200,a0=204,o0=1223,s0=2;function Is(){}function Cs(t,r,e){r&&r.indexOf(".")===0&&(r=r.substring(1)),r&&(t[r]=e)}function an(t){return t.toString().replace("object ","")}var mt=function(){function t(r,e,i){if(this._dequeue=Is,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof r!="string"||typeof e!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,e.indexOf("data:")===0),this.name=r,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Is,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new ee,this.onProgress=new ee,this.onComplete=new ee,this.onAfterMiddleware=new ee}return t.setExtensionLoadType=function(r,e){Cs(t._loadTypeMap,r,e)},t.setExtensionXhrType=function(r,e){Cs(t._xhrTypeMap,r,e)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(r){if(!this.error){if(this.error=new Error(r),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(r){var e=this;if(!this.isLoading){if(this.isComplete){r&&setTimeout(function(){return r(e)},1);return}else r&&this.onComplete.once(r);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:typeof nn=="undefined"&&(nn=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),nn&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(r){return(this._flags&r)!==0},t.prototype._setFlag=function(r,e){this._flags=e?this._flags|r:this._flags&~r},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(r){this.metadata.loadElement?this.data=this.metadata.loadElement:r==="image"&&typeof globalThis.Image!="undefined"?this.data=new Image:this.data=document.createElement(r),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(r){if(this.metadata.loadElement?this.data=this.metadata.loadElement:r==="audio"&&typeof globalThis.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(r),this.data===null){this.abort("Unsupported element: "+r);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(r,this.url[i],Array.isArray(e)?e[i]:e));else{var e=this.metadata.mimeType;this.data.appendChild(this._createSource(r,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(r.withCredentials=!0),r.open("GET",this.url,!0),r.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?r.responseType=t.XHR_RESPONSE_TYPE.TEXT:r.responseType=this.xhrType,r.addEventListener("error",this._boundXhrOnError,!1),r.addEventListener("timeout",this._boundXhrOnTimeout,!1),r.addEventListener("abort",this._boundXhrOnAbort,!1),r.addEventListener("progress",this._boundOnProgress,!1),r.addEventListener("load",this._boundXhrOnLoad,!1),r.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new globalThis.XDomainRequest;r.timeout=this.timeout||5e3,r.onerror=this._boundXhrOnError,r.ontimeout=this._boundXhrOnTimeout,r.onprogress=this._boundOnProgress,r.onload=this._boundXhrOnLoad,r.open("GET",this.url,!0),setTimeout(function(){return r.send()},1)},t.prototype._createSource=function(r,e,i){i||(i=r+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(r){this.abort("Failed to load element using: "+r.target.nodeName)},t.prototype._onProgress=function(r){r&&r.lengthComputable&&this.onProgress.dispatch(this,r.loaded/r.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var r=this.xhr;this.abort(an(r)+" Request failed. Status: "+r.status+', text: "'+r.statusText+'"')},t.prototype._xhrOnTimeout=function(){var r=this.xhr;this.abort(an(r)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var r=this.xhr;this.abort(an(r)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var r=this.xhr,e="",i=typeof r.status=="undefined"?Es:r.status;(r.responseType===""||r.responseType==="text"||typeof r.responseType=="undefined")&&(e=r.responseText),i===n0&&(e.length>0||r.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=Es:i===o0&&(i=a0);var n=i/100|0;if(n===s0)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=t.TYPE.JSON}catch(s){this.abort("Error trying to parse loaded json: "+s);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var a=new DOMParser;this.data=a.parseFromString(e,"text/xml")}else{var o=document.createElement("div");o.innerHTML=e,this.data=o}this.type=t.TYPE.XML}catch(s){this.abort("Error trying to parse loaded xml: "+s);return}else this.data=r.response||e;else{this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(r,e){if(r.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,ni||(ni=document.createElement("a")),ni.href=r;var i=xh(ni.href,{strictMode:!0}),n=!i.port&&e.port===""||i.port===e.port,a=i.protocol?i.protocol+":":"";return i.host!==e.hostname||!n||a!==e.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(r){r===void 0&&(r=this.url);var e="";if(this.isDataUrl){var i=r.indexOf("/");e=r.substring(i+1,r.indexOf(";",i))}else{var n=r.indexOf("?"),a=r.indexOf("#"),o=Math.min(n>-1?n:r.length,a>-1?a:r.length);r=r.substring(0,o),e=r.substring(r.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(r){switch(r){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(r){r[r.NONE=0]="NONE",r[r.DATA_URL=1]="DATA_URL",r[r.COMPLETE=2]="COMPLETE",r[r.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.JSON=1]="JSON",r[r.XML=2]="XML",r[r.IMAGE=3]="IMAGE",r[r.AUDIO=4]="AUDIO",r[r.VIDEO=5]="VIDEO",r[r.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(r){r[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(r){r.DEFAULT="text",r.BUFFER="arraybuffer",r.BLOB="blob",r.DOCUMENT="document",r.JSON="json",r.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(mt||(mt={}));function ye(){}function l0(t){return function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(t===null)throw new Error("Callback was already called.");var a=t;t=null,a.apply(this,i)}}var u0=function(){function t(r,e){this.data=r,this.callback=e}return t}(),on=function(){function t(r,e){var i=this;if(e===void 0&&(e=1),this.workers=0,this.saturated=ye,this.unsaturated=ye,this.empty=ye,this.drain=ye,this.error=ye,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,a,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var s=new u0(n,typeof o=="function"?o:ye);a?i._tasks.unshift(s):i._tasks.push(s),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var n=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(n.data,l0(i._next(n)))}},this._worker=r,e===0)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(r){var e=this;return function(){for(var i=arguments,n=[],a=0;a<arguments.length;a++)n[a]=i[a];e.workers-=1,r.callback.apply(r,n),n[0]!=null&&e.error(n[0],r.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(r,e){this._insert(r,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=ye,this.started=!1,this._tasks=[]},t.prototype.unshift=function(r,e){this._insert(r,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var r=1;r<=this.concurrency;r++)this.process()}},t.eachSeries=function(r,e,i,n){var a=0,o=r.length;function s(l){if(l||a===o){i&&i(l);return}n?setTimeout(function(){e(r[a++],s)},1):e(r[a++],s)}s()},t.queue=function(r,e){return new t(r,e)},t}(),sn=100,h0=/(#[\w-]+)?$/,Ei=function(){function t(r,e){var i=this;r===void 0&&(r=""),e===void 0&&(e=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return i._loadResource(l,u)},this.resources={},this.baseUrl=r,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return i._loadResource(l,u)},this._queue=on.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new ee,this.onError=new ee,this.onLoad=new ee,this.onStart=new ee,this.onComplete=new ee;for(var n=0;n<t._plugins.length;++n){var a=t._plugins[n],o=a.pre,s=a.use;o&&this.pre(o),s&&this.use(s)}this._protected=!1}return t.prototype._add=function(r,e,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');if(e=this._prepareUrl(e),this.resources[r]=new mt(r,e,i),typeof n=="function"&&this.resources[r].onAfterMiddleware.once(n),this.loading){for(var a=i.parentResource,o=[],s=0;s<a.children.length;++s)a.children[s].isComplete||o.push(a.children[s]);var l=a.progressChunk*(o.length+1),u=l/(o.length+2);a.children.push(this.resources[r]),a.progressChunk=u;for(var s=0;s<o.length;++s)o[s].progressChunk=u;this.resources[r].progressChunk=u}return this._queue.push(this.resources[r]),this},t.prototype.pre=function(r){return this._beforeMiddleware.push(r),this},t.prototype.use=function(r){return this._afterMiddleware.push(r),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var r in this.resources){var e=this.resources[r];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(r){if(jt("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof r=="function"&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,i=sn/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(r){this._queue.concurrency=r},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(r){var e=xh(r,{strictMode:!0}),i;if(e.protocol||!e.path||r.indexOf("//")===0?i=r:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&r.charAt(0)!=="/"?i=this.baseUrl+"/"+r:i=this.baseUrl+r,this.defaultQueryString){var n=h0.exec(i)[0];i=i.slice(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(r,e){var i=this;r._dequeue=e,on.eachSeries(this._beforeMiddleware,function(n,a){n.call(i,r,function(){a(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=sn,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(r){var e=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),on.eachSeries(this._afterMiddleware,function(i,n){i.call(e,r,n)},function(){r.onAfterMiddleware.dispatch(r),e.progress=Math.min(sn,e.progress+r.progressChunk),e.onProgress.dispatch(e,r),r.error?e.onError.dispatch(r.error,e,r):e.onLoad.dispatch(e,r),e._resourcesParsing.splice(e._resourcesParsing.indexOf(r),1),e._queue.idle()&&e._resourcesParsing.length===0&&e._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var r=t._shared;return r||(r=new t,r._protected=!0,t._shared=r),r},enumerable:!1,configurable:!0}),t.registerPlugin=function(r){return jt("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),se.add({type:at.Loader,ref:r}),t},t._plugins=[],t}();se.handleByList(at.Loader,Ei._plugins);Ei.prototype.add=function(r,e,i,n){if(Array.isArray(r)){for(var a=0;a<r.length;++a)this.add(r[a]);return this}if(typeof r=="object"&&(i=r,n=e||i.callback||i.onComplete,e=i.url,r=i.name||i.key||i.url),typeof e!="string"&&(n=i,i=e,e=r),typeof e!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(n=i,i=null),this._add(r,e,i,n)};var f0=function(){function t(){}return t.init=function(r){r=Object.assign({sharedLoader:!1},r),this.loader=r.sharedLoader?Ei.shared:new Ei},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=at.Application,t}(),c0=function(){function t(){}return t.add=function(){mt.setExtensionLoadType("svg",mt.LOAD_TYPE.XHR),mt.setExtensionXhrType("svg",mt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(r,e){if(r.data&&(r.type===mt.TYPE.IMAGE||r.extension==="svg")){var i=r.data,n=r.url,a=r.name,o=r.metadata;j.fromLoader(i,n,a,o).then(function(s){r.texture=s,e()}).catch(e)}else e()},t.extension=at.Loader,t}(),d0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function p0(t){for(var r="",e=0;e<t.length;){for(var i=[0,0,0],n=[0,0,0,0],a=0;a<i.length;++a)e<t.length?i[a]=t.charCodeAt(e++)&255:i[a]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var o=e-(t.length-1);switch(o){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var a=0;a<n.length;++a)r+=d0.charAt(n[a])}return r}function v0(t,r){if(!t.data){r();return}if(t.xhr&&t.xhrType===mt.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var e=t.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){t.data=new Image,t.data.src="data:"+e+";base64,"+p0(t.xhr.responseText),t.type=mt.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,r()};return}}else if(t.data.type.indexOf("image")===0){var i=globalThis.URL||globalThis.webkitURL,n=i.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=n,t.type=mt.TYPE.IMAGE,t.data.onload=function(){i.revokeObjectURL(n),t.data.onload=null,r()};return}}r()}var m0=function(){function t(){}return t.extension=at.Loader,t.use=v0,t}();se.add(c0,m0);/*!
 * @pixi/compressed-textures - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var nt,z;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(z||(z={}));var Ii=(nt={},nt[z.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,nt[z.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,nt[z.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,nt[z.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,nt[z.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,nt[z.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,nt[z.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,nt[z.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,nt[z.COMPRESSED_R11_EAC]=.5,nt[z.COMPRESSED_SIGNED_R11_EAC]=.5,nt[z.COMPRESSED_RG11_EAC]=1,nt[z.COMPRESSED_SIGNED_RG11_EAC]=1,nt[z.COMPRESSED_RGB8_ETC2]=.5,nt[z.COMPRESSED_RGBA8_ETC2_EAC]=1,nt[z.COMPRESSED_SRGB8_ETC2]=.5,nt[z.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,nt[z.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,nt[z.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,nt[z.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,nt[z.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,nt[z.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,nt[z.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,nt[z.COMPRESSED_RGB_ETC1_WEBGL]=.5,nt[z.COMPRESSED_RGB_ATC_WEBGL]=.5,nt[z.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,nt[z.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,nt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yn=function(t,r){return Yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Yn(t,r)};function Th(t,r){Yn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function _0(t,r,e,i){function n(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(h){try{u(i.next(h))}catch(f){o(f)}}function l(h){try{u(i.throw(h))}catch(f){o(f)}}function u(h){h.done?a(h.value):n(h.value).then(s,l)}u((i=i.apply(t,r||[])).next())})}function g0(t,r){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(h){return l([u,h])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,n&&(a=u[0]&2?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){e.label=u[1];break}if(u[0]===6&&e.label<a[1]){e.label=a[1],a=u;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(u);break}a[2]&&e.ops.pop(),e.trys.pop();continue}u=r.call(t,e)}catch(h){u=[6,h],n=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var y0=function(t){Th(r,t);function r(e,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var n=this,a,o;return typeof e=="string"?(a=e,o=new Uint8Array):(a=null,o=e),n=t.call(this,o,i)||this,n.origin=a,n.buffer=o?new zn(o):null,n.origin&&i.autoLoad!==!1&&n.load(),o&&o.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return r.prototype.onBlobLoaded=function(e){},r.prototype.load=function(){return _0(this,void 0,Promise,function(){var e,i,n;return g0(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return e=a.sent(),[4,e.blob()];case 2:return i=a.sent(),[4,i.arrayBuffer()];case 3:return n=a.sent(),this.data=new Uint32Array(n),this.buffer=new zn(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},r}(Gr),qn=function(t){Th(r,t);function r(e,i){var n=t.call(this,e,i)||this;return n.format=i.format,n.levels=i.levels||1,n._width=i.width,n._height=i.height,n._extension=r._formatToExtension(n.format),(i.levelBuffers||n.buffer)&&(n._levelBuffers=i.levelBuffers||r._createLevelBuffers(e instanceof Uint8Array?e:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return r.prototype.upload=function(e,i,n){var a=e.gl,o=e.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,l=this.levels;s<l;s++){var u=this._levelBuffers[s],h=u.levelID,f=u.levelWidth,c=u.levelHeight,d=u.levelBuffer;a.compressedTexImage2D(a.TEXTURE_2D,h,this.format,f,c,0,d)}return!0},r.prototype.onBlobLoaded=function(){this._levelBuffers=r._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},r._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},r._createLevelBuffers=function(e,i,n,a,o,s,l){for(var u=new Array(n),h=e.byteOffset,f=s,c=l,d=f+a-1&~(a-1),p=c+o-1&~(o-1),v=d*p*Ii[i],m=0;m<n;m++)u[m]={levelID:m,levelWidth:n>1?f:d,levelHeight:n>1?c:p,levelBuffer:new Uint8Array(e.buffer,h,v)},h+=v,f=f>>1||1,c=c>>1||1,d=f+a-1&~(a-1),p=c+o-1&~(o-1),v=d*p*Ii[i];return u},r}(y0),b0=function(){function t(){}return t.use=function(r,e){var i=r.data,n=this;if(r.type===mt.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var a=i.textures,o=void 0,s=void 0,l=0,u=a.length;l<u;l++){var h=a[l],f=h.src,c=h.format;if(c||(s=f),t.textureFormats[c]){o=f;break}}if(o=o||s,!o){e(new Error("Cannot load compressed-textures in "+r.url+", make sure you provide a fallback"));return}if(o===r.url){e(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},p=We.resolve(r.url.replace(n.baseUrl,""),o),v=i.cacheID;n.add(v,p,d,function(m){if(m.error){e(m.error);return}var _=m.texture,g=_===void 0?null:_,y=m.textures,T=y===void 0?{}:y;Object.assign(r,{texture:g,textures:T}),e()})}else e()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var r=document.createElement("canvas"),e=r.getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var r=t.textureExtensions;t._textureFormats={};for(var e in r){var i=r[e];!i||Object.assign(t._textureFormats,Object.getPrototypeOf(i))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=at.Loader,t}();function Eh(t,r,e){var i={textures:{},texture:null};if(!r)return i;var n=r.map(function(a){return new j(new K(a,Object.assign({mipmap:ae.OFF,alphaMode:Mt.NO_PREMULTIPLIED_ALPHA},e)))});return n.forEach(function(a,o){var s=a.baseTexture,l=t+"-"+(o+1);K.addToCache(s,l),j.addToCache(a,l),o===0&&(K.addToCache(s,t),j.addToCache(a,t),i.texture=a),i.textures[l]=a}),i}var hr,St,ln=4,ai=124,x0=32,ws=20,T0=542327876,oi={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},E0={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},si={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Lt;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Lt||(Lt={}));var Zn;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Zn||(Zn={}));var I0=1,C0=2,w0=4,R0=64,A0=512,N0=131072,P0=827611204,U0=861165636,O0=894720068,S0=808540228,F0=4,L0=(hr={},hr[P0]=z.COMPRESSED_RGBA_S3TC_DXT1_EXT,hr[U0]=z.COMPRESSED_RGBA_S3TC_DXT3_EXT,hr[O0]=z.COMPRESSED_RGBA_S3TC_DXT5_EXT,hr),G0=(St={},St[Lt.DXGI_FORMAT_BC1_TYPELESS]=z.COMPRESSED_RGBA_S3TC_DXT1_EXT,St[Lt.DXGI_FORMAT_BC1_UNORM]=z.COMPRESSED_RGBA_S3TC_DXT1_EXT,St[Lt.DXGI_FORMAT_BC2_TYPELESS]=z.COMPRESSED_RGBA_S3TC_DXT3_EXT,St[Lt.DXGI_FORMAT_BC2_UNORM]=z.COMPRESSED_RGBA_S3TC_DXT3_EXT,St[Lt.DXGI_FORMAT_BC3_TYPELESS]=z.COMPRESSED_RGBA_S3TC_DXT5_EXT,St[Lt.DXGI_FORMAT_BC3_UNORM]=z.COMPRESSED_RGBA_S3TC_DXT5_EXT,St[Lt.DXGI_FORMAT_BC1_UNORM_SRGB]=z.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,St[Lt.DXGI_FORMAT_BC2_UNORM_SRGB]=z.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,St[Lt.DXGI_FORMAT_BC3_UNORM_SRGB]=z.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,St);function B0(t){var r=new Uint32Array(t),e=r[0];if(e!==T0)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,ai/Uint32Array.BYTES_PER_ELEMENT),n=i[oi.HEIGHT],a=i[oi.WIDTH],o=i[oi.MIPMAP_COUNT],s=new Uint32Array(t,oi.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,x0/Uint32Array.BYTES_PER_ELEMENT),l=s[I0];if(l&w0){var u=s[E0.FOURCC];if(u!==S0){var h=L0[u],f=ln+ai,c=new Uint8Array(t,f),d=new qn(c,{format:h,width:a,height:n,levels:o});return[d]}var p=ln+ai,v=new Uint32Array(r.buffer,p,ws/Uint32Array.BYTES_PER_ELEMENT),m=v[si.DXGI_FORMAT],_=v[si.RESOURCE_DIMENSION],g=v[si.MISC_FLAG],y=v[si.ARRAY_SIZE],T=G0[m];if(T===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+m);if(g===F0)throw new Error("DDSParser does not support cubemap textures");if(_===Zn.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var x=new Array,b=ln+ai+ws;if(y===1)x.push(new Uint8Array(t,b));else{for(var R=Ii[T],N=0,I=a,w=n,F=0;F<o;F++){var M=Math.max(1,I+3&-4),$=Math.max(1,w+3&-4),it=M*$*R;N+=it,I=I>>>1,w=w>>>1}for(var O=b,F=0;F<y;F++)x.push(new Uint8Array(t,O,N)),O+=N}return x.map(function(S){return new qn(S,{format:T,width:a,height:n,levels:o})})}throw l&R0?new Error("DDSParser does not support uncompressed texture data."):l&A0?new Error("DDSParser does not supported YUV uncompressed texture data."):l&N0?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&C0?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var ue,Kt,fr,Rs=[171,75,84,88,32,49,49,187,13,10,26,10],M0=67305985,Ft={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Kn=64,As=(ue={},ue[G.UNSIGNED_BYTE]=1,ue[G.UNSIGNED_SHORT]=2,ue[G.INT]=4,ue[G.UNSIGNED_INT]=4,ue[G.FLOAT]=4,ue[G.HALF_FLOAT]=8,ue),k0=(Kt={},Kt[A.RGBA]=4,Kt[A.RGB]=3,Kt[A.RG]=2,Kt[A.RED]=1,Kt[A.LUMINANCE]=1,Kt[A.LUMINANCE_ALPHA]=2,Kt[A.ALPHA]=1,Kt),D0=(fr={},fr[G.UNSIGNED_SHORT_4_4_4_4]=2,fr[G.UNSIGNED_SHORT_5_5_5_1]=2,fr[G.UNSIGNED_SHORT_5_6_5]=2,fr);function H0(t,r,e){e===void 0&&(e=!1);var i=new DataView(r);if(!X0(t,i))return null;var n=i.getUint32(Ft.ENDIANNESS,!0)===M0,a=i.getUint32(Ft.GL_TYPE,n),o=i.getUint32(Ft.GL_FORMAT,n),s=i.getUint32(Ft.GL_INTERNAL_FORMAT,n),l=i.getUint32(Ft.PIXEL_WIDTH,n),u=i.getUint32(Ft.PIXEL_HEIGHT,n)||1,h=i.getUint32(Ft.PIXEL_DEPTH,n)||1,f=i.getUint32(Ft.NUMBER_OF_ARRAY_ELEMENTS,n)||1,c=i.getUint32(Ft.NUMBER_OF_FACES,n),d=i.getUint32(Ft.NUMBER_OF_MIPMAP_LEVELS,n),p=i.getUint32(Ft.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(c!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var v=4,m=4,_=l+3&-4,g=u+3&-4,y=new Array(f),T=l*u;a===0&&(T=_*g);var x;if(a!==0?As[a]?x=As[a]*k0[o]:x=D0[a]:x=Ii[s],x===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=e?j0(i,p,n):null,R=T*x,N=R,I=l,w=u,F=_,M=g,$=Kn+p,it=0;it<d;it++){for(var O=i.getUint32($,n),S=$+4,V=0;V<f;V++){var vt=y[V];vt||(vt=y[V]=new Array(d)),vt[it]={levelID:it,levelWidth:d>1||a!==0?I:F,levelHeight:d>1||a!==0?w:M,levelBuffer:new Uint8Array(r,S,N)},S+=N}$+=O+4,$=$%4!==0?$+4-$%4:$,I=I>>1||1,w=w>>1||1,F=I+v-1&~(v-1),M=w+m-1&~(m-1),N=F*M*x}return a!==0?{uncompressed:y.map(function(Q){var E=Q[0].levelBuffer,C=!1;return a===G.FLOAT?E=new Float32Array(Q[0].levelBuffer.buffer,Q[0].levelBuffer.byteOffset,Q[0].levelBuffer.byteLength/4):a===G.UNSIGNED_INT?(C=!0,E=new Uint32Array(Q[0].levelBuffer.buffer,Q[0].levelBuffer.byteOffset,Q[0].levelBuffer.byteLength/4)):a===G.INT&&(C=!0,E=new Int32Array(Q[0].levelBuffer.buffer,Q[0].levelBuffer.byteOffset,Q[0].levelBuffer.byteLength/4)),{resource:new Gr(E,{width:Q[0].levelWidth,height:Q[0].levelHeight}),type:a,format:C?$0(o):o}}),kvData:b}:{compressed:y.map(function(Q){return new qn(null,{format:s,width:l,height:u,levels:d,levelBuffers:Q})}),kvData:b}}function X0(t,r){for(var e=0;e<Rs.length;e++)if(r.getUint8(e)!==Rs[e])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}function $0(t){switch(t){case A.RGBA:return A.RGBA_INTEGER;case A.RGB:return A.RGB_INTEGER;case A.RG:return A.RG_INTEGER;case A.RED:return A.RED_INTEGER;default:return t}}function j0(t,r,e){for(var i=new Map,n=0;n<r;){var a=t.getUint32(Kn+n,e),o=Kn+n+4,s=3-(a+3)%4;if(a===0||a>r-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<a&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),h=new DataView(t.buffer,o+l+1,a-l-1);i.set(u,h),n+=4+a+s}return i}mt.setExtensionXhrType("dds",mt.XHR_RESPONSE_TYPE.BUFFER);var V0=function(){function t(){}return t.use=function(r,e){if(r.extension==="dds"&&r.data)try{Object.assign(r,Eh(r.name||r.url,B0(r.data),r.metadata))}catch(i){e(i);return}e()},t.extension=at.Loader,t}();mt.setExtensionXhrType("ktx",mt.XHR_RESPONSE_TYPE.BUFFER);var z0=function(){function t(){}return t.use=function(r,e){if(r.extension==="ktx"&&r.data)try{var i=r.name||r.url,n=H0(i,r.data,this.loadKeyValueData),a=n.compressed,o=n.uncompressed,s=n.kvData;if(a){var l=Eh(i,a,r.metadata);if(s&&l.textures)for(var u in l.textures)l.textures[u].baseTexture.ktxKeyValueData=s;Object.assign(r,l)}else if(o){var h={};o.forEach(function(f,c){var d=new j(new K(f.resource,{mipmap:ae.OFF,alphaMode:Mt.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),p=i+"-"+(c+1);s&&(d.baseTexture.ktxKeyValueData=s),K.addToCache(d.baseTexture,p),j.addToCache(d,p),c===0&&(h[i]=d,K.addToCache(d.baseTexture,i),j.addToCache(d,i)),h[p]=d}),Object.assign(r,{textures:h})}}catch(f){e(f);return}e()},t.extension=at.Loader,t.loadKeyValueData=!1,t}();/*!
 * @pixi/particle-container - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jn=function(t,r){return Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Jn(t,r)};function Ih(t,r){Jn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}(function(t){Ih(r,t);function r(e,i,n,a){e===void 0&&(e=1500),n===void 0&&(n=16384),a===void 0&&(a=!1);var o=t.call(this)||this,s=16384;return n>s&&(n=s),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=B.NORMAL,o.autoResize=a,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return r.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,wt(e,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(e){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},r.prototype.onChildrenChange=function(e){for(var i=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r})(zt);var Ns=function(){function t(r,e,i){this.geometry=new Br,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<r.length;++n){var a=r[n];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||G.FLOAT,offset:a.offset},e[n]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var r=this.geometry,e=0;this.indexBuffer=new Tt(nv(this.size),!0,!0),r.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new Tt(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=o,o+=n.size,this.staticStride+=n.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Tt(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];r.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===G.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];r.addAttribute(n.attributeName,this.staticBuffer,0,n.type===G.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},t.prototype.uploadDynamic=function(r,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var a=this.dynamicProperties[n];a.uploadFunction(r,e,i,a.type===G.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(r,e,i){for(var n=0;n<this.staticProperties.length;n++){var a=this.staticProperties[n];a.uploadFunction(r,e,i,a.type===G.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),W0=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Y0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,q0=function(t){Ih(r,t);function r(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Et,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:G.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=de.from(Y0,W0,{}),i.state=Se.for2d(),i}return r.prototype.render=function(e){var i=e.children,n=e._maxSize,a=e._batchSize,o=this.renderer,s=i.length;if(s!==0){s>n&&!e.autoResize&&(s=n);var l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));var u=i[0]._texture.baseTexture,h=u.alphaMode>0;this.state.blendMode=Qu(e.blendMode,h),o.state.set(this.state);var f=o.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=iv(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var d=!1,p=0,v=0;p<s;p+=a,v+=1){var m=s-p;m>a&&(m=a),v>=l.length&&l.push(this._generateOneMoreBuffer(e));var _=l[v];_.uploadDynamic(i,p,m);var g=e._bufferUpdateIDs[v]||0;d=d||_._updateID<g,d&&(_._updateID=e._updateID,_.uploadStatic(i,p,m)),o.geometry.bind(_.geometry),f.drawElements(f.TRIANGLES,m*6,f.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(e){for(var i=[],n=e._maxSize,a=e._batchSize,o=e._properties,s=0;s<n;s+=a)i.push(new Ns(this.properties,o,a));return i},r.prototype._generateOneMoreBuffer=function(e){var i=e._batchSize,n=e._properties;return new Ns(this.properties,n,i)},r.prototype.uploadVertices=function(e,i,n,a,o,s){for(var l=0,u=0,h=0,f=0,c=0;c<n;++c){var d=e[i+c],p=d._texture,v=d.scale.x,m=d.scale.y,_=p.trim,g=p.orig;_?(u=_.x-d.anchor.x*g.width,l=u+_.width,f=_.y-d.anchor.y*g.height,h=f+_.height):(l=g.width*(1-d.anchor.x),u=g.width*-d.anchor.x,h=g.height*(1-d.anchor.y),f=g.height*-d.anchor.y),a[s]=u*v,a[s+1]=f*m,a[s+o]=l*v,a[s+o+1]=f*m,a[s+o*2]=l*v,a[s+o*2+1]=h*m,a[s+o*3]=u*v,a[s+o*3+1]=h*m,s+=o*4}},r.prototype.uploadPosition=function(e,i,n,a,o,s){for(var l=0;l<n;l++){var u=e[i+l].position;a[s]=u.x,a[s+1]=u.y,a[s+o]=u.x,a[s+o+1]=u.y,a[s+o*2]=u.x,a[s+o*2+1]=u.y,a[s+o*3]=u.x,a[s+o*3+1]=u.y,s+=o*4}},r.prototype.uploadRotation=function(e,i,n,a,o,s){for(var l=0;l<n;l++){var u=e[i+l].rotation;a[s]=u,a[s+o]=u,a[s+o*2]=u,a[s+o*3]=u,s+=o*4}},r.prototype.uploadUvs=function(e,i,n,a,o,s){for(var l=0;l<n;++l){var u=e[i+l]._texture._uvs;u?(a[s]=u.x0,a[s+1]=u.y0,a[s+o]=u.x1,a[s+o+1]=u.y1,a[s+o*2]=u.x2,a[s+o*2+1]=u.y2,a[s+o*3]=u.x3,a[s+o*3+1]=u.y3,s+=o*4):(a[s]=0,a[s+1]=0,a[s+o]=0,a[s+o+1]=0,a[s+o*2]=0,a[s+o*2+1]=0,a[s+o*3]=0,a[s+o*3+1]=0,s+=o*4)}},r.prototype.uploadTint=function(e,i,n,a,o,s){for(var l=0;l<n;++l){var u=e[i+l],h=u._texture.baseTexture.alphaMode>0,f=u.alpha,c=f<1&&h?Ra(u._tintRGB,f):u._tintRGB+(f*255<<24);a[s]=c,a[s+o]=c,a[s+o*2]=c,a[s+o*3]=c,s+=o*4}},r.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r.extension={name:"particle",type:at.RendererPlugin},r}(Si);/*!
 * @pixi/graphics - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fe;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(fe||(fe={}));var ce;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(ce||(ce={}));var Rr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,r){if(r===void 0&&(r=20),!this.adaptive||!t||isNaN(t))return r;var e=Math.ceil(t/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},Ch=function(){function t(){this.color=16777215,this.alpha=1,this.texture=j.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var r=new t;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=j.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Qn=function(t,r){return Qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Qn(t,r)};function Pa(t,r){Qn(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function Ps(t,r){var e,i;r===void 0&&(r=!1);var n=t.length;if(!(n<6)){for(var a=0,o=0,s=t[n-2],l=t[n-1];o<n;o+=2){var u=t[o],h=t[o+1];a+=(u-s)*(h+l),s=u,l=h}if(!r&&a>0||r&&a<=0)for(var f=n/2,o=f+f%2;o<n;o+=2){var c=n-o-2,d=n-o-1,p=o,v=o+1;e=[t[p],t[c]],t[c]=e[0],t[p]=e[1],i=[t[v],t[d]],t[d]=i[0],t[v]=i[1]}}}var wh={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,r){var e=t.points,i=t.holes,n=r.points,a=r.indices;if(e.length>=6){Ps(e,!1);for(var o=[],s=0;s<i.length;s++){var l=i[s];Ps(l.points,!0),o.push(e.length/2),e=e.concat(l.points)}var u=Zu(e,o,2);if(!u)return;for(var h=n.length/2,s=0;s<u.length;s+=3)a.push(u[s]+h),a.push(u[s+1]+h),a.push(u[s+2]+h);for(var s=0;s<e.length;s++)n.push(e[s])}}},Ci={build:function(t){var r=t.points,e,i,n,a,o,s;if(t.type===It.CIRC){var l=t.shape;e=l.x,i=l.y,o=s=l.radius,n=a=0}else if(t.type===It.ELIP){var u=t.shape;e=u.x,i=u.y,o=u.width,s=u.height,n=a=0}else{var h=t.shape,f=h.width/2,c=h.height/2;e=h.x+f,i=h.y+c,o=s=Math.max(0,Math.min(h.radius,Math.min(f,c))),n=f-o,a=c-s}if(!(o>=0&&s>=0&&n>=0&&a>=0)){r.length=0;return}var d=Math.ceil(2.3*Math.sqrt(o+s)),p=d*8+(n?4:0)+(a?4:0);if(r.length=p,p!==0){if(d===0){r.length=8,r[0]=r[6]=e+n,r[1]=r[3]=i+a,r[2]=r[4]=e-n,r[5]=r[7]=i-a;return}var v=0,m=d*4+(n?2:0)+2,_=m,g=p;{var y=n+o,T=a,x=e+y,b=e-y,R=i+T;if(r[v++]=x,r[v++]=R,r[--m]=R,r[--m]=b,a){var N=i-T;r[_++]=b,r[_++]=N,r[--g]=N,r[--g]=x}}for(var I=1;I<d;I++){var w=Math.PI/2*(I/d),y=n+Math.cos(w)*o,T=a+Math.sin(w)*s,x=e+y,b=e-y,R=i+T,N=i-T;r[v++]=x,r[v++]=R,r[--m]=R,r[--m]=b,r[_++]=b,r[_++]=N,r[--g]=N,r[--g]=x}{var y=n,T=a+s,x=e+y,b=e-y,R=i+T,N=i-T;r[v++]=x,r[v++]=R,r[--g]=N,r[--g]=x,n&&(r[v++]=b,r[v++]=R,r[--g]=N,r[--g]=b)}}},triangulate:function(t,r){var e=t.points,i=r.points,n=r.indices;if(e.length!==0){var a=i.length/2,o=a,s,l;if(t.type!==It.RREC){var u=t.shape;s=u.x,l=u.y}else{var h=t.shape;s=h.x+h.width/2,l=h.y+h.height/2}var f=t.matrix;i.push(t.matrix?f.a*s+f.c*l+f.tx:s,t.matrix?f.b*s+f.d*l+f.ty:l),a++,i.push(e[0],e[1]);for(var c=2;c<e.length;c+=2)i.push(e[c],e[c+1]),n.push(a++,o,a);n.push(o+1,o,a)}}},Z0={build:function(t){var r=t.shape,e=r.x,i=r.y,n=r.width,a=r.height,o=t.points;o.length=0,o.push(e,i,e+n,i,e+n,i+a,e,i+a)},triangulate:function(t,r){var e=t.points,i=r.points,n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),r.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function He(t,r,e){var i=r-t;return t+i*e}function li(t,r,e,i,n,a,o){o===void 0&&(o=[]);for(var s=20,l=o,u=0,h=0,f=0,c=0,d=0,p=0,v=0,m=0;v<=s;++v)m=v/s,u=He(t,e,m),h=He(r,i,m),f=He(e,n,m),c=He(i,a,m),d=He(u,f,m),p=He(h,c,m),!(v===0&&l[l.length-2]===d&&l[l.length-1]===p)&&l.push(d,p);return l}var K0={build:function(t){if(wi.nextRoundedRectBehavior){Ci.build(t);return}var r=t.shape,e=t.points,i=r.x,n=r.y,a=r.width,o=r.height,s=Math.max(0,Math.min(r.radius,Math.min(a,o)/2));e.length=0,s?(li(i,n+s,i,n,i+s,n,e),li(i+a-s,n,i+a,n,i+a,n+s,e),li(i+a,n+o-s,i+a,n+o,i+a-s,n+o,e),li(i+s,n+o,i,n+o,i,n+o-s,e)):e.push(i,n,i+a,n,i+a,n+o,i,n+o)},triangulate:function(t,r){if(wi.nextRoundedRectBehavior){Ci.triangulate(t,r);return}for(var e=t.points,i=r.points,n=r.indices,a=i.length/2,o=Zu(e,null,2),s=0,l=o.length;s<l;s+=3)n.push(o[s]+a),n.push(o[s+1]+a),n.push(o[s+2]+a);for(var s=0,l=e.length;s<l;s++)i.push(e[s],e[++s])}};function Us(t,r,e,i,n,a,o,s){var l=t-e*n,u=r-i*n,h=t+e*a,f=r+i*a,c,d;o?(c=i,d=-e):(c=-i,d=e);var p=l+c,v=u+d,m=h+c,_=f+d;return s.push(p,v),s.push(m,_),2}function Xe(t,r,e,i,n,a,o,s){var l=e-t,u=i-r,h=Math.atan2(l,u),f=Math.atan2(n-t,a-r);s&&h<f?h+=Math.PI*2:!s&&h>f&&(f+=Math.PI*2);var c=h,d=f-h,p=Math.abs(d),v=Math.sqrt(l*l+u*u),m=(15*p*Math.sqrt(v)/Math.PI>>0)+1,_=d/m;if(c+=_,s){o.push(t,r),o.push(e,i);for(var g=1,y=c;g<m;g++,y+=_)o.push(t,r),o.push(t+Math.sin(y)*v,r+Math.cos(y)*v);o.push(t,r),o.push(n,a)}else{o.push(e,i),o.push(t,r);for(var g=1,y=c;g<m;g++,y+=_)o.push(t+Math.sin(y)*v,r+Math.cos(y)*v),o.push(t,r);o.push(n,a),o.push(t,r)}return m*2}function J0(t,r){var e=t.shape,i=t.points||e.points.slice(),n=r.closePointEps;if(i.length!==0){var a=t.lineStyle,o=new ft(i[0],i[1]),s=new ft(i[i.length-2],i[i.length-1]),l=e.type!==It.POLY||e.closeStroke,u=Math.abs(o.x-s.x)<n&&Math.abs(o.y-s.y)<n;if(l){i=i.slice(),u&&(i.pop(),i.pop(),s.set(i[i.length-2],i[i.length-1]));var h=(o.x+s.x)*.5,f=(s.y+o.y)*.5;i.unshift(h,f),i.push(h,f)}var c=r.points,d=i.length/2,p=i.length,v=c.length/2,m=a.width/2,_=m*m,g=a.miterLimit*a.miterLimit,y=i[0],T=i[1],x=i[2],b=i[3],R=0,N=0,I=-(T-b),w=y-x,F=0,M=0,$=Math.sqrt(I*I+w*w);I/=$,w/=$,I*=m,w*=m;var it=a.alignment,O=(1-it)*2,S=it*2;l||(a.cap===ce.ROUND?p+=Xe(y-I*(O-S)*.5,T-w*(O-S)*.5,y-I*O,T-w*O,y+I*S,T+w*S,c,!0)+2:a.cap===ce.SQUARE&&(p+=Us(y,T,I,w,O,S,!0,c))),c.push(y-I*O,T-w*O),c.push(y+I*S,T+w*S);for(var V=1;V<d-1;++V){y=i[(V-1)*2],T=i[(V-1)*2+1],x=i[V*2],b=i[V*2+1],R=i[(V+1)*2],N=i[(V+1)*2+1],I=-(T-b),w=y-x,$=Math.sqrt(I*I+w*w),I/=$,w/=$,I*=m,w*=m,F=-(b-N),M=x-R,$=Math.sqrt(F*F+M*M),F/=$,M/=$,F*=m,M*=m;var vt=x-y,Q=T-b,E=x-R,C=N-b,P=Q*E-C*vt,L=P<0;if(Math.abs(P)<.1){c.push(x-I*O,b-w*O),c.push(x+I*S,b+w*S);continue}var k=(-I+y)*(-w+b)-(-I+x)*(-w+T),W=(-F+R)*(-M+b)-(-F+x)*(-M+N),H=(vt*W-E*k)/P,Z=(C*k-Q*W)/P,rt=(H-x)*(H-x)+(Z-b)*(Z-b),tt=x+(H-x)*O,et=b+(Z-b)*O,X=x-(H-x)*S,Y=b-(Z-b)*S,D=Math.min(vt*vt+Q*Q,E*E+C*C),ut=L?O:S,ot=D+ut*ut*_,q=rt<=ot;q?a.join===fe.BEVEL||rt/_>g?(L?(c.push(tt,et),c.push(x+I*S,b+w*S),c.push(tt,et),c.push(x+F*S,b+M*S)):(c.push(x-I*O,b-w*O),c.push(X,Y),c.push(x-F*O,b-M*O),c.push(X,Y)),p+=2):a.join===fe.ROUND?L?(c.push(tt,et),c.push(x+I*S,b+w*S),p+=Xe(x,b,x+I*S,b+w*S,x+F*S,b+M*S,c,!0)+4,c.push(tt,et),c.push(x+F*S,b+M*S)):(c.push(x-I*O,b-w*O),c.push(X,Y),p+=Xe(x,b,x-I*O,b-w*O,x-F*O,b-M*O,c,!1)+4,c.push(x-F*O,b-M*O),c.push(X,Y)):(c.push(tt,et),c.push(X,Y)):(c.push(x-I*O,b-w*O),c.push(x+I*S,b+w*S),a.join===fe.ROUND?L?p+=Xe(x,b,x+I*S,b+w*S,x+F*S,b+M*S,c,!0)+2:p+=Xe(x,b,x-I*O,b-w*O,x-F*O,b-M*O,c,!1)+2:a.join===fe.MITER&&rt/_<=g&&(L?(c.push(X,Y),c.push(X,Y)):(c.push(tt,et),c.push(tt,et)),p+=2),c.push(x-F*O,b-M*O),c.push(x+F*S,b+M*S),p+=2)}y=i[(d-2)*2],T=i[(d-2)*2+1],x=i[(d-1)*2],b=i[(d-1)*2+1],I=-(T-b),w=y-x,$=Math.sqrt(I*I+w*w),I/=$,w/=$,I*=m,w*=m,c.push(x-I*O,b-w*O),c.push(x+I*S,b+w*S),l||(a.cap===ce.ROUND?p+=Xe(x-I*(O-S)*.5,b-w*(O-S)*.5,x-I*O,b-w*O,x+I*S,b+w*S,c,!1)+2:a.cap===ce.SQUARE&&(p+=Us(x,b,I,w,O,S,!1,c)));for(var kt=r.indices,ke=Rr.epsilon*Rr.epsilon,V=v;V<p+v-2;++V)y=c[V*2],T=c[V*2+1],x=c[(V+1)*2],b=c[(V+1)*2+1],R=c[(V+2)*2],N=c[(V+2)*2+1],!(Math.abs(y*(b-N)+x*(N-T)+R*(T-b))<ke)&&kt.push(V,V+1,V+2)}}function Q0(t,r){var e=0,i=t.shape,n=t.points||i.points,a=i.type!==It.POLY||i.closeStroke;if(n.length!==0){var o=r.points,s=r.indices,l=n.length/2,u=o.length/2,h=u;for(o.push(n[0],n[1]),e=1;e<l;e++)o.push(n[e*2],n[e*2+1]),s.push(h,h+1),h++;a&&s.push(h,u)}}function Os(t,r){t.lineStyle.native?Q0(t,r):J0(t,r)}var Ss=function(){function t(){}return t.curveTo=function(r,e,i,n,a,o){var s=o[o.length-2],l=o[o.length-1],u=l-e,h=s-r,f=n-e,c=i-r,d=Math.abs(u*c-h*f);if(d<1e-8||a===0)return(o[o.length-2]!==r||o[o.length-1]!==e)&&o.push(r,e),null;var p=u*u+h*h,v=f*f+c*c,m=u*f+h*c,_=a*Math.sqrt(p)/d,g=a*Math.sqrt(v)/d,y=_*m/p,T=g*m/v,x=_*c+g*h,b=_*f+g*u,R=h*(g+y),N=u*(g+y),I=c*(_+T),w=f*(_+T),F=Math.atan2(N-b,R-x),M=Math.atan2(w-b,I-x);return{cx:x+r,cy:b+e,radius:a,startAngle:F,endAngle:M,anticlockwise:h*f>c*u}},t.arc=function(r,e,i,n,a,o,s,l,u){for(var h=s-o,f=Rr._segmentsCount(Math.abs(h)*a,Math.ceil(Math.abs(h)/xi)*40),c=h/(f*2),d=c*2,p=Math.cos(c),v=Math.sin(c),m=f-1,_=m%1/m,g=0;g<=m;++g){var y=g+_*g,T=c+o+d*y,x=Math.cos(T),b=-Math.sin(T);u.push((p*x+v*b)*a+i,(p*-b+v*x)*a+n)}},t}(),t_=function(){function t(){}return t.curveLength=function(r,e,i,n,a,o,s,l){for(var u=10,h=0,f=0,c=0,d=0,p=0,v=0,m=0,_=0,g=0,y=0,T=0,x=r,b=e,R=1;R<=u;++R)f=R/u,c=f*f,d=c*f,p=1-f,v=p*p,m=v*p,_=m*r+3*v*f*i+3*p*c*a+d*s,g=m*e+3*v*f*n+3*p*c*o+d*l,y=x-_,T=b-g,x=_,b=g,h+=Math.sqrt(y*y+T*T);return h},t.curveTo=function(r,e,i,n,a,o,s){var l=s[s.length-2],u=s[s.length-1];s.length-=2;var h=Rr._segmentsCount(t.curveLength(l,u,r,e,i,n,a,o)),f=0,c=0,d=0,p=0,v=0;s.push(l,u);for(var m=1,_=0;m<=h;++m)_=m/h,f=1-_,c=f*f,d=c*f,p=_*_,v=p*_,s.push(d*l+3*c*_*r+3*f*p*i+v*a,d*u+3*c*_*e+3*f*p*n+v*o)},t}(),e_=function(){function t(){}return t.curveLength=function(r,e,i,n,a,o){var s=r-2*i+a,l=e-2*n+o,u=2*i-2*r,h=2*n-2*e,f=4*(s*s+l*l),c=4*(s*u+l*h),d=u*u+h*h,p=2*Math.sqrt(f+c+d),v=Math.sqrt(f),m=2*f*v,_=2*Math.sqrt(d),g=c/v;return(m*p+v*c*(p-_)+(4*d*f-c*c)*Math.log((2*v+g+p)/(g+_)))/(4*m)},t.curveTo=function(r,e,i,n,a){for(var o=a[a.length-2],s=a[a.length-1],l=Rr._segmentsCount(t.curveLength(o,s,r,e,i,n)),u=0,h=0,f=1;f<=l;++f){var c=f/l;u=o+(r-o)*c,h=s+(e-s)*c,a.push(u+(r+(i-r)*c-u)*c,h+(e+(n-e)*c-h)*c)}},t}(),r_=function(){function t(){this.reset()}return t.prototype.begin=function(r,e,i){this.reset(),this.style=r,this.start=e,this.attribStart=i},t.prototype.end=function(r,e){this.attribSize=e-this.attribStart,this.size=r-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),be,un=(be={},be[It.POLY]=wh,be[It.CIRC]=Ci,be[It.ELIP]=Ci,be[It.RECT]=Z0,be[It.RREC]=K0,be),Fs=[],ui=[],Ls=function(){function t(r,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=r,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=r.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),$e=new ft,i_=function(t){Pa(r,t);function r(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new Ti,e.boundsDirty=-1,e}return Object.defineProperty(r.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ui.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),Fs.push(i)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(e,i,n,a){i===void 0&&(i=null),n===void 0&&(n=null),a===void 0&&(a=null);var o=new Ls(e,i,n,a);return this.graphicsData.push(o),this.dirty++,this},r.prototype.drawHole=function(e,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new Ls(e,null,null,i),a=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=a.lineStyle,a.holes.push(n),this.dirty++,this},r.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(e){for(var i=this.graphicsData,n=0;n<i.length;++n){var a=i[n];if(!!a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(e,$e):$e.copyFrom(e),a.shape.contains($e.x,$e.y))){var o=!1;if(a.holes)for(var s=0;s<a.holes.length;s++){var l=a.holes[s];if(l.shape.contains($e.x,$e.y)){o=!0;break}}if(!o)return!0}}return!1},r.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,n=null,a=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],a=n.style);for(var o=this.shapeIndex;o<i.length;o++){this.shapeIndex++;var s=i[o],l=s.fillStyle,u=s.lineStyle,h=un[s.type];h.build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(l.visible||u.visible)&&this.processHoles(s.holes);for(var f=0;f<2;f++){var c=f===0?l:u;if(!!c.visible){var d=c.texture.baseTexture,p=this.indices.length,v=this.points.length/2;d.wrapMode=ie.REPEAT,f===0?this.processFill(s):this.processLine(s);var m=this.points.length/2-v;m!==0&&(n&&!this._compareStyles(a,c)&&(n.end(p,v),n=null),n||(n=Fs.pop()||new r_,n.begin(c,p,v),this.batches.push(n),a=c),this.addUvs(this.points,e,c.texture,v,m,c.matrix))}}}var _=this.indices.length,g=this.points.length/2;if(n&&n.end(_,g),this.batches.length===0){this.batchable=!0;return}var y=g>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&y===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},r.prototype._compareStyles=function(e,i){return!(!e||!i||e.texture.baseTexture!==i.texture.baseTexture||e.color+e.alpha!==i.color+i.alpha||!!e.native!=!!i.native)},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,i=this.graphicsData.length;e<i;e++){var n=this.graphicsData[e],a=n.fillStyle,o=n.lineStyle;if(a&&!a.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,i=0,n=e.length;i<n;i++)for(var a=e[i],o=0;o<a.size;o++){var s=a.start+o;this.indicesUint16[s]=this.indicesUint16[s]-a.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,i=0;i<e.length;i++)if(e[i].style.native)return!1;return this.points.length<r.BATCHABLE_SIZE*2},r.prototype.buildDrawCalls=function(){for(var e=++K._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),ui.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,a=this.textureIds,o=ui.pop();o||(o=new jn,o.texArray=new Vn),o.texArray.count=0,o.start=0,o.size=0,o.type=Gt.TRIANGLES;var s=0,l=null,u=0,h=!1,f=Gt.TRIANGLES,c=0;this.drawCalls.push(o);for(var i=0;i<this.batches.length;i++){var d=this.batches[i],p=8,v=d.style,m=v.texture.baseTexture;h!==!!v.native&&(h=!!v.native,f=h?Gt.LINES:Gt.TRIANGLES,l=null,s=p,e++),l!==m&&(l=m,m._batchEnabled!==e&&(s===p&&(e++,s=0,o.size>0&&(o=ui.pop(),o||(o=new jn,o.texArray=new Vn),this.drawCalls.push(o)),o.start=c,o.size=0,o.texArray.count=0,o.type=f),m.touched=1,m._batchEnabled=e,m._batchLocation=s,m.wrapMode=ie.REPEAT,o.texArray.elements[o.texArray.count++]=m,s++)),o.size+=d.size,c+=d.size,u=m._batchLocation,this.addColors(n,v.color,v.alpha,d.attribSize,d.attribStart),this.addTextureIds(a,u,d.attribSize,d.attribStart)}K._globalBatch=e,this.packAttributes()},r.prototype.packAttributes=function(){for(var e=this.points,i=this.uvs,n=this.colors,a=this.textureIds,o=new ArrayBuffer(e.length*3*4),s=new Float32Array(o),l=new Uint32Array(o),u=0,h=0;h<e.length/2;h++)s[u++]=e[h*2],s[u++]=e[h*2+1],s[u++]=i[h*2],s[u++]=i[h*2+1],l[u++]=n[h],s[u++]=a[h];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(e){if(e.holes.length)wh.triangulate(e,this);else{var i=un[e.type];i.triangulate(e,this)}},r.prototype.processLine=function(e){Os(e,this);for(var i=0;i<e.holes.length;i++)Os(e.holes[i],this)},r.prototype.processHoles=function(e){for(var i=0;i<e.length;i++){var n=e[i],a=un[n.type];a.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},r.prototype.calculateBounds=function(){var e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(e,i){for(var n=0;n<e.length/2;n++){var a=e[n*2],o=e[n*2+1];e[n*2]=i.a*a+i.c*o+i.tx,e[n*2+1]=i.b*a+i.d*o+i.ty}},r.prototype.addColors=function(e,i,n,a,o){o===void 0&&(o=0);var s=(i>>16)+(i&65280)+((i&255)<<16),l=Ra(s,n);e.length=Math.max(e.length,o+a);for(var u=0;u<a;u++)e[o+u]=l},r.prototype.addTextureIds=function(e,i,n,a){a===void 0&&(a=0),e.length=Math.max(e.length,a+n);for(var o=0;o<n;o++)e[a+o]=i},r.prototype.addUvs=function(e,i,n,a,o,s){s===void 0&&(s=null);for(var l=0,u=i.length,h=n.frame;l<o;){var f=e[(a+l)*2],c=e[(a+l)*2+1];if(s){var d=s.a*f+s.c*c+s.tx;c=s.b*f+s.d*c+s.ty,f=d}l++,i.push(f/h.width,c/h.height)}var p=n.baseTexture;(h.width<p.width||h.height<p.height)&&this.adjustUvs(i,n,u,o)},r.prototype.adjustUvs=function(e,i,n,a){for(var o=i.baseTexture,s=1e-6,l=n+a*2,u=i.frame,h=u.width/o.width,f=u.height/o.height,c=u.x/u.width,d=u.y/u.height,p=Math.floor(e[n]+s),v=Math.floor(e[n+1]+s),m=n+2;m<l;m+=2)p=Math.min(p,Math.floor(e[m]+s)),v=Math.min(v,Math.floor(e[m+1]+s));c-=p,d-=v;for(var m=n;m<l;m+=2)e[m]=(e[m]+c)*h,e[m+1]=(e[m+1]+d)*f},r.BATCHABLE_SIZE=100,r}(yh),n_=function(t){Pa(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=ce.BUTT,e.join=fe.MITER,e.miterLimit=10,e}return r.prototype.clone=function(){var e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},r.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r}(Ch),a_=new Float32Array(3),hn={},wi=function(t){Pa(r,t);function r(e){e===void 0&&(e=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new Ch,i._lineStyle=new n_,i._matrix=null,i._holeMode=!1,i.state=Se.for2d(),i._geometry=e||new i_,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=B.NORMAL,i}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(e,i,n,a,o){return e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=1),a===void 0&&(a=.5),o===void 0&&(o=!1),typeof e=="number"&&(e={width:e,color:i,alpha:n,alignment:a,native:o}),this.lineTextureStyle(e)},r.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:j.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ce.BUTT,join:fe.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new pi,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[i-2],e[i-1]))}else this.currentPath=new pi,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(e,i){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=i,this},r.prototype.lineTo=function(e,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,a=n[n.length-2],o=n[n.length-1];return(a!==e||o!==i)&&n.push(e,i),this},r.prototype._initCurve=function(e,i){e===void 0&&(e=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,i]):this.moveTo(e,i)},r.prototype.quadraticCurveTo=function(e,i,n,a){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),e_.curveTo(e,i,n,a,o),this},r.prototype.bezierCurveTo=function(e,i,n,a,o,s){return this._initCurve(),t_.curveTo(e,i,n,a,o,s,this.currentPath.points),this},r.prototype.arcTo=function(e,i,n,a,o){this._initCurve(e,i);var s=this.currentPath.points,l=Ss.curveTo(e,i,n,a,o,s);if(l){var u=l.cx,h=l.cy,f=l.radius,c=l.startAngle,d=l.endAngle,p=l.anticlockwise;this.arc(u,h,f,c,d,p)}return this},r.prototype.arc=function(e,i,n,a,o,s){if(s===void 0&&(s=!1),a===o)return this;!s&&o<=a?o+=xi:s&&a<=o&&(a+=xi);var l=o-a;if(l===0)return this;var u=e+Math.cos(a)*n,h=i+Math.sin(a)*n,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-u),p=Math.abs(c[c.length-1]-h);d<f&&p<f||c.push(u,h)}else this.moveTo(u,h),c=this.currentPath.points;return Ss.arc(u,h,e,i,n,a,o,s,c),this},r.prototype.beginFill=function(e,i){return e===void 0&&(e=0),i===void 0&&(i=1),this.beginTextureFill({texture:j.WHITE,color:e,alpha:i})},r.prototype.beginTextureFill=function(e){e=Object.assign({texture:j.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(e,i,n,a){return this.drawShape(new J(e,i,n,a))},r.prototype.drawRoundedRect=function(e,i,n,a,o){return this.drawShape(new cv(e,i,n,a,o))},r.prototype.drawCircle=function(e,i,n){return this.drawShape(new hv(e,i,n))},r.prototype.drawEllipse=function(e,i,n,a){return this.drawShape(new fv(e,i,n,a))},r.prototype.drawPolygon=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var a,o=!0,s=i[0];s.points?(o=s.closeStroke,a=s.points):Array.isArray(i[0])?a=i[0]:a=i;var l=new pi(a);return l.closeStroke=o,this.drawShape(l),this},r.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===It.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},r.prototype._render=function(e){this.finishPoly();var i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},r.prototype._populateBatches=function(){var e=this._geometry,i=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var a=0;a<n;a++){var o=e.batches[a],s=o.style.color,l=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),h=new Uint16Array(e.indicesUint16.buffer,o.start*2,o.size),f={vertexData:l,blendMode:i,indices:h,uvs:u,_batchRGB:wt(s),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[a]=f}},r.prototype._renderBatched=function(e){if(!!this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var a=this.batches[i];a.worldAlpha=this.worldAlpha*a.alpha,e.plugins[this.pluginName].render(a)}}},r.prototype._renderDirect=function(e){var i=this._resolveDirectShader(e),n=this._geometry,a=this.tint,o=this.worldAlpha,s=i.uniforms,l=n.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(a>>16&255)/255*o,s.tint[1]=(a>>8&255)/255*o,s.tint[2]=(a&255)/255*o,s.tint[3]=o,e.shader.bind(i),e.geometry.bind(n,i),e.state.set(this.state);for(var u=0,h=l.length;u<h;u++)this._renderDrawCallDirect(e,n.drawCalls[u])},r.prototype._renderDrawCallDirect=function(e,i){for(var n=i.texArray,a=i.type,o=i.size,s=i.start,l=n.count,u=0;u<l;u++)e.texture.bind(n.elements[u],u);e.geometry.draw(a,o,s)},r.prototype._resolveDirectShader=function(e){var i=this.shader,n=this.pluginName;if(!i){if(!hn[n]){for(var a=e.plugins[n].MAX_TEXTURES,o=new Int32Array(a),s=0;s<a;s++)o[s]=s;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new Et,default:Ae.from({uSamplers:o},!0)},u=e.plugins[n]._shader.program;hn[n]=new de(u,l)}i=hn[n]}return i},r.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(!!e.graphicsData.length){var i=e.bounds,n=i.minX,a=i.minY,o=i.maxX,s=i.maxY;this._bounds.addFrame(this.transform,n,a,o,s)}},r.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=wt(this.tint,a_),i=0;i<this.batches.length;i++){var n=this.batches[i],a=n._batchRGB,o=e[0]*a[0]*255,s=e[1]*a[1]*255,l=e[2]*a[2]*255,u=(o<<16)+(s<<8)+(l|0);n._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},r.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var i=this.transform.worldTransform,n=i.a,a=i.b,o=i.c,s=i.d,l=i.tx,u=i.ty,h=this._geometry.points,f=this.vertexData,c=0,d=0;d<h.length;d+=2){var p=h[d],v=h[d+1];f[c++]=n*p+o*v+l,f[c++]=s*v+a*p+u}}},r.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},r.prototype.setMatrix=function(e){return this._matrix=e,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},r.nextRoundedRectBehavior=!1,r._TEMP_POINT=new ft,r}(zt);/*!
 * @pixi/sprite - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ta=function(t,r){return ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ta(t,r)};function o_(t,r){ta(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var cr=new ft,s_=new Uint16Array([0,1,2,0,2,3]),ve=function(t){o_(r,t);function r(e){var i=t.call(this)||this;return i._anchor=new qe(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=B.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||j.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=s_,i.pluginName="batch",i.isSprite=!0,i._roundPixels=U.ROUND_PIXELS,i}return r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ye(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ye(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var i=this.transform.worldTransform,n=i.a,a=i.b,o=i.c,s=i.d,l=i.tx,u=i.ty,h=this.vertexData,f=e.trim,c=e.orig,d=this._anchor,p=0,v=0,m=0,_=0;if(f?(v=f.x-d._x*c.width,p=v+f.width,_=f.y-d._y*c.height,m=_+f.height):(v=-d._x*c.width,p=v+c.width,_=-d._y*c.height,m=_+c.height),h[0]=n*v+o*_+l,h[1]=s*_+a*v+u,h[2]=n*p+o*_+l,h[3]=s*_+a*p+u,h[4]=n*p+o*m+l,h[5]=s*m+a*p+u,h[6]=n*v+o*m+l,h[7]=s*m+a*v+u,this._roundPixels)for(var g=U.RESOLUTION,y=0;y<h.length;++y)h[y]=Math.round((h[y]*g|0)/g)}},r.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,i=this.vertexTrimmedData,n=e.orig,a=this._anchor,o=this.transform.worldTransform,s=o.a,l=o.b,u=o.c,h=o.d,f=o.tx,c=o.ty,d=-a._x*n.width,p=d+n.width,v=-a._y*n.height,m=v+n.height;i[0]=s*d+u*v+f,i[1]=h*v+l*d+c,i[2]=s*p+u*v+f,i[3]=h*v+l*p+c,i[4]=s*p+u*m+f,i[5]=h*m+l*p+c,i[6]=s*d+u*m+f,i[7]=h*m+l*d+c},r.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var e=this._texture.trim,i=this._texture.orig;!e||e.width===i.width&&e.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},r.prototype.getLocalBounds=function(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Ti),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new J),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,cr);var i=this._texture.orig.width,n=this._texture.orig.height,a=-i*this.anchor.x,o=0;return cr.x>=a&&cr.x<a+i&&(o=-n*this.anchor.y,cr.y>=o&&cr.y<o+n)},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof e=="boolean"?e:e&&e.texture;if(i){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},r.from=function(e,i){var n=e instanceof j?e:j.from(e,i);return new r(n)},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var i=Ye(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var i=Ye(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||j.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r}(zt);/*!
 * @pixi/text - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ea=function(t,r){return ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ea(t,r)};function l_(t,r){ea(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Ar;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Ar||(Ar={}));var fn={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ar.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},u_=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],tr=function(){function t(r){this.styleID=0,this.reset(),dn(this,r,r)}return t.prototype.clone=function(){var r={};return dn(r,this,fn),new t(r)},t.prototype.reset=function(){dn(this,fn,fn)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(r){var e=cn(r);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(r){var e=cn(r);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(r){h_(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(r){var e=cn(r);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var r=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&u_.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+e.join(",")},t}();function Gs(t){return typeof t=="number"?Ku(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function cn(t){if(Array.isArray(t)){for(var r=0;r<t.length;++r)t[r]=Gs(t[r]);return t}else return Gs(t)}function h_(t,r){if(!Array.isArray(t)||!Array.isArray(r)||t.length!==r.length)return!1;for(var e=0;e<t.length;++e)if(t[e]!==r[e])return!1;return!0}function dn(t,r,e){for(var i in e)Array.isArray(r[i])?t[i]=r[i].slice():t[i]=r[i]}var Yt=function(){function t(r,e,i,n,a,o,s,l,u){this.text=r,this.style=e,this.width=i,this.height=n,this.lines=a,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=l,this.fontProperties=u}return t.measureText=function(r,e,i,n){n===void 0&&(n=t._canvas),i=i==null?e.wordWrap:i;var a=e.toFontString(),o=t.measureFont(a);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);var s=n.getContext("2d");s.font=a;for(var l=i?t.wordWrap(r,e,n):r,u=l.split(/(?:\r\n|\r|\n)/),h=new Array(u.length),f=0,c=0;c<u.length;c++){var d=s.measureText(u[c]).width+(u[c].length-1)*e.letterSpacing;h[c]=d,f=Math.max(f,d)}var p=f+e.strokeThickness;e.dropShadow&&(p+=e.dropShadowDistance);var v=e.lineHeight||o.fontSize+e.strokeThickness,m=Math.max(v,o.fontSize+e.strokeThickness)+(u.length-1)*(v+e.leading);return e.dropShadow&&(m+=e.dropShadowDistance),new t(r,e,p,m,u,h,v+e.leading,f,o)},t.wordWrap=function(r,e,i){i===void 0&&(i=t._canvas);for(var n=i.getContext("2d"),a=0,o="",s="",l=Object.create(null),u=e.letterSpacing,h=e.whiteSpace,f=t.collapseSpaces(h),c=t.collapseNewlines(h),d=!f,p=e.wordWrapWidth+u,v=t.tokenize(r),m=0;m<v.length;m++){var _=v[m];if(t.isNewline(_)){if(!c){s+=t.addLine(o),d=!f,o="",a=0;continue}_=" "}if(f){var g=t.isBreakingSpace(_),y=t.isBreakingSpace(o[o.length-1]);if(g&&y)continue}var T=t.getFromCache(_,u,l,n);if(T>p)if(o!==""&&(s+=t.addLine(o),o="",a=0),t.canBreakWords(_,e.breakWords))for(var x=t.wordWrapSplit(_),b=0;b<x.length;b++){for(var R=x[b],N=1;x[b+N];){var I=x[b+N],w=R[R.length-1];if(!t.canBreakChars(w,I,_,b,e.breakWords))R+=I;else break;N++}b+=R.length-1;var F=t.getFromCache(R,u,l,n);F+a>p&&(s+=t.addLine(o),d=!1,o="",a=0),o+=R,a+=F}else{o.length>0&&(s+=t.addLine(o),o="",a=0);var M=m===v.length-1;s+=t.addLine(_,!M),d=!1,o="",a=0}else T+a>p&&(d=!1,s+=t.addLine(o),o="",a=0),(o.length>0||!t.isBreakingSpace(_)||d)&&(o+=_,a+=T)}return s+=t.addLine(o,!1),s},t.addLine=function(r,e){return e===void 0&&(e=!0),r=t.trimRight(r),r=e?r+`
`:r,r},t.getFromCache=function(r,e,i,n){var a=i[r];if(typeof a!="number"){var o=r.length*e;a=n.measureText(r).width+o,i[r]=a}return a},t.collapseSpaces=function(r){return r==="normal"||r==="pre-line"},t.collapseNewlines=function(r){return r==="normal"},t.trimRight=function(r){if(typeof r!="string")return"";for(var e=r.length-1;e>=0;e--){var i=r[e];if(!t.isBreakingSpace(i))break;r=r.slice(0,-1)}return r},t.isNewline=function(r){return typeof r!="string"?!1:t._newlines.indexOf(r.charCodeAt(0))>=0},t.isBreakingSpace=function(r,e){return typeof r!="string"?!1:t._breakingSpaces.indexOf(r.charCodeAt(0))>=0},t.tokenize=function(r){var e=[],i="";if(typeof r!="string")return e;for(var n=0;n<r.length;n++){var a=r[n],o=r[n+1];if(t.isBreakingSpace(a,o)||t.isNewline(a)){i!==""&&(e.push(i),i=""),e.push(a);continue}i+=a}return i!==""&&e.push(i),e},t.canBreakWords=function(r,e){return e},t.canBreakChars=function(r,e,i,n,a){return!0},t.wordWrapSplit=function(r){return r.split("")},t.measureFont=function(r){if(t._fonts[r])return t._fonts[r];var e={ascent:0,descent:0,fontSize:0},i=t._canvas,n=t._context;n.font=r;var a=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(n.measureText(a).width),s=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),l=Math.ceil(t.HEIGHT_MULTIPLIER*s);s=s*t.BASELINE_MULTIPLIER|0,i.width=o,i.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=r,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(a,0,s);var u=n.getImageData(0,0,o,l).data,h=u.length,f=o*4,c=0,d=0,p=!1;for(c=0;c<s;++c){for(var v=0;v<f;v+=4)if(u[d+v]!==255){p=!0;break}if(!p)d+=f;else break}for(e.ascent=s-c,d=h-f,p=!1,c=l;c>s;--c){for(var v=0;v<f;v+=4)if(u[d+v]!==255){p=!0;break}if(!p)d-=f;else break}return e.descent=c-s,e.fontSize=e.ascent+e.descent,t._fonts[r]=e,e},t.clearMetrics=function(r){r===void 0&&(r=""),r?delete t._fonts[r]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var r=void 0;try{var e=new OffscreenCanvas(0,0),i=e.getContext("2d");if(i&&i.measureText)return t.__canvas=e,e;r=U.ADAPTER.createCanvas()}catch{r=U.ADAPTER.createCanvas()}r.width=r.height=10,t.__canvas=r}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();Yt._fonts={};Yt.METRICS_STRING="|\xC9q\xC5";Yt.BASELINE_SYMBOL="M";Yt.BASELINE_MULTIPLIER=1.4;Yt.HEIGHT_MULTIPLIER=2;Yt._newlines=[10,13];Yt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var f_={texture:!0,children:!1,baseTexture:!0},Rh=function(t){l_(r,t);function r(e,i,n){var a=this,o=!1;n||(n=U.ADAPTER.createCanvas(),o=!0),n.width=3,n.height=3;var s=j.from(n);return s.orig=new J,s.trim=new J,a=t.call(this,s)||this,a._ownCanvas=o,a.canvas=n,a.context=n.getContext("2d"),a._resolution=U.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=e,a.style=i,a.localStyleID=-1,a}return r.prototype.updateText=function(e){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var n=this.context,a=Yt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=a.width,s=a.height,l=a.lines,u=a.lineHeight,h=a.lineWidths,f=a.maxLineWidth,c=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var d,p,v=i.dropShadow?2:1,m=0;m<v;++m){var _=i.dropShadow&&m===0,g=_?Math.ceil(Math.max(1,s)+i.padding*2):0,y=g*this._resolution;if(_){n.fillStyle="black",n.strokeStyle="black";var T=i.dropShadowColor,x=wt(typeof T=="number"?T:Ot(T)),b=i.dropShadowBlur*this._resolution,R=i.dropShadowDistance*this._resolution;n.shadowColor="rgba("+x[0]*255+","+x[1]*255+","+x[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=b,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*R,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*R+y}else n.fillStyle=this._generateFillStyle(i,l,a),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var N=(u-c.fontSize)/2;(!r.nextLineHeightBehavior||u-c.fontSize<0)&&(N=0);for(var I=0;I<l.length;I++)d=i.strokeThickness/2,p=i.strokeThickness/2+I*u+c.ascent+N,i.align==="right"?d+=f-h[I]:i.align==="center"&&(d+=(f-h[I])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[I],d+i.padding,p+i.padding-g,!0),i.fill&&this.drawLetterSpacing(l[I],d+i.padding,p+i.padding-g)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(e,i,n,a){a===void 0&&(a=!1);var o=this._style,s=o.letterSpacing,l=r.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(s===0||l){l&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),a?this.context.strokeText(e,i,n):this.context.fillText(e,i,n);return}for(var u=i,h=Array.from?Array.from(e):e.split(""),f=this.context.measureText(e).width,c=0,d=0;d<h.length;++d){var p=h[d];a?this.context.strokeText(p,u,n):this.context.fillText(p,u,n);for(var v="",m=d+1;m<h.length;++m)v+=h[m];c=this.context.measureText(v).width,u+=f-c+s,f=c}},r.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var i=ov(e);i.data&&(e.width=i.width,e.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,a=this._style,o=a.trim?0:a.padding,s=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-o,n.trim.y=-o,n.orig.width=n._frame.width-o*2,n.orig.height=n._frame.height-o*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1},r.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},r.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},r.prototype.getBounds=function(e,i){return this.updateText(!0),this._textureID===-1&&(e=!1),t.prototype.getBounds.call(this,e,i)},r.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(e,i,n){var a=e.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,s=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,u=this.canvas.width/this._resolution-s-l*2,h=this.canvas.height/this._resolution-s-l*2,f=a.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var d=f.length+1,p=1;p<d;++p)c.push(p/d);if(f.unshift(a[0]),c.unshift(0),f.push(a[a.length-1]),c.push(1),e.fillGradientType===Ar.LINEAR_VERTICAL){o=this.context.createLinearGradient(u/2,l,u/2,h+l);for(var v=n.fontProperties.fontSize+e.strokeThickness,p=0;p<i.length;p++){var m=n.lineHeight*(p-1)+v,_=n.lineHeight*p,g=_;p>0&&m>_&&(g=(_+m)/2);var y=_+v,T=n.lineHeight*(p+1),x=y;p+1<i.length&&T<y&&(x=(y+T)/2);for(var b=(x-g)/h,R=0;R<f.length;R++){var N=0;typeof c[R]=="number"?N=c[R]:N=R/f.length;var I=Math.min(1,Math.max(0,g/h+N*b));I=Number(I.toFixed(5)),o.addColorStop(I,f[R])}}}else{o=this.context.createLinearGradient(l,h/2,u+l,h/2);for(var w=f.length+1,F=1,p=0;p<f.length;p++){var M=void 0;typeof c[p]=="number"?M=c[p]:M=F/w,o.addColorStop(M,f[p]),F++}}return o},r.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},f_,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var i=Ye(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var i=Ye(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof tr?this._style=e:this._style=new tr(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e==null?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),r.nextLineHeightBehavior=!1,r.experimentalLetterSpacing=!1,r}(ve);/*!
 * @pixi/prepare - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */U.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ra=function(t,r){return ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ra(t,r)};function c_(t,r){ra(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var d_=function(){function t(r){this.maxItemsPerFrame=r,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function p_(t,r){var e=!1;if(t&&t._textures&&t._textures.length){for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof j){var n=t._textures[i].baseTexture;r.indexOf(n)===-1&&(r.push(n),e=!0)}}return e}function v_(t,r){if(t.baseTexture instanceof K){var e=t.baseTexture;return r.indexOf(e)===-1&&r.push(e),!0}return!1}function m_(t,r){if(t._texture&&t._texture instanceof j){var e=t._texture.baseTexture;return r.indexOf(e)===-1&&r.push(e),!0}return!1}function __(t,r){return r instanceof Rh?(r.updateText(!0),!0):!1}function g_(t,r){if(r instanceof tr){var e=r.toFontString();return Yt.measureFont(e),!0}return!1}function y_(t,r){if(t instanceof Rh){r.indexOf(t.style)===-1&&r.push(t.style),r.indexOf(t)===-1&&r.push(t);var e=t._texture.baseTexture;return r.indexOf(e)===-1&&r.push(e),!0}return!1}function b_(t,r){return t instanceof tr?(r.indexOf(t)===-1&&r.push(t),!0):!1}var x_=function(){function t(r){var e=this;this.limiter=new d_(U.UPLOADS_PER_FRAME),this.renderer=r,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!e.queue||e.prepareItems()},this.registerFindHook(y_),this.registerFindHook(b_),this.registerFindHook(p_),this.registerFindHook(v_),this.registerFindHook(m_),this.registerUploadHook(__),this.registerUploadHook(g_)}return t.prototype.upload=function(r,e){var i=this;return typeof r=="function"&&(e=r,r=null),e&&jt("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(n){r&&i.add(r);var a=function(){e==null||e(),n()};i.queue.length?(i.completes.push(a),i.ticking||(i.ticking=!0,Ct.system.addOnce(i.tick,i,oe.UTILITY))):a()})},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],e=!1;if(r&&!r._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,r)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Ct.system.addOnce(this.tick,this,oe.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var i=0,n=a.length;i<n;i++)a[i]()}},t.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},t.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},t.prototype.add=function(r){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](r,this.queue);e++);if(r instanceof zt)for(var e=r.children.length-1;e>=0;e--)this.add(r.children[e]);return this},t.prototype.destroy=function(){this.ticking&&Ct.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Ah(t,r){return r instanceof K?(r._glTextures[t.CONTEXT_UID]||t.texture.bind(r),!0):!1}function T_(t,r){if(!(r instanceof wi))return!1;var e=r.geometry;r.finishPoly(),e.updateBatches();for(var i=e.batches,n=0;n<i.length;n++){var a=i[n].style.texture;a&&Ah(t,a.baseTexture)}return e.batchable||t.geometry.bind(e,r._resolveDirectShader(t)),!0}function E_(t,r){return t instanceof wi?(r.push(t),!0):!1}var I_=function(t){c_(r,t);function r(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(E_),i.registerUploadHook(Ah),i.registerUploadHook(T_),i}return r.extension={name:"prepare",type:at.RendererPlugin},r}(x_);/*!
 * @pixi/spritesheet - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var C_=function(){function t(r,e,i){i===void 0&&(i=null),this.linkedSheets=[],this._texture=r instanceof j?r:null,this.baseTexture=r instanceof K?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(r){r===void 0&&(r=null);var e=this.data.meta.scale,i=bi(r,null);return i===null&&(i=e!==void 0?parseFloat(e):1),i!==1&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(r){var e=this;return r&&jt("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(i){e._callback=function(n){r==null||r(n),i(n)},e._batchIndex=0,e._frameKeys.length<=t.BATCH_SIZE?(e._processFrames(0),e._processAnimations(),e._parseComplete()):e._nextBatch()})},t.prototype._processFrames=function(r){for(var e=r,i=t.BATCH_SIZE;e-r<i&&e<this._frameKeys.length;){var n=this._frameKeys[e],a=this._frames[n],o=a.frame;if(o){var s=null,l=null,u=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,h=new J(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a.rotated?s=new J(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):s=new J(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(l=new J(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new j(this.baseTexture,s,h,l,a.rotated?2:0,a.anchor),j.addToCache(this.textures[n],n)}e++}},t.prototype._processAnimations=function(){var r=this.data.animations||{};for(var e in r){this.animations[e]=[];for(var i=0;i<r[e].length;i++){var n=r[e][i];this.animations[e].push(this.textures[n])}}},t.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},t.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){r._batchIndex*t.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())},0)},t.prototype.destroy=function(r){var e;r===void 0&&(r=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),w_=function(){function t(){}return t.use=function(r,e){var i,n,a=this,o=r.name+"_image";if(!r.data||r.type!==mt.TYPE.JSON||!r.data.frames||a.resources[o]){e();return}var s=(n=(i=r.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(s))for(var l=function(p){if(typeof p!="string")return"continue";var v=p.replace(".json",""),m=We.resolve(r.url.replace(a.baseUrl,""),p);if(a.resources[v]||Object.values(a.resources).some(function(g){return We.format(We.parse(g.url))===m}))return"continue";var _={crossOrigin:r.crossOrigin,loadType:mt.LOAD_TYPE.XHR,xhrType:mt.XHR_RESPONSE_TYPE.JSON,parentResource:r,metadata:r.metadata};a.add(v,m,_)},u=0,h=s;u<h.length;u++){var f=h[u];l(f)}var c={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},d=t.getResourcePath(r,a.baseUrl);a.add(o,d,c,function(v){if(v.error){e(v.error);return}var m=new C_(v.texture,r.data,r.url);m.parse().then(function(){r.spritesheet=m,r.textures=m.textures,e()})})},t.getResourcePath=function(r,e){return r.isDataUrl?r.data.meta.image:We.resolve(r.url.replace(e,""),r.data.meta.image)},t.extension=at.Loader,t}();/*!
 * @pixi/sprite-tiling - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ia=function(t,r){return ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ia(t,r)};function Nh(t,r){ia(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var dr=new ft;(function(t){Nh(r,t);function r(e,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var a=t.call(this,e)||this;return a.tileTransform=new ih,a._width=i,a._height=n,a.uvMatrix=a.texture.uvMatrix||new Na(e),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(e){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,i,n,a)},r.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new J),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,dr);var i=this._width,n=this._height,a=-i*this.anchor._x;if(dr.x>=a&&dr.x<a+i){var o=-n*this.anchor._y;if(dr.y>=o&&dr.y<o+n)return!0}return!1},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},r.from=function(e,i){var n=e instanceof j?e:j.from(e,i);return new r(n,i.width,i.height)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),r})(ve);var R_=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Bs=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,A_=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,N_=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,P_=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,hi=new Et,U_=function(t){Nh(r,t);function r(e){var i=t.call(this,e)||this;return e.runners.contextChange.add(i),i.quad=new hh,i.state=Se.for2d(),i}return r.prototype.contextChange=function(){var e=this.renderer,i={globals:e.globalUniforms};this.simpleShader=de.from(Bs,R_,i),this.shader=e.context.webGLVersion>1?de.from(N_,P_,i):de.from(Bs,A_,i)},r.prototype.render=function(e){var i=this.renderer,n=this.quad,a=n.vertices;a[0]=a[6]=e._width*-e.anchor.x,a[1]=a[3]=e._height*-e.anchor.y,a[2]=a[4]=e._width*(1-e.anchor.x),a[5]=a[7]=e._height*(1-e.anchor.y);var o=e.uvRespectAnchor?e.anchor.x:0,s=e.uvRespectAnchor?e.anchor.y:0;a=n.uvs,a[0]=a[6]=-o,a[1]=a[3]=-s,a[2]=a[4]=1-o,a[5]=a[7]=1-s,n.invalidate();var l=e._texture,u=l.baseTexture,h=u.alphaMode>0,f=e.tileTransform.localTransform,c=e.uvMatrix,d=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;d&&(u._glTextures[i.CONTEXT_UID]?d=u.wrapMode!==ie.CLAMP:u.wrapMode===ie.CLAMP&&(u.wrapMode=ie.REPEAT));var p=d?this.simpleShader:this.shader,v=l.width,m=l.height,_=e._width,g=e._height;hi.set(f.a*v/_,f.b*v/g,f.c*m/_,f.d*m/g,f.tx/_,f.ty/g),hi.invert(),d?hi.prepend(c.mapCoord):(p.uniforms.uMapCoord=c.mapCoord.toArray(!0),p.uniforms.uClampFrame=c.uClampFrame,p.uniforms.uClampOffset=c.uClampOffset),p.uniforms.uTransform=hi.toArray(!0),p.uniforms.uColor=th(e.tint,e.worldAlpha,p.uniforms.uColor,h),p.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),p.uniforms.uSampler=l,i.shader.bind(p),i.geometry.bind(n),this.state.blendMode=Qu(e.blendMode,h),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r.extension={name:"tilingSprite",type:at.RendererPlugin},r}(Si);/*!
 * @pixi/mesh - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var na=function(t,r){return na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},na(t,r)};function Ua(t,r){na(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var O_=function(){function t(r,e){this.uvBuffer=r,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(r){if(!(!r&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),pn=new ft,Ms=new pi,Nr=function(t){Ua(r,t);function r(e,i,n,a){a===void 0&&(a=Gt.TRIANGLES);var o=t.call(this)||this;return o.geometry=e,o.shader=i,o.state=n||Se.for2d(),o.drawMode=a,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=U.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),r.prototype._render=function(e){var i=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===Gt.TRIANGLES&&i.length<r.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},r.prototype._renderDefault=function(e){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),e.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(i),e.state.set(this.state),e.geometry.bind(this.geometry,i),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(e){var i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var a=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[a]),e.plugins[a].render(this)},r.prototype.calculateVertices=function(){var e=this.geometry,i=e.buffers[0],n=i.data,a=i._updateID;if(!(a===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var o=this.transform.worldTransform,s=o.a,l=o.b,u=o.c,h=o.d,f=o.tx,c=o.ty,d=this.vertexData,p=0;p<d.length/2;p++){var v=n[p*2],m=n[p*2+1];d[p*2]=s*v+u*m+f,d[p*2+1]=l*v+h*m+c}if(this._roundPixels)for(var _=U.RESOLUTION,p=0;p<d.length;++p)d[p]=Math.round((d[p]*_|0)/_);this.vertexDirty=a}},r.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new O_(e,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,pn);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=Ms.points,a=this.geometry.getIndex().data,o=a.length,s=this.drawMode===4?3:1,l=0;l+2<o;l+=s){var u=a[l]*2,h=a[l+1]*2,f=a[l+2]*2;if(n[0]=i[u],n[1]=i[u+1],n[2]=i[h],n[3]=i[h+1],n[4]=i[f],n[5]=i[f+1],Ms.contains(pn.x,pn.y))return!0}return!1},r.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r}(zt),S_=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,F_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Pr=function(t){Ua(r,t);function r(e,i){var n=this,a={uSampler:e,alpha:1,uTextureMatrix:Et.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(a,i.uniforms),n=t.call(this,i.program||Mr.from(F_,S_),a)||this,n._colorDirty=!1,n.uvMatrix=new Na(e),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(r.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),r.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;th(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},r}(de),Fi=function(t){Ua(r,t);function r(e,i,n){var a=t.call(this)||this,o=new Tt(e),s=new Tt(i,!0),l=new Tt(n,!0,!0);return a.addAttribute("aVertexPosition",o,2,!1,G.FLOAT).addAttribute("aTextureCoord",s,2,!1,G.FLOAT).addIndex(l),a._updateId=-1,a}return Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r}(Br);/*!
 * @pixi/text-bitmap - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var aa=function(t,r){return aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},aa(t,r)};function L_(t,r){aa(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Ri=function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t}(),G_=function(){function t(){}return t.test=function(r){return typeof r=="string"&&r.indexOf("info face=")===0},t.parse=function(r){var e=r.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in e){var a=e[n].match(/^[a-z]+/gm)[0],o=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var l in o){var u=o[l].split("="),h=u[0],f=u[1].replace(/"/gm,""),c=parseFloat(f),d=isNaN(c)?f:c;s[h]=d}i[a].push(s)}var p=new Ri;return i.info.forEach(function(v){return p.info.push({face:v.face,size:parseInt(v.size,10)})}),i.common.forEach(function(v){return p.common.push({lineHeight:parseInt(v.lineHeight,10)})}),i.page.forEach(function(v){return p.page.push({id:parseInt(v.id,10),file:v.file})}),i.char.forEach(function(v){return p.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),i.kerning.forEach(function(v){return p.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),i.distanceField.forEach(function(v){return p.distanceField.push({distanceRange:parseInt(v.distanceRange,10),fieldType:v.fieldType})}),p},t}(),oa=function(){function t(){}return t.test=function(r){return r instanceof XMLDocument&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(r){for(var e=new Ri,i=r.getElementsByTagName("info"),n=r.getElementsByTagName("common"),a=r.getElementsByTagName("page"),o=r.getElementsByTagName("char"),s=r.getElementsByTagName("kerning"),l=r.getElementsByTagName("distanceField"),u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(var u=0;u<n.length;u++)e.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(var u=0;u<a.length;u++)e.page.push({id:parseInt(a[u].getAttribute("id"),10)||0,file:a[u].getAttribute("file")});for(var u=0;u<o.length;u++){var h=o[u];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(var u=0;u<s.length;u++)e.kerning.push({first:parseInt(s[u].getAttribute("first"),10),second:parseInt(s[u].getAttribute("second"),10),amount:parseInt(s[u].getAttribute("amount"),10)});for(var u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e},t}(),B_=function(){function t(){}return t.test=function(r){if(typeof r=="string"&&r.indexOf("<font>")>-1){var e=new globalThis.DOMParser().parseFromString(r,"text/xml");return oa.test(e)}return!1},t.parse=function(r){var e=new globalThis.DOMParser().parseFromString(r,"text/xml");return oa.parse(e)},t}(),vn=[G_,oa,B_];function Ph(t){for(var r=0;r<vn.length;r++)if(vn[r].test(t))return vn[r];return null}function M_(t,r,e,i,n,a){var o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,h=t.width/i-l-u*2,f=t.height/i-l-u*2,c=o.slice(),d=e.fillGradientStops.slice();if(!d.length)for(var p=c.length+1,v=1;v<p;++v)d.push(v/p);if(c.unshift(o[0]),d.unshift(0),c.push(o[o.length-1]),d.push(1),e.fillGradientType===Ar.LINEAR_VERTICAL){s=r.createLinearGradient(h/2,u,h/2,f+u);for(var m=0,_=a.fontProperties.fontSize+e.strokeThickness,g=_/f,v=0;v<n.length;v++)for(var y=a.lineHeight*v,T=0;T<c.length;T++){var x=0;typeof d[T]=="number"?x=d[T]:x=T/c.length;var b=y/f+x*g,R=Math.max(m,b);R=Math.min(R,1),s.addColorStop(R,c[T]),m=R}}else{s=r.createLinearGradient(u,f/2,h+u,f/2);for(var N=c.length+1,I=1,v=0;v<c.length;v++){var w=void 0;typeof d[v]=="number"?w=d[v]:w=I/N,s.addColorStop(w,c[v]),I++}}return s}function k_(t,r,e,i,n,a,o){var s=e.text,l=e.fontProperties;r.translate(i,n),r.scale(a,a);var u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(r.font=o.toFontString(),r.lineWidth=o.strokeThickness,r.textBaseline=o.textBaseline,r.lineJoin=o.lineJoin,r.miterLimit=o.miterLimit,r.fillStyle=M_(t,r,o,a,[s],e),r.strokeStyle=o.stroke,o.dropShadow){var f=o.dropShadowColor,c=wt(typeof f=="number"?f:Ot(f)),d=o.dropShadowBlur*a,p=o.dropShadowDistance*a;r.shadowColor="rgba("+c[0]*255+","+c[1]*255+","+c[2]*255+","+o.dropShadowAlpha+")",r.shadowBlur=d,r.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,r.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;o.stroke&&o.strokeThickness&&r.strokeText(s,u,h+e.lineHeight-l.descent),o.fill&&r.fillText(s,u,h+e.lineHeight-l.descent),r.setTransform(1,0,0,1,0,0),r.fillStyle="rgba(0, 0, 0, 0)"}function Uh(t){return Array.from?Array.from(t):t.split("")}function D_(t){typeof t=="string"&&(t=[t]);for(var r=[],e=0,i=t.length;e<i;e++){var n=t[e];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var a=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,l=o;s<=l;s++)r.push(String.fromCharCode(s))}else r.push.apply(r,Uh(n))}if(r.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return r}function vi(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Ve=function(){function t(r,e,i){var n,a,o=r.info[0],s=r.common[0],l=r.page[0],u=r.distanceField[0],h=bi(l.file),f={};this._ownsTextures=i,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/h,this.chars={},this.pageTextures=f;for(var c=0;c<r.page.length;c++){var d=r.page[c],p=d.id,v=d.file;f[p]=e instanceof Array?e[c]:e[v],(u==null?void 0:u.fieldType)&&u.fieldType!=="none"&&(f[p].baseTexture.alphaMode=Mt.NO_PREMULTIPLIED_ALPHA)}for(var c=0;c<r.char.length;c++){var m=r.char[c],p=m.id,_=m.page,g=r.char[c],y=g.x,T=g.y,x=g.width,b=g.height,R=g.xoffset,N=g.yoffset,I=g.xadvance;y/=h,T/=h,x/=h,b/=h,R/=h,N/=h,I/=h;var w=new J(y+f[_].frame.x/h,T+f[_].frame.y/h,x,b);this.chars[p]={xOffset:R,yOffset:N,xAdvance:I,kerning:{},texture:new j(f[_].baseTexture,w),page:_}}for(var c=0;c<r.kerning.length;c++){var F=r.kerning[c],M=F.first,$=F.second,it=F.amount;M/=h,$/=h,it/=h,this.chars[$]&&(this.chars[$].kerning[M]=it)}this.distanceFieldRange=u==null?void 0:u.distanceRange,this.distanceFieldType=(a=(n=u==null?void 0:u.fieldType)===null||n===void 0?void 0:n.toLowerCase())!==null&&a!==void 0?a:"none"}return t.prototype.destroy=function(){for(var r in this.chars)this.chars[r].texture.destroy(),this.chars[r].texture=null;for(var r in this.pageTextures)this._ownsTextures&&this.pageTextures[r].destroy(!0),this.pageTextures[r]=null;this.chars=null,this.pageTextures=null},t.install=function(r,e,i){var n;if(r instanceof Ri)n=r;else{var a=Ph(r);if(!a)throw new Error("Unrecognized data format for font.");n=a.parse(r)}e instanceof j&&(e=[e]);var o=new t(n,e,i);return t.available[o.font]=o,o},t.uninstall=function(r){var e=t.available[r];if(!e)throw new Error("No font found named '"+r+"'");e.destroy(),delete t.available[r]},t.from=function(r,e,i){if(!r)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,i),a=n.chars,o=n.padding,s=n.resolution,l=n.textureWidth,u=n.textureHeight,h=D_(a),f=e instanceof tr?e:new tr(e),c=l,d=new Ri;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var p=0,v=0,m,_,g,y=0,T=[],x=0;x<h.length;x++){m||(m=U.ADAPTER.createCanvas(),m.width=l,m.height=u,_=m.getContext("2d"),g=new K(m,{resolution:s}),T.push(new j(g)),d.page.push({id:T.length-1,file:""}));var b=Yt.measureText(h[x],f,!1,m),R=b.width,N=Math.ceil(b.height),I=Math.ceil((f.fontStyle==="italic"?2:1)*R);if(v>=u-N*s){if(v===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+f.fontSize+"px fonts"));--x,m=null,_=null,g=null,v=0,p=0,y=0;continue}if(y=Math.max(N+b.fontProperties.descent,y),I*s+p>=c){--x,v+=y*s,v=Math.ceil(v),p=0,y=0;continue}k_(m,_,b,p,v,s,f);var w=vi(b.text);d.char.push({id:w,page:T.length-1,x:p/s,y:v/s,width:I,height:N,xoffset:0,yoffset:0,xadvance:Math.ceil(R-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),p+=(I+2*o)*s,p=Math.ceil(p)}for(var x=0,F=h.length;x<F;x++)for(var M=h[x],$=0;$<F;$++){var it=h[$],O=_.measureText(M).width,S=_.measureText(it).width,V=_.measureText(M+it).width,vt=V-(O+S);vt&&d.kerning.push({first:vi(M),second:vi(it),amount:vt})}var Q=new t(d,T,!0);return t.available[r]!==void 0&&t.uninstall(r),t.available[r]=Q,Q},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),H_=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,X_=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,$_=[],j_=[],ks=[];(function(t){L_(r,t);function r(e,i){i===void 0&&(i={});var n=t.call(this)||this;n._tint=16777215;var a=Object.assign({},r.styleDefaults,i),o=a.align,s=a.tint,l=a.maxWidth,u=a.letterSpacing,h=a.fontName,f=a.fontSize;if(!Ve.available[h])throw new Error('Missing BitmapFont "'+h+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=o,n._tint=s,n._fontName=h,n._fontSize=f||Ve.available[h].size,n.text=e,n._maxWidth=l,n._maxLineHeight=0,n._letterSpacing=u,n._anchor=new qe(function(){n.dirty=!0},n,0,0),n._roundPixels=U.ROUND_PIXELS,n.dirty=!0,n._resolution=U.RESOLUTION,n._autoResolution=!0,n._textureCache={},n}return r.prototype.updateText=function(){for(var e,i=Ve.available[this._fontName],n=this._fontSize/i.size,a=new ft,o=[],s=[],l=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=Uh(u),f=this._maxWidth*i.size/this._fontSize,c=i.distanceFieldType==="none"?$_:j_,d=null,p=0,v=0,m=0,_=-1,g=0,y=0,T=0,x=0,b=0;b<h.length;b++){var R=h[b],N=vi(R);if(/(?:\s)/.test(R)&&(_=b,g=p,x++),R==="\r"||R===`
`){s.push(p),l.push(-1),v=Math.max(v,p),++m,++y,a.x=0,a.y+=i.lineHeight,d=null,x=0;continue}var I=i.chars[N];if(!!I){d&&I.kerning[d]&&(a.x+=I.kerning[d]);var w=ks.pop()||{texture:j.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ft};w.texture=I.texture,w.line=m,w.charCode=N,w.position.x=a.x+I.xOffset+this._letterSpacing/2,w.position.y=a.y+I.yOffset,w.prevSpaces=x,o.push(w),p=w.position.x+Math.max(I.xAdvance,I.texture.orig.width),a.x+=I.xAdvance+this._letterSpacing,T=Math.max(T,I.yOffset+I.texture.height),d=N,_!==-1&&f>0&&a.x>f&&(++y,Je(o,1+_-y,1+b-_),b=_,_=-1,s.push(g),l.push(o.length>0?o[o.length-1].prevSpaces:0),v=Math.max(v,g),m++,a.x=0,a.y+=i.lineHeight,d=null,x=0)}}var F=h[h.length-1];F!=="\r"&&F!==`
`&&(/(?:\s)/.test(F)&&(p=g),s.push(p),v=Math.max(v,p),l.push(-1));for(var M=[],b=0;b<=m;b++){var $=0;this._align==="right"?$=v-s[b]:this._align==="center"?$=(v-s[b])/2:this._align==="justify"&&($=l[b]<0?0:(v-s[b])/l[b]),M.push($)}for(var it=o.length,O={},S=[],V=this._activePagesMeshData,b=0;b<V.length;b++)c.push(V[b]);for(var b=0;b<it;b++){var vt=o[b].texture,Q=vt.baseTexture.uid;if(!O[Q]){var E=c.pop();if(!E){var C=new Fi,P=void 0,L=void 0;i.distanceFieldType==="none"?(P=new Pr(j.EMPTY),L=B.NORMAL):(P=new Pr(j.EMPTY,{program:Mr.from(X_,H_),uniforms:{uFWidth:0}}),L=B.NORMAL_NPM);var k=new Nr(C,P);k.blendMode=L,E={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:k,vertices:null,uvs:null,indices:null}}E.index=0,E.indexCount=0,E.vertexCount=0,E.uvsCount=0,E.total=0;var W=this._textureCache;W[Q]=W[Q]||new j(vt.baseTexture),E.mesh.texture=W[Q],E.mesh.tint=this._tint,S.push(E),O[Q]=E}O[Q].total++}for(var b=0;b<V.length;b++)S.indexOf(V[b])===-1&&this.removeChild(V[b].mesh);for(var b=0;b<S.length;b++)S[b].mesh.parent!==this&&this.addChild(S[b].mesh);this._activePagesMeshData=S;for(var b in O){var E=O[b],H=E.total;if(!(((e=E.indices)===null||e===void 0?void 0:e.length)>6*H)||E.vertices.length<Nr.BATCHABLE_SIZE*2)E.vertices=new Float32Array(4*2*H),E.uvs=new Float32Array(4*2*H),E.indices=new Uint16Array(6*H);else for(var Z=E.total,rt=E.vertices,tt=Z*4*2;tt<rt.length;tt++)rt[tt]=0;E.mesh.size=6*H}for(var b=0;b<it;b++){var R=o[b],et=R.position.x+M[R.line]*(this._align==="justify"?R.prevSpaces:1);this._roundPixels&&(et=Math.round(et));var X=et*n,Y=R.position.y*n,vt=R.texture,D=O[vt.baseTexture.uid],ut=vt.frame,ot=vt._uvs,q=D.index++;D.indices[q*6+0]=0+q*4,D.indices[q*6+1]=1+q*4,D.indices[q*6+2]=2+q*4,D.indices[q*6+3]=0+q*4,D.indices[q*6+4]=2+q*4,D.indices[q*6+5]=3+q*4,D.vertices[q*8+0]=X,D.vertices[q*8+1]=Y,D.vertices[q*8+2]=X+ut.width*n,D.vertices[q*8+3]=Y,D.vertices[q*8+4]=X+ut.width*n,D.vertices[q*8+5]=Y+ut.height*n,D.vertices[q*8+6]=X,D.vertices[q*8+7]=Y+ut.height*n,D.uvs[q*8+0]=ot.x0,D.uvs[q*8+1]=ot.y0,D.uvs[q*8+2]=ot.x1,D.uvs[q*8+3]=ot.y1,D.uvs[q*8+4]=ot.x2,D.uvs[q*8+5]=ot.y2,D.uvs[q*8+6]=ot.x3,D.uvs[q*8+7]=ot.y3}this._textWidth=v*n,this._textHeight=(a.y+i.lineHeight)*n;for(var b in O){var E=O[b];if(this.anchor.x!==0||this.anchor.y!==0)for(var kt=0,ke=this._textWidth*this.anchor.x,Hr=this._textHeight*this.anchor.y,Ya=0;Ya<E.total;Ya++)E.vertices[kt++]-=ke,E.vertices[kt++]-=Hr,E.vertices[kt++]-=ke,E.vertices[kt++]-=Hr,E.vertices[kt++]-=ke,E.vertices[kt++]-=Hr,E.vertices[kt++]-=ke,E.vertices[kt++]-=Hr;this._maxLineHeight=T*n;var qa=E.mesh.geometry.getBuffer("aVertexPosition"),Za=E.mesh.geometry.getBuffer("aTextureCoord"),Ka=E.mesh.geometry.getIndex();qa.data=E.vertices,Za.data=E.uvs,Ka.data=E.indices,qa.update(),Za.update(),Ka.update()}for(var b=0;b<o.length;b++)ks.push(o[b])},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var i=Ve.available[this._fontName],n=i.distanceFieldRange,a=i.distanceFieldType,o=i.size;if(a!=="none")for(var s=this.worldTransform,l=s.a,u=s.b,h=s.c,f=s.d,c=Math.sqrt(l*l+u*u),d=Math.sqrt(h*h+f*f),p=(Math.abs(c)+Math.abs(d))/2,v=this._fontSize/o,m=0,_=this._activePagesMeshData;m<_.length;m++){var g=_[m];g.mesh.shader.uniforms.uFWidth=p*n*v*this._resolution}t.prototype._render.call(this,e)},r.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!Ve.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e==null?"":e),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),r.prototype.destroy=function(e){var i=this._textureCache;for(var n in i){var a=i[n];a.destroy(),delete i[n]}this._textureCache=null,t.prototype.destroy.call(this,e)},r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r})(zt);var V_=function(){function t(){}return t.add=function(){mt.setExtensionXhrType("fnt",mt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(r,e){var i=Ph(r.data);if(!i){e();return}for(var n=t.getBaseUrl(this,r),a=i.parse(r.data),o={},s=function(v){o[v.metadata.pageFile]=v.texture,Object.keys(o).length===a.page.length&&(r.bitmapFont=Ve.install(a,o,!0),e())},l=0;l<a.page.length;++l){var u=a.page[l].file,h=n+u,f=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===h){d.metadata.pageFile=u,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}if(!f){var p={crossOrigin:r.crossOrigin,loadType:mt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},r.metadata.imageMetadata),parentResource:r};this.add(h,p,s)}}},t.getBaseUrl=function(r,e){var i=e.isDataUrl?"":t.dirname(e.url);return e.isDataUrl&&(i==="."&&(i=""),r.baseUrl&&i&&r.baseUrl.charAt(r.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(r.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},t.dirname=function(r){var e=r.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===r?".":e===""?"/":e},t.extension=at.Loader,t}();/*!
 * @pixi/filter-alpha - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sa=function(t,r){return sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},sa(t,r)};function z_(t,r){sa(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var W_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(t){z_(r,t);function r(e){e===void 0&&(e=1);var i=t.call(this,Dm,W_,{uAlpha:1})||this;return i.alpha=e,i}return Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),r})(yt);/*!
 * @pixi/filter-blur - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var la=function(t,r){return la=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},la(t,r)};function Oh(t,r){la(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Y_=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function q_(t,r){var e=Math.ceil(t/2),i=Y_,n="",a;r?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var s=a.replace("%index%",o.toString());s=s.replace("%sampleIndex%",o-(e-1)+".0"),n+=s,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",t.toString()),i}var Z_={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},K_=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function J_(t){for(var r=Z_[t],e=r.length,i=K_,n="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,s=0;s<t;s++){var l=a.replace("%index%",s.toString());o=s,s>=e&&(o=t-s-1),l=l.replace("%value%",r[o].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",t.toString()),i}/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ds;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Ds||(Ds={}));var Hs;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Hs||(Hs={}));var Xs;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Xs||(Xs={}));var $s;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})($s||($s={}));var js;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(js||(js={}));var Vs;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Vs||(Vs={}));var zs;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(zs||(zs={}));var Ws;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Ws||(Ws={}));var Ys;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Ys||(Ys={}));var qs;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(qs||(qs={}));var Zs;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Zs||(Zs={}));var Ks;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Ks||(Ks={}));var Js;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Js||(Js={}));var Ur;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Ur||(Ur={}));var Qs;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Qs||(Qs={}));var tl;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(tl||(tl={}));var el;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(el||(el={}));var rl;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(rl||(rl={}));var il;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(il||(il={}));var nl;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(nl||(nl={}));var al=function(t){Oh(r,t);function r(e,i,n,a,o){i===void 0&&(i=8),n===void 0&&(n=4),a===void 0&&(a=U.FILTER_RESOLUTION),o===void 0&&(o=5);var s=this,l=q_(o,e),u=J_(o);return s=t.call(this,l,u)||this,s.horizontal=e,s.resolution=a,s._quality=0,s.quality=n,s.blur=i,s}return r.prototype.apply=function(e,i,n,a){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/i.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,i,n,a);else{var o=e.getFilterTexture(),s=e.renderer,l=i,u=o;this.state.blend=!1,e.applyFilter(this,l,u,Ur.CLEAR);for(var h=1;h<this.passes-1;h++){e.bindAndClear(l,Ur.BLIT),this.uniforms.uSampler=u;var f=u;u=l,l=f,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,n,a),e.returnFilterTexture(o)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),r}(yt),Q_=function(t){Oh(r,t);function r(e,i,n,a){e===void 0&&(e=8),i===void 0&&(i=4),n===void 0&&(n=U.FILTER_RESOLUTION),a===void 0&&(a=5);var o=t.call(this)||this;return o.blurXFilter=new al(!0,e,i,n,a),o.blurYFilter=new al(!1,e,i,n,a),o.resolution=n,o.quality=i,o.blur=e,o.repeatEdgePixels=!1,o}return r.prototype.apply=function(e,i,n,a){var o=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(o&&s){var l=e.getFilterTexture();this.blurXFilter.apply(e,i,l,Ur.CLEAR),this.blurYFilter.apply(e,l,n,a),e.returnFilterTexture(l)}else s?this.blurYFilter.apply(e,i,n,a):this.blurXFilter.apply(e,i,n,a)},r.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),r}(yt);/*!
 * @pixi/filter-color-matrix - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ua=function(t,r){return ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ua(t,r)};function tg(t,r){ua(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var eg=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,er=function(t){tg(r,t);function r(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=t.call(this,gh,eg,i)||this,e.alpha=1,e}return r.prototype._loadMatrix=function(e,i){i===void 0&&(i=!1);var n=e;i&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},r.prototype._multiply=function(e,i,n){return e[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],e[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],e[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],e[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],e[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],e[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],e[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],e[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],e[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],e[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],e[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],e[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],e[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],e[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],e[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],e[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],e[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],e[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],e[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],e[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],e},r.prototype._colorMatrix=function(e){var i=new Float32Array(e);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},r.prototype.brightness=function(e,i){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.tint=function(e,i){var n=e>>16&255,a=e>>8&255,o=e&255,s=[n/255,0,0,0,0,0,a/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(s,i)},r.prototype.greyscale=function(e,i){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.blackAndWhite=function(e){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.hue=function(e,i){e=(e||0)/180*Math.PI;var n=Math.cos(e),a=Math.sin(e),o=Math.sqrt,s=1/3,l=o(s),u=n+(1-n)*s,h=s*(1-n)-l*a,f=s*(1-n)+l*a,c=s*(1-n)+l*a,d=n+s*(1-n),p=s*(1-n)-l*a,v=s*(1-n)-l*a,m=s*(1-n)+l*a,_=n+s*(1-n),g=[u,h,f,0,0,c,d,p,0,0,v,m,_,0,0,0,0,0,1,0];this._loadMatrix(g,i)},r.prototype.contrast=function(e,i){var n=(e||0)+1,a=-.5*(n-1),o=[n,0,0,0,a,0,n,0,0,a,0,0,n,0,a,0,0,0,1,0];this._loadMatrix(o,i)},r.prototype.saturate=function(e,i){e===void 0&&(e=0);var n=e*2/3+1,a=(n-1)*-.5,o=[n,a,a,0,0,a,n,a,0,0,a,a,n,0,0,0,0,0,1,0];this._loadMatrix(o,i)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(e){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.sepia=function(e){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.technicolor=function(e){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.polaroid=function(e){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.toBGR=function(e){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.kodachrome=function(e){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.browni=function(e){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.vintage=function(e){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.colorTone=function(e,i,n,a,o){e=e||.2,i=i||.15,n=n||16770432,a=a||3375104;var s=(n>>16&255)/255,l=(n>>8&255)/255,u=(n&255)/255,h=(a>>16&255)/255,f=(a>>8&255)/255,c=(a&255)/255,d=[.3,.59,.11,0,0,s,l,u,e,0,h,f,c,i,0,s-h,l-f,u-c,0,0];this._loadMatrix(d,o)},r.prototype.night=function(e,i){e=e||.1;var n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.predator=function(e,i){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,i)},r.prototype.lsd=function(e){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(r.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),r}(yt);er.prototype.grayscale=er.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ha=function(t,r){return ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ha(t,r)};function rg(t,r){ha(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var ig=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,ng=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(t){rg(r,t);function r(e,i){var n=this,a=new Et;return e.renderable=!1,n=t.call(this,ng,ig,{mapSampler:e._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=e,n.maskMatrix=a,i==null&&(i=20),n.scale=new ft(i,i),n}return r.prototype.apply=function(e,i,n,a){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,s=Math.sqrt(o.a*o.a+o.b*o.b),l=Math.sqrt(o.c*o.c+o.d*o.d);s!==0&&l!==0&&(this.uniforms.rotation[0]=o.a/s,this.uniforms.rotation[1]=o.b/s,this.uniforms.rotation[2]=o.c/l,this.uniforms.rotation[3]=o.d/l),e.applyFilter(this,i,n,a)},Object.defineProperty(r.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),r})(yt);/*!
 * @pixi/filter-fxaa - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fa=function(t,r){return fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},fa(t,r)};function ag(t,r){fa(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var og=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,sg=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(t){ag(r,t);function r(){return t.call(this,og,sg)||this}return r})(yt);/*!
 * @pixi/filter-noise - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ca=function(t,r){return ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ca(t,r)};function lg(t,r){ca(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var ug=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(t){lg(r,t);function r(e,i){e===void 0&&(e=.5),i===void 0&&(i=Math.random());var n=t.call(this,gh,ug,{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return Object.defineProperty(r.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),r})(yt);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ol;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(ol||(ol={}));var sl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(sl||(sl={}));var ll;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ll||(ll={}));var ul;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(ul||(ul={}));var hl;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(hl||(hl={}));var fl;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(fl||(fl={}));var cl;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(cl||(cl={}));var dl;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(dl||(dl={}));var pl;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(pl||(pl={}));var vl;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(vl||(vl={}));var ml;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ml||(ml={}));var _l;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(_l||(_l={}));var gl;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(gl||(gl={}));var yl;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(yl||(yl={}));var bl;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(bl||(bl={}));var xl;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(xl||(xl={}));var Tl;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Tl||(Tl={}));var El;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(El||(El={}));var da;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(da||(da={}));var Il;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Il||(Il={}));var Sh=new Et;gt.prototype._cacheAsBitmap=!1;gt.prototype._cacheData=null;gt.prototype._cacheAsBitmapResolution=null;gt.prototype._cacheAsBitmapMultisample=da.NONE;var hg=function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t}();Object.defineProperties(gt.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var r;t?(this._cacheData||(this._cacheData=new hg),r=this._cacheData,r.originalRender=this.render,r.originalRenderCanvas=this.renderCanvas,r.originalUpdateTransform=this.updateTransform,r.originalCalculateBounds=this.calculateBounds,r.originalGetLocalBounds=this.getLocalBounds,r.originalDestroy=this.destroy,r.originalContainsPoint=this.containsPoint,r.originalMask=this._mask,r.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(r=this._cacheData,r.sprite&&this._destroyCachedDisplayObject(),this.render=r.originalRender,this.renderCanvas=r.originalRenderCanvas,this.calculateBounds=r.originalCalculateBounds,this.getLocalBounds=r.originalGetLocalBounds,this.destroy=r.originalDestroy,this.updateTransform=r.originalUpdateTransform,this.containsPoint=r.originalContainsPoint,this._mask=r.originalMask,this.filterArea=r.originalFilterArea)}}}});gt.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};gt.prototype._initCachedDisplayObject=function(r){var e;if(!(this._cacheData&&this._cacheData.sprite)){var i=this.alpha;this.alpha=1,r.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var a=this.filters[0].padding;n.pad(a)}n.ceil(U.RESOLUTION);var o=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),l=r.renderTexture.destinationFrame.clone(),u=r.projection.transform,h=Ue.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||r.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:r.multisample}),f="cacheAsBitmap_"+Pe();this._cacheData.textureCacheId=f,K.addToCache(h.baseTexture,f),j.addToCache(h,f);var c=this.transform.localTransform.copyTo(Sh).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:h,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=u,r.renderTexture.bind(o,s,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var d=new ve(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};gt.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};gt.prototype._initCachedDisplayObjectCanvas=function(r){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=r.context,a=r._projTransform;e.ceil(U.RESOLUTION);var o=Ue.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+Pe();this._cacheData.textureCacheId=s,K.addToCache(o.baseTexture,s),j.addToCache(o,s);var l=Sh;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.context=n,r._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var u=new ve(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};gt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};gt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};gt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,K.removeFromCache(this._cacheData.textureCacheId),j.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};gt.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */gt.prototype.name=null;zt.prototype.getChildByName=function(r,e){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===r)return this.children[i];if(e)for(var i=0,n=this.children.length;i<n;i++){var a=this.children[i];if(!!a.getChildByName){var o=a.getChildByName(r,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */gt.prototype.getGlobalPosition=function(r,e){return r===void 0&&(r=new ft),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};/*!
 * @pixi/app - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fg=function(){function t(){}return t.init=function(r){var e=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!e._resizeTo||(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(!!e._resizeTo){e.cancelResize();var i,n;if(e._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{var a=e._resizeTo,o=a.clientWidth,s=a.clientHeight;i=o,n=s}e.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=r.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=at.Application,t}();/*!
 * @pixi/settings - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Cl;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Cl||(Cl={}));var wl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(wl||(wl={}));var Rl;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Rl||(Rl={}));var Al;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Al||(Al={}));var Nl;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Nl||(Nl={}));var Pl;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Pl||(Pl={}));var Ul;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Ul||(Ul={}));var Ol;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Ol||(Ol={}));var Sl;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Sl||(Sl={}));var pa;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(pa||(pa={}));var va;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(va||(va={}));var ma;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(ma||(ma={}));var Fl;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Fl||(Fl={}));var Ll;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Ll||(Ll={}));var _a;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(_a||(_a={}));var gr;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(gr||(gr={}));var Gl;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Gl||(Gl={}));var Bl;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Bl||(Bl={}));var ga;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(ga||(ga={}));var Ml;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Ml||(Ml={}));var cg={createCanvas:function(t,r){var e=document.createElement("canvas");return e.width=t,e.height=r,e},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,r){return fetch(t,r)}},mn=/iPhone/i,kl=/iPod/i,Dl=/iPad/i,Hl=/\biOS-universal(?:.+)Mac\b/i,_n=/\bAndroid(?:.+)Mobile\b/i,Xl=/Android/i,je=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,fi=/Silk/i,Jt=/Windows Phone/i,$l=/\bWindows(?:.+)ARM\b/i,jl=/BlackBerry/i,Vl=/BB10/i,zl=/Opera Mini/i,Wl=/\b(CriOS|Chrome)(?:.+)Mobile/i,Yl=/Mobile(?:.+)Firefox\b/i,ql=function(t){return typeof t!="undefined"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream=="undefined"};function dg(t){return function(r){return r.test(t)}}function pg(t){var r={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator!="undefined"?r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?r.userAgent=t:t&&t.userAgent&&(r={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var e=r.userAgent,i=e.split("[FBAN");typeof i[1]!="undefined"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]!="undefined"&&(e=i[0]);var n=dg(e),a={apple:{phone:n(mn)&&!n(Jt),ipod:n(kl),tablet:!n(mn)&&(n(Dl)||ql(r))&&!n(Jt),universal:n(Hl),device:(n(mn)||n(kl)||n(Dl)||n(Hl)||ql(r))&&!n(Jt)},amazon:{phone:n(je),tablet:!n(je)&&n(fi),device:n(je)||n(fi)},android:{phone:!n(Jt)&&n(je)||!n(Jt)&&n(_n),tablet:!n(Jt)&&!n(je)&&!n(_n)&&(n(fi)||n(Xl)),device:!n(Jt)&&(n(je)||n(fi)||n(_n)||n(Xl))||n(/\bokhttp\b/i)},windows:{phone:n(Jt),tablet:n($l),device:n(Jt)||n($l)},other:{blackberry:n(jl),blackberry10:n(Vl),opera:n(zl),firefox:n(Yl),chrome:n(Wl),device:n(jl)||n(Vl)||n(zl)||n(Yl)||n(Wl)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var Ze=pg(globalThis.navigator);function vg(){return!Ze.apple.device}function mg(t){var r=!0;if(Ze.tablet||Ze.phone){if(Ze.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var i=parseInt(e[1],10);i<11&&(r=!1)}}if(Ze.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var i=parseInt(e[1],10);i<7&&(r=!1)}}}return r?t:4}var Ai={ADAPTER:cg,MIPMAP_TEXTURES:ma.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:ga.NONE,SPRITE_MAX_TEXTURES:mg(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:_a.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:va.CLAMP,SCALE_MODE:pa.LINEAR,PRECISION_VERTEX:gr.HIGH,PRECISION_FRAGMENT:Ze.apple.device?gr.HIGH:gr.MEDIUM,CAN_UPLOAD_SAME_BUFFER:vg(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},gn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Oa(t,r,e){return e={path:r,exports:{},require:function(i,n){return _g(i,n==null?e.path:n)}},t(e,e.exports),e.exports}function _g(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}Oa(function(t){var r=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function a(l,u,h,f,c){if(typeof h!="function")throw new TypeError("The listener must be a function");var d=new n(h,f||l,c),p=e?e+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function s(){this._events=new i,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)r.call(h,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},s.prototype.listeners=function(u){var h=e?e+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,p=new Array(d);c<d;c++)p[c]=f[c].fn;return p},s.prototype.listenerCount=function(u){var h=e?e+u:u,f=this._events[h];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,h,f,c,d,p){var v=arguments,m=e?e+u:u;if(!this._events[m])return!1;var _=this._events[m],g=arguments.length,y,T;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),g){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,h),!0;case 3:return _.fn.call(_.context,h,f),!0;case 4:return _.fn.call(_.context,h,f,c),!0;case 5:return _.fn.call(_.context,h,f,c,d),!0;case 6:return _.fn.call(_.context,h,f,c,d,p),!0}for(T=1,y=new Array(g-1);T<g;T++)y[T-1]=v[T];_.fn.apply(_.context,y)}else{var x=_.length,b;for(T=0;T<x;T++)switch(_[T].once&&this.removeListener(u,_[T].fn,void 0,!0),g){case 1:_[T].fn.call(_[T].context);break;case 2:_[T].fn.call(_[T].context,h);break;case 3:_[T].fn.call(_[T].context,h,f);break;case 4:_[T].fn.call(_[T].context,h,f,c);break;default:if(!y)for(b=1,y=new Array(g-1);b<g;b++)y[b-1]=v[b];_[T].fn.apply(_[T].context,y)}}return!0},s.prototype.on=function(u,h,f){return a(this,u,h,f,!1)},s.prototype.once=function(u,h,f){return a(this,u,h,f,!0)},s.prototype.removeListener=function(u,h,f,c){var d=e?e+u:u;if(!this._events[d])return this;if(!h)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===h&&(!c||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var v=0,m=[],_=p.length;v<_;v++)(p[v].fn!==h||c&&!p[v].once||f&&p[v].context!==f)&&m.push(p[v]);m.length?this._events[d]=m.length===1?m[0]:m:o(this,d)}return this},s.prototype.removeAllListeners=function(u){var h;return u?(h=e?e+u:u,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,t.exports=s});Oa(function(t,r){(function(e){var i=r&&!r.nodeType&&r,n=t&&!t.nodeType&&t,a=typeof gn=="object"&&gn;(a.global===a||a.window===a||a.self===a)&&(e=a);var o,s=2147483647,l=36,u=1,h=26,f=38,c=700,d=72,p=128,v="-",m=/^xn--/,_=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=l-u,x=Math.floor,b=String.fromCharCode,R;function N(E){throw RangeError(y[E])}function I(E,C){for(var P=E.length,L=[];P--;)L[P]=C(E[P]);return L}function w(E,C){var P=E.split("@"),L="";P.length>1&&(L=P[0]+"@",E=P[1]),E=E.replace(g,".");var k=E.split("."),W=I(k,C).join(".");return L+W}function F(E){for(var C=[],P=0,L=E.length,k,W;P<L;)k=E.charCodeAt(P++),k>=55296&&k<=56319&&P<L?(W=E.charCodeAt(P++),(W&64512)==56320?C.push(((k&1023)<<10)+(W&1023)+65536):(C.push(k),P--)):C.push(k);return C}function M(E){return I(E,function(C){var P="";return C>65535&&(C-=65536,P+=b(C>>>10&1023|55296),C=56320|C&1023),P+=b(C),P}).join("")}function $(E){return E-48<10?E-22:E-65<26?E-65:E-97<26?E-97:l}function it(E,C){return E+22+75*(E<26)-((C!=0)<<5)}function O(E,C,P){var L=0;for(E=P?x(E/c):E>>1,E+=x(E/C);E>T*h>>1;L+=l)E=x(E/T);return x(L+(T+1)*E/(E+f))}function S(E){var C=[],P=E.length,L,k=0,W=p,H=d,Z,rt,tt,et,X,Y,D,ut,ot;for(Z=E.lastIndexOf(v),Z<0&&(Z=0),rt=0;rt<Z;++rt)E.charCodeAt(rt)>=128&&N("not-basic"),C.push(E.charCodeAt(rt));for(tt=Z>0?Z+1:0;tt<P;){for(et=k,X=1,Y=l;tt>=P&&N("invalid-input"),D=$(E.charCodeAt(tt++)),(D>=l||D>x((s-k)/X))&&N("overflow"),k+=D*X,ut=Y<=H?u:Y>=H+h?h:Y-H,!(D<ut);Y+=l)ot=l-ut,X>x(s/ot)&&N("overflow"),X*=ot;L=C.length+1,H=O(k-et,L,et==0),x(k/L)>s-W&&N("overflow"),W+=x(k/L),k%=L,C.splice(k++,0,W)}return M(C)}function V(E){var C,P,L,k,W,H,Z,rt,tt,et,X,Y=[],D,ut,ot,q;for(E=F(E),D=E.length,C=p,P=0,W=d,H=0;H<D;++H)X=E[H],X<128&&Y.push(b(X));for(L=k=Y.length,k&&Y.push(v);L<D;){for(Z=s,H=0;H<D;++H)X=E[H],X>=C&&X<Z&&(Z=X);for(ut=L+1,Z-C>x((s-P)/ut)&&N("overflow"),P+=(Z-C)*ut,C=Z,H=0;H<D;++H)if(X=E[H],X<C&&++P>s&&N("overflow"),X==C){for(rt=P,tt=l;et=tt<=W?u:tt>=W+h?h:tt-W,!(rt<et);tt+=l)q=rt-et,ot=l-et,Y.push(b(it(et+q%ot,0))),rt=x(q/ot);Y.push(b(it(rt,0))),W=O(P,ut,L==k),P=0,++L}++P,++C}return Y.join("")}function vt(E){return w(E,function(C){return m.test(C)?S(C.slice(4).toLowerCase()):C})}function Q(E){return w(E,function(C){return _.test(C)?"xn--"+V(C):C})}if(o={version:"1.3.2",ucs2:{decode:F,encode:M},decode:S,encode:V,toASCII:Q,toUnicode:vt},i&&n)if(t.exports==i)n.exports=o;else for(R in o)o.hasOwnProperty(R)&&(i[R]=o[R]);else e.punycode=o})(gn)});function gg(t,r){return Object.prototype.hasOwnProperty.call(t,r)}var yg=function(t,r,e,i){r=r||"&",e=e||"=";var n={};if(typeof t!="string"||t.length===0)return n;var a=/\+/g;t=t.split(r);var o=1e3;i&&typeof i.maxKeys=="number"&&(o=i.maxKeys);var s=t.length;o>0&&s>o&&(s=o);for(var l=0;l<s;++l){var u=t[l].replace(a,"%20"),h=u.indexOf(e),f,c,d,p;h>=0?(f=u.substr(0,h),c=u.substr(h+1)):(f=u,c=""),d=decodeURIComponent(f),p=decodeURIComponent(c),gg(n,d)?Array.isArray(n[d])?n[d].push(p):n[d]=[n[d],p]:n[d]=p}return n},pr=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},bg=function(t,r,e,i){return r=r||"&",e=e||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(n){var a=encodeURIComponent(pr(n))+e;return Array.isArray(t[n])?t[n].map(function(o){return a+encodeURIComponent(pr(o))}).join(r):a+encodeURIComponent(pr(t[n]))}).join(r):i?encodeURIComponent(pr(i))+e+encodeURIComponent(pr(t)):""};Oa(function(t,r){r.decode=r.parse=yg,r.encode=r.stringify=bg});/*!
 * @pixi/constants - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zl;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Zl||(Zl={}));var Kl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Kl||(Kl={}));var Jl;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Jl||(Jl={}));var Nt;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Nt||(Nt={}));var Ql;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ql||(Ql={}));var tu;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(tu||(tu={}));var eu;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(eu||(eu={}));var ru;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(ru||(ru={}));var iu;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(iu||(iu={}));var nu;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(nu||(nu={}));var au;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(au||(au={}));var ou;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(ou||(ou={}));var su;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(su||(su={}));var lu;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(lu||(lu={}));var uu;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(uu||(uu={}));var hu;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(hu||(hu={}));var fu;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(fu||(fu={}));var cu;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(cu||(cu={}));var du;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(du||(du={}));var pu;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(pu||(pu={}));/*!
 * @pixi/utils - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ai.RETINA_PREFIX=/@([0-9\.]+)x/;Ai.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function xg(){for(var t=[],r=[],e=0;e<32;e++)t[e]=e,r[e]=e;t[Nt.NORMAL_NPM]=Nt.NORMAL,t[Nt.ADD_NPM]=Nt.ADD,t[Nt.SCREEN_NPM]=Nt.SCREEN,r[Nt.NORMAL]=Nt.NORMAL_NPM,r[Nt.ADD]=Nt.ADD_NPM,r[Nt.SCREEN]=Nt.SCREEN_NPM;var i=[];return i.push(r),i.push(t),i}xg();var vu={};function Tg(t,r,e){if(e===void 0&&(e=3),!vu[r]){var i=new Error().stack;typeof i=="undefined"?console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r+`
Deprecated since v`+t),console.warn(i))),vu[r]=!0}}(function(){function t(r,e,i){this.canvas=Ai.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||Ai.RESOLUTION,this.resize(r,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(r,e){this.canvas.width=Math.round(r*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(r){this.canvas.width=Math.round(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(r){this.canvas.height=Math.round(r)},enumerable:!1,configurable:!0}),t})();var Fh=function(){function t(r){var e=this;this.stage=new zt,r=Object.assign({forceCanvas:!1},r),this.renderer=Bm(r),t._plugins.forEach(function(i){i.init.call(e,r)})}return t.registerPlugin=function(r){Tg("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),se.add({type:at.Application,ref:r})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(r,e){var i=this,n=t._plugins.slice(0);n.reverse(),n.forEach(function(a){a.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(r),this.renderer=null},t._plugins=[],t}();se.handleByList(at.Application,Fh._plugins);se.add(fg);/*!
 * @pixi/mesh-extras - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ya=function(t,r){return ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ya(t,r)};function ir(t,r){ya(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Eg=function(t){ir(r,t);function r(e,i,n,a){e===void 0&&(e=100),i===void 0&&(i=100),n===void 0&&(n=10),a===void 0&&(a=10);var o=t.call(this)||this;return o.segWidth=n,o.segHeight=a,o.width=e,o.height=i,o.build(),o}return r.prototype.build=function(){for(var e=this.segWidth*this.segHeight,i=[],n=[],a=[],o=this.segWidth-1,s=this.segHeight-1,l=this.width/o,u=this.height/s,h=0;h<e;h++){var f=h%this.segWidth,c=h/this.segWidth|0;i.push(f*l,c*u),n.push(f/o,c/s)}for(var d=o*s,h=0;h<d;h++){var p=h%o,v=h/o|0,m=v*this.segWidth+p,_=v*this.segWidth+p+1,g=(v+1)*this.segWidth+p,y=(v+1)*this.segWidth+p+1;a.push(m,_,g,_,y,g)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},r}(Fi),Ig=function(t){ir(r,t);function r(e,i,n){e===void 0&&(e=200),n===void 0&&(n=0);var a=t.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return a.points=i,a._width=e,a.textureScale=n,a.build(),a}return Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),r.prototype.build=function(){var e=this.points;if(!!e){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(e.length<1)){i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),a.data=new Uint16Array((e.length-1)*6));var o=n.data,s=a.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var l=0,u=e[0],h=this._width*this.textureScale,f=e.length,c=0;c<f;c++){var d=c*4;if(this.textureScale>0){var p=u.x-e[c].x,v=u.y-e[c].y,m=Math.sqrt(p*p+v*v);u=e[c],l+=m/h}else l=c/(f-1);o[d]=l,o[d+1]=0,o[d+2]=l,o[d+3]=1}for(var _=0,c=0;c<f-1;c++){var d=c*2;s[_++]=d,s[_++]=d+1,s[_++]=d+2,s[_++]=d+2,s[_++]=d+1,s[_++]=d+3}n.update(),a.update(),this.updateVertices()}}},r.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var i=e[0],n,a=0,o=0,s=this.buffers[0].data,l=e.length,u=0;u<l;u++){var h=e[u],f=u*4;u<e.length-1?n=e[u+1]:n=h,o=-(n.x-i.x),a=n.y-i.y;var c=Math.sqrt(a*a+o*o),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=c,o/=c,a*=d,o*=d,s[f]=h.x+a,s[f+1]=h.y+o,s[f+2]=h.x-a,s[f+3]=h.y-o,i=h}this.buffers[0].update()}},r.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},r}(Fi);(function(t){ir(r,t);function r(e,i,n){n===void 0&&(n=0);var a=this,o=new Ig(e.height,i,n),s=new Pr(e);return n>0&&(e.baseTexture.wrapMode=ie.REPEAT),a=t.call(this,o,s)||this,a.autoUpdate=!0,a}return r.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},r})(Nr);var Cg=function(t){ir(r,t);function r(e,i,n){var a=this,o=new Eg(e.width,e.height,i,n),s=new Pr(j.WHITE);return a=t.call(this,o,s)||this,a.texture=e,a.autoResize=!0,a}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,i=this.shader.texture,n=i.width,a=i.height;this.autoResize&&(e.width!==n||e.height!==a)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),r.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},r.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},r}(Nr);(function(t){ir(r,t);function r(e,i,n,a,o){e===void 0&&(e=j.EMPTY);var s=this,l=new Fi(i,n,a);l.getBuffer("aVertexPosition").static=!1;var u=new Pr(e);return s=t.call(this,l,u,null,o)||this,s.autoUpdate=!0,s}return Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),r.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},r})(Nr);var ci=10;(function(t){ir(r,t);function r(e,i,n,a,o){i===void 0&&(i=ci),n===void 0&&(n=ci),a===void 0&&(a=ci),o===void 0&&(o=ci);var s=t.call(this,j.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=i,s._rightWidth=a,s._topHeight=n,s._bottomHeight=o,s.texture=e,s}return r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),r.prototype.updateHorizontalVertices=function(){var e=this.vertices,i=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*i,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*i,e[25]=e[27]=e[29]=e[31]=this._height},r.prototype.updateVerticalVertices=function(){var e=this.vertices,i=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*i,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*i,e[6]=e[14]=e[22]=e[30]=this._width},r.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,a=this._height>n?1:this._height/n,o=Math.min(i,a);return o},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),r.prototype._refresh=function(){var e=this.texture,i=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,a=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=a*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},r})(Cg);/*!
 * @pixi/sprite-animated - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ba=function(t,r){return ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ba(t,r)};function wg(t,r){ba(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}(function(t){wg(r,t);function r(e,i){i===void 0&&(i=!0);var n=t.call(this,e[0]instanceof j?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return r.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ct.shared.add(this.update,this,oe.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(e){this.stop();var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(e){var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(e){if(!!this._playing){var i=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=i/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},r.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(e){for(var i=[],n=0;n<e.length;++n)i.push(j.from(e[n]));return new r(i)},r.fromImages=function(e){for(var i=[],n=0;n<e.length;++n)i.push(j.from(e[n]));return new r(i)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof j)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Ct.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ct.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r})(ve);/*!
 * pixi.js - v6.5.1
 * Compiled Sun, 24 Jul 2022 20:56:21 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */se.add(Km,i0,r0,q0,I_,bh,U_,V_,b0,V0,z0,w_,vv,f0);var Rg="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){vec4 col=texture2D(uSampler,vTextureCoord.xy);vec3 color=col.rgb;float luminance=color.r*0.299+color.g*0.587+color.b*0.114;float mn=min(min(color.r,color.g),color.b);float mx=max(max(color.r,color.g),color.b);float sat=(1.0-(mx-mn))*(1.0-mx)*luminance*5.0;vec3 lightness=vec3((mn+mx)/2.0);color=mix(color,mix(color,lightness,-value),sat);gl_FragColor=vec4(mix(color,lightness,(1.0-lightness)*(1.0-value)/2.0*abs(value)),col.a);}",Ag=typeof global=="object"&&global&&global.Object===Object&&global,Lh=Ag,Ng=typeof self=="object"&&self&&self.Object===Object&&self,Pg=Lh||Ng||Function("return this")(),qt=Pg,Ug=qt.Symbol,Wt=Ug,Gh=Object.prototype,Og=Gh.hasOwnProperty,Sg=Gh.toString,vr=Wt?Wt.toStringTag:void 0;function Fg(t){var r=Og.call(t,vr),e=t[vr];try{t[vr]=void 0;var i=!0}catch{}var n=Sg.call(t);return i&&(r?t[vr]=e:delete t[vr]),n}var Lg=Object.prototype,Gg=Lg.toString;function Bg(t){return Gg.call(t)}var Mg="[object Null]",kg="[object Undefined]",mu=Wt?Wt.toStringTag:void 0;function Fe(t){return t==null?t===void 0?kg:Mg:mu&&mu in Object(t)?Fg(t):Bg(t)}function Le(t){return t!=null&&typeof t=="object"}var Dg="[object Symbol]";function Sa(t){return typeof t=="symbol"||Le(t)&&Fe(t)==Dg}function Bh(t,r){for(var e=-1,i=t==null?0:t.length,n=Array(i);++e<i;)n[e]=r(t[e],e,t);return n}var Hg=Array.isArray,Ge=Hg,Xg=1/0,_u=Wt?Wt.prototype:void 0,gu=_u?_u.toString:void 0;function Mh(t){if(typeof t=="string")return t;if(Ge(t))return Bh(t,Mh)+"";if(Sa(t))return gu?gu.call(t):"";var r=t+"";return r=="0"&&1/t==-Xg?"-0":r}function kr(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}function $g(t){return t}var jg="[object AsyncFunction]",Vg="[object Function]",zg="[object GeneratorFunction]",Wg="[object Proxy]";function kh(t){if(!kr(t))return!1;var r=Fe(t);return r==Vg||r==zg||r==jg||r==Wg}var Yg=qt["__core-js_shared__"],yn=Yg,yu=function(){var t=/[^.]+$/.exec(yn&&yn.keys&&yn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function qg(t){return!!yu&&yu in t}var Zg=Function.prototype,Kg=Zg.toString;function Be(t){if(t!=null){try{return Kg.call(t)}catch{}try{return t+""}catch{}}return""}var Jg=/[\\^$.*+?()[\]{}|]/g,Qg=/^\[object .+?Constructor\]$/,ty=Function.prototype,ey=Object.prototype,ry=ty.toString,iy=ey.hasOwnProperty,ny=RegExp("^"+ry.call(iy).replace(Jg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ay(t){if(!kr(t)||qg(t))return!1;var r=kh(t)?ny:Qg;return r.test(Be(t))}function oy(t,r){return t==null?void 0:t[r]}function Me(t,r){var e=oy(t,r);return ay(e)?e:void 0}var sy=Me(qt,"WeakMap"),xa=sy,bu=Object.create,ly=function(){function t(){}return function(r){if(!kr(r))return{};if(bu)return bu(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}(),uy=ly;function hy(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function fy(t,r){var e=-1,i=t.length;for(r||(r=Array(i));++e<i;)r[e]=t[e];return r}var cy=800,dy=16,py=Date.now;function vy(t){var r=0,e=0;return function(){var i=py(),n=dy-(i-e);if(e=i,n>0){if(++r>=cy)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function my(t){return function(){return t}}var _y=function(){try{var t=Me(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ni=_y,gy=Ni?function(t,r){return Ni(t,"toString",{configurable:!0,enumerable:!1,value:my(r),writable:!0})}:$g,yy=gy,by=vy(yy),xy=by;function Ty(t,r){for(var e=-1,i=t==null?0:t.length;++e<i&&r(t[e],e,t)!==!1;);return t}var Ey=9007199254740991,Iy=/^(?:0|[1-9]\d*)$/;function Cy(t,r){var e=typeof t;return r=r==null?Ey:r,!!r&&(e=="number"||e!="symbol"&&Iy.test(t))&&t>-1&&t%1==0&&t<r}function Dh(t,r,e){r=="__proto__"&&Ni?Ni(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function Hh(t,r){return t===r||t!==t&&r!==r}var wy=Object.prototype,Ry=wy.hasOwnProperty;function Xh(t,r,e){var i=t[r];(!(Ry.call(t,r)&&Hh(i,e))||e===void 0&&!(r in t))&&Dh(t,r,e)}function Dr(t,r,e,i){var n=!e;e||(e={});for(var a=-1,o=r.length;++a<o;){var s=r[a],l=i?i(e[s],t[s],s,e,t):void 0;l===void 0&&(l=t[s]),n?Dh(e,s,l):Xh(e,s,l)}return e}var xu=Math.max;function Ay(t,r,e){return r=xu(r===void 0?t.length-1:r,0),function(){for(var i=arguments,n=-1,a=xu(i.length-r,0),o=Array(a);++n<a;)o[n]=i[r+n];n=-1;for(var s=Array(r+1);++n<r;)s[n]=i[n];return s[r]=e(o),hy(t,this,s)}}var Ny=9007199254740991;function $h(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ny}function jh(t){return t!=null&&$h(t.length)&&!kh(t)}var Py=Object.prototype;function Fa(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||Py;return t===e}function Uy(t,r){for(var e=-1,i=Array(t);++e<t;)i[e]=r(e);return i}var Oy="[object Arguments]";function Tu(t){return Le(t)&&Fe(t)==Oy}var Vh=Object.prototype,Sy=Vh.hasOwnProperty,Fy=Vh.propertyIsEnumerable,Ly=Tu(function(){return arguments}())?Tu:function(t){return Le(t)&&Sy.call(t,"callee")&&!Fy.call(t,"callee")},zh=Ly;function Gy(){return!1}var Wh=typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Eu=Wh&&typeof Ut=="object"&&Ut&&!Ut.nodeType&&Ut,By=Eu&&Eu.exports===Wh,Iu=By?qt.Buffer:void 0,My=Iu?Iu.isBuffer:void 0,ky=My||Gy,Yh=ky,Dy="[object Arguments]",Hy="[object Array]",Xy="[object Boolean]",$y="[object Date]",jy="[object Error]",Vy="[object Function]",zy="[object Map]",Wy="[object Number]",Yy="[object Object]",qy="[object RegExp]",Zy="[object Set]",Ky="[object String]",Jy="[object WeakMap]",Qy="[object ArrayBuffer]",t1="[object DataView]",e1="[object Float32Array]",r1="[object Float64Array]",i1="[object Int8Array]",n1="[object Int16Array]",a1="[object Int32Array]",o1="[object Uint8Array]",s1="[object Uint8ClampedArray]",l1="[object Uint16Array]",u1="[object Uint32Array]",ht={};ht[e1]=ht[r1]=ht[i1]=ht[n1]=ht[a1]=ht[o1]=ht[s1]=ht[l1]=ht[u1]=!0;ht[Dy]=ht[Hy]=ht[Qy]=ht[Xy]=ht[t1]=ht[$y]=ht[jy]=ht[Vy]=ht[zy]=ht[Wy]=ht[Yy]=ht[qy]=ht[Zy]=ht[Ky]=ht[Jy]=!1;function h1(t){return Le(t)&&$h(t.length)&&!!ht[Fe(t)]}function La(t){return function(r){return t(r)}}var qh=typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,yr=qh&&typeof Ut=="object"&&Ut&&!Ut.nodeType&&Ut,f1=yr&&yr.exports===qh,bn=f1&&Lh.process,c1=function(){try{var t=yr&&yr.require&&yr.require("util").types;return t||bn&&bn.binding&&bn.binding("util")}catch{}}(),rr=c1,Cu=rr&&rr.isTypedArray,d1=Cu?La(Cu):h1,p1=d1,v1=Object.prototype,m1=v1.hasOwnProperty;function Zh(t,r){var e=Ge(t),i=!e&&zh(t),n=!e&&!i&&Yh(t),a=!e&&!i&&!n&&p1(t),o=e||i||n||a,s=o?Uy(t.length,String):[],l=s.length;for(var u in t)(r||m1.call(t,u))&&!(o&&(u=="length"||n&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Cy(u,l)))&&s.push(u);return s}function Kh(t,r){return function(e){return t(r(e))}}var _1=Kh(Object.keys,Object),g1=_1,y1=Object.prototype,b1=y1.hasOwnProperty;function x1(t){if(!Fa(t))return g1(t);var r=[];for(var e in Object(t))b1.call(t,e)&&e!="constructor"&&r.push(e);return r}function Ga(t){return jh(t)?Zh(t):x1(t)}function T1(t){var r=[];if(t!=null)for(var e in Object(t))r.push(e);return r}var E1=Object.prototype,I1=E1.hasOwnProperty;function C1(t){if(!kr(t))return T1(t);var r=Fa(t),e=[];for(var i in t)i=="constructor"&&(r||!I1.call(t,i))||e.push(i);return e}function Ba(t){return jh(t)?Zh(t,!0):C1(t)}var w1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R1=/^\w*$/;function A1(t,r){if(Ge(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Sa(t)?!0:R1.test(t)||!w1.test(t)||r!=null&&t in Object(r)}var N1=Me(Object,"create"),Or=N1;function P1(){this.__data__=Or?Or(null):{},this.size=0}function U1(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var O1="__lodash_hash_undefined__",S1=Object.prototype,F1=S1.hasOwnProperty;function L1(t){var r=this.__data__;if(Or){var e=r[t];return e===O1?void 0:e}return F1.call(r,t)?r[t]:void 0}var G1=Object.prototype,B1=G1.hasOwnProperty;function M1(t){var r=this.__data__;return Or?r[t]!==void 0:B1.call(r,t)}var k1="__lodash_hash_undefined__";function D1(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Or&&r===void 0?k1:r,this}function Oe(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var i=t[r];this.set(i[0],i[1])}}Oe.prototype.clear=P1;Oe.prototype.delete=U1;Oe.prototype.get=L1;Oe.prototype.has=M1;Oe.prototype.set=D1;function H1(){this.__data__=[],this.size=0}function Li(t,r){for(var e=t.length;e--;)if(Hh(t[e][0],r))return e;return-1}var X1=Array.prototype,$1=X1.splice;function j1(t){var r=this.__data__,e=Li(r,t);if(e<0)return!1;var i=r.length-1;return e==i?r.pop():$1.call(r,e,1),--this.size,!0}function V1(t){var r=this.__data__,e=Li(r,t);return e<0?void 0:r[e][1]}function z1(t){return Li(this.__data__,t)>-1}function W1(t,r){var e=this.__data__,i=Li(e,t);return i<0?(++this.size,e.push([t,r])):e[i][1]=r,this}function le(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var i=t[r];this.set(i[0],i[1])}}le.prototype.clear=H1;le.prototype.delete=j1;le.prototype.get=V1;le.prototype.has=z1;le.prototype.set=W1;var Y1=Me(qt,"Map"),Sr=Y1;function q1(){this.size=0,this.__data__={hash:new Oe,map:new(Sr||le),string:new Oe}}function Z1(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function Gi(t,r){var e=t.__data__;return Z1(r)?e[typeof r=="string"?"string":"hash"]:e.map}function K1(t){var r=Gi(this,t).delete(t);return this.size-=r?1:0,r}function J1(t){return Gi(this,t).get(t)}function Q1(t){return Gi(this,t).has(t)}function tb(t,r){var e=Gi(this,t),i=e.size;return e.set(t,r),this.size+=e.size==i?0:1,this}function me(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var i=t[r];this.set(i[0],i[1])}}me.prototype.clear=q1;me.prototype.delete=K1;me.prototype.get=J1;me.prototype.has=Q1;me.prototype.set=tb;var eb="Expected a function";function Ma(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(eb);var e=function(){var i=arguments,n=r?r.apply(this,i):i[0],a=e.cache;if(a.has(n))return a.get(n);var o=t.apply(this,i);return e.cache=a.set(n,o)||a,o};return e.cache=new(Ma.Cache||me),e}Ma.Cache=me;var rb=500;function ib(t){var r=Ma(t,function(i){return e.size===rb&&e.clear(),i}),e=r.cache;return r}var nb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ab=/\\(\\)?/g,ob=ib(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(nb,function(e,i,n,a){r.push(n?a.replace(ab,"$1"):i||e)}),r}),sb=ob;function lb(t){return t==null?"":Mh(t)}function ka(t,r){return Ge(t)?t:A1(t,r)?[t]:sb(lb(t))}var ub=1/0;function Jh(t){if(typeof t=="string"||Sa(t))return t;var r=t+"";return r=="0"&&1/t==-ub?"-0":r}function hb(t,r){r=ka(r,t);for(var e=0,i=r.length;t!=null&&e<i;)t=t[Jh(r[e++])];return e&&e==i?t:void 0}function Da(t,r){for(var e=-1,i=r.length,n=t.length;++e<i;)t[n+e]=r[e];return t}var wu=Wt?Wt.isConcatSpreadable:void 0;function fb(t){return Ge(t)||zh(t)||!!(wu&&t&&t[wu])}function Qh(t,r,e,i,n){var a=-1,o=t.length;for(e||(e=fb),n||(n=[]);++a<o;){var s=t[a];r>0&&e(s)?r>1?Qh(s,r-1,e,i,n):Da(n,s):i||(n[n.length]=s)}return n}function cb(t){var r=t==null?0:t.length;return r?Qh(t,1):[]}function db(t){return xy(Ay(t,void 0,cb),t+"")}var pb=Kh(Object.getPrototypeOf,Object),Ha=pb,vb="[object Object]",mb=Function.prototype,_b=Object.prototype,tf=mb.toString,gb=_b.hasOwnProperty,yb=tf.call(Object);function bb(t){if(!Le(t)||Fe(t)!=vb)return!1;var r=Ha(t);if(r===null)return!0;var e=gb.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&tf.call(e)==yb}function xb(t,r,e){var i=-1,n=t.length;r<0&&(r=-r>n?0:n+r),e=e>n?n:e,e<0&&(e+=n),n=r>e?0:e-r>>>0,r>>>=0;for(var a=Array(n);++i<n;)a[i]=t[i+r];return a}function Tb(){this.__data__=new le,this.size=0}function Eb(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}function Ib(t){return this.__data__.get(t)}function Cb(t){return this.__data__.has(t)}var wb=200;function Rb(t,r){var e=this.__data__;if(e instanceof le){var i=e.__data__;if(!Sr||i.length<wb-1)return i.push([t,r]),this.size=++e.size,this;e=this.__data__=new me(i)}return e.set(t,r),this.size=e.size,this}function nr(t){var r=this.__data__=new le(t);this.size=r.size}nr.prototype.clear=Tb;nr.prototype.delete=Eb;nr.prototype.get=Ib;nr.prototype.has=Cb;nr.prototype.set=Rb;function Ab(t,r){return t&&Dr(r,Ga(r),t)}function Nb(t,r){return t&&Dr(r,Ba(r),t)}var ef=typeof Pt=="object"&&Pt&&!Pt.nodeType&&Pt,Ru=ef&&typeof Ut=="object"&&Ut&&!Ut.nodeType&&Ut,Pb=Ru&&Ru.exports===ef,Au=Pb?qt.Buffer:void 0,Nu=Au?Au.allocUnsafe:void 0;function Ub(t,r){if(r)return t.slice();var e=t.length,i=Nu?Nu(e):new t.constructor(e);return t.copy(i),i}function Ob(t,r){for(var e=-1,i=t==null?0:t.length,n=0,a=[];++e<i;){var o=t[e];r(o,e,t)&&(a[n++]=o)}return a}function rf(){return[]}var Sb=Object.prototype,Fb=Sb.propertyIsEnumerable,Pu=Object.getOwnPropertySymbols,Lb=Pu?function(t){return t==null?[]:(t=Object(t),Ob(Pu(t),function(r){return Fb.call(t,r)}))}:rf,Xa=Lb;function Gb(t,r){return Dr(t,Xa(t),r)}var Bb=Object.getOwnPropertySymbols,Mb=Bb?function(t){for(var r=[];t;)Da(r,Xa(t)),t=Ha(t);return r}:rf,nf=Mb;function kb(t,r){return Dr(t,nf(t),r)}function af(t,r,e){var i=r(t);return Ge(t)?i:Da(i,e(t))}function Db(t){return af(t,Ga,Xa)}function of(t){return af(t,Ba,nf)}var Hb=Me(qt,"DataView"),Ta=Hb,Xb=Me(qt,"Promise"),Ea=Xb,$b=Me(qt,"Set"),Ia=$b,Uu="[object Map]",jb="[object Object]",Ou="[object Promise]",Su="[object Set]",Fu="[object WeakMap]",Lu="[object DataView]",Vb=Be(Ta),zb=Be(Sr),Wb=Be(Ea),Yb=Be(Ia),qb=Be(xa),Ce=Fe;(Ta&&Ce(new Ta(new ArrayBuffer(1)))!=Lu||Sr&&Ce(new Sr)!=Uu||Ea&&Ce(Ea.resolve())!=Ou||Ia&&Ce(new Ia)!=Su||xa&&Ce(new xa)!=Fu)&&(Ce=function(t){var r=Fe(t),e=r==jb?t.constructor:void 0,i=e?Be(e):"";if(i)switch(i){case Vb:return Lu;case zb:return Uu;case Wb:return Ou;case Yb:return Su;case qb:return Fu}return r});var $a=Ce,Zb=Object.prototype,Kb=Zb.hasOwnProperty;function Jb(t){var r=t.length,e=new t.constructor(r);return r&&typeof t[0]=="string"&&Kb.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Qb=qt.Uint8Array,Gu=Qb;function ja(t){var r=new t.constructor(t.byteLength);return new Gu(r).set(new Gu(t)),r}function tx(t,r){var e=r?ja(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var ex=/\w*$/;function rx(t){var r=new t.constructor(t.source,ex.exec(t));return r.lastIndex=t.lastIndex,r}var Bu=Wt?Wt.prototype:void 0,Mu=Bu?Bu.valueOf:void 0;function ix(t){return Mu?Object(Mu.call(t)):{}}function nx(t,r){var e=r?ja(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var ax="[object Boolean]",ox="[object Date]",sx="[object Map]",lx="[object Number]",ux="[object RegExp]",hx="[object Set]",fx="[object String]",cx="[object Symbol]",dx="[object ArrayBuffer]",px="[object DataView]",vx="[object Float32Array]",mx="[object Float64Array]",_x="[object Int8Array]",gx="[object Int16Array]",yx="[object Int32Array]",bx="[object Uint8Array]",xx="[object Uint8ClampedArray]",Tx="[object Uint16Array]",Ex="[object Uint32Array]";function Ix(t,r,e){var i=t.constructor;switch(r){case dx:return ja(t);case ax:case ox:return new i(+t);case px:return tx(t,e);case vx:case mx:case _x:case gx:case yx:case bx:case xx:case Tx:case Ex:return nx(t,e);case sx:return new i;case lx:case fx:return new i(t);case ux:return rx(t);case hx:return new i;case cx:return ix(t)}}function Cx(t){return typeof t.constructor=="function"&&!Fa(t)?uy(Ha(t)):{}}var wx="[object Map]";function Rx(t){return Le(t)&&$a(t)==wx}var ku=rr&&rr.isMap,Ax=ku?La(ku):Rx,Nx=Ax,Px="[object Set]";function Ux(t){return Le(t)&&$a(t)==Px}var Du=rr&&rr.isSet,Ox=Du?La(Du):Ux,Sx=Ox,Fx=1,Lx=2,Gx=4,sf="[object Arguments]",Bx="[object Array]",Mx="[object Boolean]",kx="[object Date]",Dx="[object Error]",lf="[object Function]",Hx="[object GeneratorFunction]",Xx="[object Map]",$x="[object Number]",uf="[object Object]",jx="[object RegExp]",Vx="[object Set]",zx="[object String]",Wx="[object Symbol]",Yx="[object WeakMap]",qx="[object ArrayBuffer]",Zx="[object DataView]",Kx="[object Float32Array]",Jx="[object Float64Array]",Qx="[object Int8Array]",t2="[object Int16Array]",e2="[object Int32Array]",r2="[object Uint8Array]",i2="[object Uint8ClampedArray]",n2="[object Uint16Array]",a2="[object Uint32Array]",st={};st[sf]=st[Bx]=st[qx]=st[Zx]=st[Mx]=st[kx]=st[Kx]=st[Jx]=st[Qx]=st[t2]=st[e2]=st[Xx]=st[$x]=st[uf]=st[jx]=st[Vx]=st[zx]=st[Wx]=st[r2]=st[i2]=st[n2]=st[a2]=!0;st[Dx]=st[lf]=st[Yx]=!1;function mi(t,r,e,i,n,a){var o,s=r&Fx,l=r&Lx,u=r&Gx;if(e&&(o=n?e(t,i,n,a):e(t)),o!==void 0)return o;if(!kr(t))return t;var h=Ge(t);if(h){if(o=Jb(t),!s)return fy(t,o)}else{var f=$a(t),c=f==lf||f==Hx;if(Yh(t))return Ub(t,s);if(f==uf||f==sf||c&&!n){if(o=l||c?{}:Cx(t),!s)return l?kb(t,Nb(o,t)):Gb(t,Ab(o,t))}else{if(!st[f])return n?t:{};o=Ix(t,f,s)}}a||(a=new nr);var d=a.get(t);if(d)return d;a.set(t,o),Sx(t)?t.forEach(function(m){o.add(mi(m,r,e,m,t,a))}):Nx(t)&&t.forEach(function(m,_){o.set(_,mi(m,r,e,_,t,a))});var p=u?l?of:Db:l?Ba:Ga,v=h?void 0:p(t);return Ty(v||t,function(m,_){v&&(_=m,m=t[_]),Xh(o,_,mi(m,r,e,_,t,a))}),o}function o2(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}function s2(t,r){return r.length<2?t:hb(t,xb(r,0,-1))}function l2(t,r){return r=ka(r,t),t=s2(t,r),t==null||delete t[Jh(o2(r))]}function u2(t){return bb(t)?void 0:t}var h2=1,f2=2,c2=4,d2=db(function(t,r){var e={};if(t==null)return e;var i=!1;r=Bh(r,function(a){return a=ka(a,t),i||(i=a.length>1),a}),Dr(t,of(t),e),i&&(e=mi(e,h2|f2|c2,u2));for(var n=r.length;n--;)l2(e,r[n]);return e}),p2=d2;class ct extends yt{constructor(...r){super(...r)}_getEffectArgs(){return Object.assign({},p2(this.uniforms,["uSampler","globals","filterGlobals","px","size","paletteMap","width","height","timer","m"]))}getEffectConfig(){return{name:this.effectName,type:this.effectType,args:this._getEffectArgs()}}}class v2 extends ct{constructor(r=0){super(null,Rg),this.effectName="vibrance",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r}}class m2 extends ct{constructor(r=0){super(null,null),this.effectName="saturation",this.effectType="filter",this._colorMatrixFilter=new er,this.value=r}apply(r,e,i,n,a){this._colorMatrixFilter.apply(r,e,i,n)}get value(){return this.uniforms.value}set value(r){let e=2*Number(r)/3+1,i=-.5*(e-1);this._colorMatrixFilter.matrix=[e,i,i,0,0,i,e,i,0,0,i,i,e,0,0,0,0,0,1,0],this.uniforms.value=r}}var _2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){vec4 color=texture2D(uSampler,vTextureCoord);color.r=clamp(color.r+value,0.0,1.0);color.b=clamp(color.b-value,0.0,1.0);gl_FragColor=color;}";class g2 extends ct{constructor(r=0){super(null,_2),this.effectName="temperature",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r/6}}var y2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){vec4 color=texture2D(uSampler,vTextureCoord);color.g=clamp(color.g+value,0.0,1.0);gl_FragColor=color;}";class b2 extends ct{constructor(r=0){super(null,y2),this.effectName="tint",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r/6}}class x2 extends ct{constructor(r=0){super(null,null),this.effectName="hue",this.effectType="filter",this._colorMatrixFilter=new er,this.value=r}apply(r,e,i,n,a){this._colorMatrixFilter.apply(r,e,i,n)}get value(){return this.uniforms.value}set value(r){this._colorMatrixFilter.reset(),this._colorMatrixFilter.hue(r*180,!0),this.uniforms.value=r}}class T2 extends ct{constructor(r=0){super(null,null),this.effectName="brightness",this.effectType="filter",this._colorMatrixFilter=new er,this.value=r}apply(r,e,i,n,a){this._colorMatrixFilter.apply(r,e,i,n)}get value(){return this.uniforms.value}set value(r){this._colorMatrixFilter.brightness(r+1,!1),this.uniforms.value=r}}var E2=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;const float epsilon=0.000001;const float mx=1.0-epsilon;const mat3 matRGBtoROMM=mat3(0.5293459296226501,0.3300727903842926,0.14058130979537964,0.09837432950735092,0.8734610080718994,0.028164653107523918,0.01688321679830551,0.11767247319221497,0.8654443025588989);const mat3 matROMMtoRGB=mat3(2.0340757369995117,-0.727334201335907,-0.3067416846752167,-0.22881317138671875,1.2317301034927368,-0.0029169507324695587,-0.008569774217903614,-0.1532866358757019,1.1618564128875732);float ramp(in float t){t*=2.0;if(t>=1.0){t-=1.0;t=log(0.5)/log(0.5*(1.0-t)+0.9332*t);}return clamp(t,0.001,10.0);}vec3 rgb2hsv(in vec3 c){vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(in vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 setHue(in vec3 res,in vec3 base){vec3 hsv=rgb2hsv(base);vec3 res_hsv=rgb2hsv(res);return hsv2rgb(vec3(hsv.x,res_hsv.y,res_hsv.z));}void main(){lowp vec4 col=texture2D(uSampler,vTextureCoord.xy);vec3 base=col.rgb*matRGBtoROMM;float a=abs(value)*col.a+epsilon;float v=pow(2.0,a*2.0+1.0)-2.0;float m=mx-exp(-v);vec3 res=(value>0.0)?(1.0-exp(-v*base))/m : log(1.0-base*m)/-v;res=mix(base,res,min(a*100.0,1.0));res=setHue(res,base);res=pow(res,vec3(ramp(1.0-(0.0*col.a+1.0)/2.0)));res=res*matROMMtoRGB;gl_FragColor=vec4(res,col.a);}`;class I2 extends ct{constructor(r=0){super(null,E2),this.effectName="exposure",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r}}class C2 extends ct{constructor(r=0){super(null,null),this.effectName="contrast",this.effectType="filter",this._colorMatrixFilter=new er,this.value=r}apply(r,e,i,n,a){this._colorMatrixFilter.apply(r,e,i,n)}get value(){return this.uniforms.value}set value(r){this._colorMatrixFilter.contrast(r,!1),this.uniforms.value=r}}var w2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){float bval=value/255.0;float wval=(255.0/(255.0-value));vec3 color=texture2D(uSampler,vTextureCoord).rgb;color=color*wval-(bval*wval);gl_FragColor=vec4(color,texture2D(uSampler,vTextureCoord).a);}";class R2 extends ct{constructor(r=0){super(null,w2),this.effectName="black",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r*(255/2)}}var A2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){float bval=0.0/255.0;float wval=(255.0/(value-255.0)*-1.0);vec3 color=texture2D(uSampler,vTextureCoord).rgb;color=color*wval-(bval*wval);gl_FragColor=vec4(color,texture2D(uSampler,vTextureCoord).a);}";class N2 extends ct{constructor(r=0){super(null,A2),this.effectName="white",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r*(255/2)}}var hf=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;const float epsilon=0.000001;const float mx=1.0-epsilon;const float PI=3.1415926535897932384626433832795;const mat3 matRGBtoROMM=mat3(0.5293459296226501,0.3300727903842926,0.14058130979537964,0.09837432950735092,0.8734610080718994,0.028164653107523918,0.01688321679830551,0.11767247319221497,0.8654443025588989);const mat3 matROMMtoRGB=mat3(2.0340757369995117,-0.727334201335907,-0.3067416846752167,-0.22881317138671875,1.2317301034927368,-0.0029169507324695587,-0.008569774217903614,-0.1532866358757019,1.1618564128875732);float luma_romm(in vec3 color){return dot(color,vec3(0.242655,0.755158,0.002187));}float luma(in vec3 color){return dot(color,vec3(0.298839,0.586811,0.11435));}vec3 rgb2hsv(in vec3 c){vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(in vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 setHue(in vec3 res,in vec3 base){vec3 hsv=rgb2hsv(base);vec3 res_hsv=rgb2hsv(res);return hsv2rgb(vec3(hsv.x,res_hsv.y,res_hsv.z));}float gaussian(in float x){return 1.0-exp(-PI*2.0*x*x);}void main(){lowp vec4 col=texture2D(uSampler,vTextureCoord.xy);lowp vec3 map=col.rgb;vec3 base=col.rgb*matRGBtoROMM;float base_lum=luma(col.rgb);float map_lum=luma_romm(map*matRGBtoROMM);float exposure=mix(value,0.0,1.0-map_lum)*col.a;float a=abs(exposure)*col.a+epsilon;float v=pow(2.0,a+1.0)-2.0;float m=mx-exp(-v);vec3 res=(exposure>0.0)?(1.0-exp(-v*base))/m : log(1.0-base*m)/-v;res=mix(base,res,min(a*100.0,1.0));res=setHue(res,base);res=res*matROMMtoRGB;gl_FragColor=vec4(res,col.a);}`;class P2 extends ct{constructor(r=0){super(null,hf),this.effectName="highlights",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r}}class U2 extends ct{constructor(r=0){super(null,hf),this.effectName="shadows",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r*-1}}var O2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform vec2 px;uniform float m[9];uniform float value;void main(void){vec4 c11=texture2D(uSampler,vTextureCoord-px);vec4 c12=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y-px.y));vec4 c13=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y-px.y));vec4 c21=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y));vec4 c22=texture2D(uSampler,vTextureCoord);vec4 c23=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y));vec4 c31=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y+px.y));vec4 c32=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y+px.y));vec4 c33=texture2D(uSampler,vTextureCoord+px);vec4 color=c11*m[0]+c12*m[1]+c13*m[2]+c21*m[3]+c22*m[4]+c23*m[5]+c31*m[6]+c32*m[7]+c33*m[8];gl_FragColor=color*value+(c22*(1.0-value));}";class S2 extends ct{constructor(r=0){super(null,O2),this.effectName="sharpen",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){var n,a,o,s;let[e,i]=(s=(o=(a=(n=this.uniforms)==null?void 0:n.filterGlobals)==null?void 0:a.uniforms)==null?void 0:o.inputSize)!=null?s:[1920,1080];this.uniforms.m=new Float32Array([-1,-1,-1,-1,9,-1,-1,-1,-1]),this.uniforms.px=[1/e,1/i],this.uniforms.value=r/2}}var F2=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 px;float Lum(vec3 c){return 0.299*c.r+0.587*c.g+0.114*c.b;}float BlendOverlayf(float base,float blend){return(base<0.5 ?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend)));}vec3 BlendOverlay(vec3 base,vec3 blend){return vec3(BlendOverlayf(base.r,blend.r),BlendOverlayf(base.g,blend.g),BlendOverlayf(base.b,blend.b));}float BlendVividLightf(float base,float blend){float BlendColorBurnf=(((2.0*blend)==0.0)?(2.0*blend): max((1.0-((1.0-base)/(2.0*blend))),0.0));float BlendColorDodgef=(((2.0*(blend-0.5))==1.0)?(2.0*(blend-0.5)): min(base/(1.0-(2.0*(blend-0.5))),1.0));return((blend<0.5)? BlendColorBurnf : BlendColorDodgef);}vec3 BlendVividLight(vec3 base,vec3 blend){return vec3(BlendVividLightf(base.r,blend.r),BlendVividLightf(base.g,blend.g),BlendVividLightf(base.b,blend.b));}float normpdf(in float x,in float sigma){return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;}vec3 blurMap(){const int mSize=11;const int kSize=(mSize-1)/2;float kernel[mSize];vec3 final_colour=vec3(0.0);float sigma=7.0;float Z=0.0;for(int j=0;j<=kSize;++j){kernel[kSize+j]=kernel[kSize-j]=normpdf(float(j),sigma);}for(int j=0;j<mSize;++j){Z+=kernel[j];}for(int i=-kSize;i<=kSize;++i){for(int j=-kSize;j<=kSize;++j){final_colour+=kernel[kSize+j]*kernel[kSize+i]*texture2D(uSampler,(vTextureCoord.xy+vec2(float(i),float(j))*px)).rgb;}}return vec3(final_colour/(Z*Z));}void main(){vec4 base4=texture2D(uSampler,vTextureCoord.xy);vec3 blurMap=blurMap();vec3 base=base4.rgb;float intensity=(value<0.0)?(value/2.0): value;float lum=Lum(base);vec3 col=vec3(lum);vec3 mask=vec3(1.0-pow(lum,1.8));vec3 layer=vec3(1.0-Lum(blurMap));vec3 detail=clamp(BlendVividLight(col,layer),0.0,1.0);vec3 inverse=mix(1.0-detail,detail,(intensity+1.0)/2.0);gl_FragColor=vec4(BlendOverlay(base,mix(vec3(0.5),inverse,mask)),base4.a);}`;class L2 extends ct{constructor(r=0){super(null,F2),this.effectName="clarity",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){var n,a,o,s;let[e,i]=(s=(o=(a=(n=this.uniforms)==null?void 0:n.filterGlobals)==null?void 0:a.uniforms)==null?void 0:o.inputSize)!=null?s:[1920,1080];this.uniforms.px=[1/e,1/i],this.uniforms.value=r*2}}var G2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform vec2 px;uniform float m[9];uniform float value;void main(void){vec4 c11=texture2D(uSampler,vTextureCoord-px);vec4 c12=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y-px.y));vec4 c13=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y-px.y));vec4 c21=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y));vec4 c22=texture2D(uSampler,vTextureCoord);vec4 c23=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y));vec4 c31=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y+px.y));vec4 c32=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y+px.y));vec4 c33=texture2D(uSampler,vTextureCoord+px);vec4 color=c11*m[0]+c12*m[1]+c13*m[2]+c21*m[3]+c22*m[4]+c23*m[5]+c31*m[6]+c32*m[7]+c33*m[8];gl_FragColor=color*value+(c22*(1.0-value));}";class B2 extends ct{constructor(r=0){super(null,G2),this.effectName="smooth",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){var n,a,o,s;let[e,i]=(s=(o=(a=(n=this.uniforms)==null?void 0:n.filterGlobals)==null?void 0:a.uniforms)==null?void 0:o.inputSize)!=null?s:[1920,1080];this.uniforms.m=new Float32Array([1/16,2/16,1/16,2/16,.25,2/16,1/16,2/16,1/16]),this.uniforms.px=[1/e,1/i],this.uniforms.value=r}}class M2 extends ct{constructor(r=0){super(null,null),this.effectName="blur",this.effectType="filter",this._blurFilter=new Q_,this.value=r}apply(r,e,i,n,a){this._blurFilter.apply(r,e,i,n)}get value(){return this.uniforms.value}set value(r){this._blurFilter.blur=r*10,this.uniforms.value=r}}var k2="precision highp float;uniform sampler2D uSampler;varying vec2 vTextureCoord;uniform float width;uniform float height;uniform float value;uniform float timer;const float permTexUnit=1.0/256.0;const float permTexUnitHalf=0.5/256.0;float grainsize=1.8;float lumamount=1.0;vec4 rnm(in vec2 tc){float noise=sin(dot(tc+vec2(timer,timer),vec2(12.9898,78.233)))*43758.5453;float noiseR=fract(noise)*2.0-1.0;float noiseG=fract(noise*1.2154)*2.0-1.0;float noiseB=fract(noise*1.3453)*2.0-1.0;float noiseA=fract(noise*1.3647)*2.0-1.0;return vec4(noiseR,noiseG,noiseB,noiseA);}float fade(in float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise3D(in vec3 p){vec3 pi=permTexUnit*floor(p)+permTexUnitHalf;vec3 pf=fract(p);float perm00=rnm(pi.xy).a;vec3 grad000=rnm(vec2(perm00,pi.z)).rgb*4.0-1.0;float n000=dot(grad000,pf);vec3 grad001=rnm(vec2(perm00,pi.z+permTexUnit)).rgb*4.0-1.0;float n001=dot(grad001,pf-vec3(0.0,0.0,1.0));float perm01=rnm(pi.xy+vec2(0.0,permTexUnit)).a;vec3 grad010=rnm(vec2(perm01,pi.z)).rgb*4.0-1.0;float n010=dot(grad010,pf-vec3(0.0,1.0,0.0));vec3 grad011=rnm(vec2(perm01,pi.z+permTexUnit)).rgb*4.0-1.0;float n011=dot(grad011,pf-vec3(0.0,1.0,1.0));float perm10=rnm(pi.xy+vec2(permTexUnit,0.0)).a;vec3 grad100=rnm(vec2(perm10,pi.z)).rgb*4.0-1.0;float n100=dot(grad100,pf-vec3(1.0,0.0,0.0));vec3 grad101=rnm(vec2(perm10,pi.z+permTexUnit)).rgb*4.0-1.0;float n101=dot(grad101,pf-vec3(1.0,0.0,1.0));float perm11=rnm(pi.xy+vec2(permTexUnit,permTexUnit)).a;vec3 grad110=rnm(vec2(perm11,pi.z)).rgb*4.0-1.0;float n110=dot(grad110,pf-vec3(1.0,1.0,0.0));vec3 grad111=rnm(vec2(perm11,pi.z+permTexUnit)).rgb*4.0-1.0;float n111=dot(grad111,pf-vec3(1.0,1.0,1.0));vec4 n_x=mix(vec4(n000,n001,n010,n011),vec4(n100,n101,n110,n111),fade(pf.x));vec2 n_xy=mix(n_x.xy,n_x.zw,fade(pf.y));float n_xyz=mix(n_xy.x,n_xy.y,fade(pf.z));return n_xyz;}vec2 coordRot(in vec2 tc,in float angle){float aspect=width/height;float rotX=((tc.x*2.0-1.0)*aspect*cos(angle))-((tc.y*2.0-1.0)*sin(angle));float rotY=((tc.y*2.0-1.0)*cos(angle))+((tc.x*2.0-1.0)*aspect*sin(angle));rotX=((rotX/aspect)*0.5+0.5);rotY=rotY*0.5+0.5;return vec2(rotX,rotY);}void main(){vec3 rotOffset=vec3(1.425,3.892,5.835);vec2 rotCoordsR=coordRot(vTextureCoord,timer+rotOffset.x);vec3 noise=vec3(pnoise3D(vec3(rotCoordsR*vec2(width/grainsize,height/grainsize),0.0)));vec4 tex=texture2D(uSampler,vTextureCoord);vec3 col=tex.rgb;vec3 lumcoeff=vec3(0.299,0.587,0.114);float luminance=mix(0.0,dot(col,lumcoeff),lumamount);float lum=smoothstep(0.2,0.0,luminance);lum+=luminance;noise=mix(noise,vec3(0.0),pow(lum,4.0));col=col+noise*value;gl_FragColor=vec4(col,tex.w);}";class D2 extends ct{constructor(r=0){super(null,k2),this.effectName="grain",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){var n,a,o,s;let[e,i]=(s=(o=(a=(n=this.uniforms)==null?void 0:n.filterGlobals)==null?void 0:a.uniforms)==null?void 0:o.inputSize)!=null?s:[1920,1080];this.uniforms.width=e,this.uniforms.height=i,this.uniforms.timer=1,this.uniforms.value=r/10}}var H2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform float size;void main(){vec4 color=texture2D(uSampler,vTextureCoord);float dist=distance(vTextureCoord,vec2(0.5,0.5));float grd=smoothstep(0.8,size*0.799,dist*(value*0.6+size*2.0));color.rgb+=vec3(1.0,1.0,1.0)*(1.0-grd);gl_FragColor=color;}";class X2 extends ct{constructor(r=0){super(null,H2),this.effectName="vignetteWhite",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.size=.25,this.uniforms.value=(r-.1)*2}}var $2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform float size;void main(){vec4 color=texture2D(uSampler,vTextureCoord);float dist=distance(vTextureCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(value*0.75+size*2.0));gl_FragColor=color;}";class j2 extends ct{constructor(r=0){super(null,$2),this.effectName="vignetteBlack",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){this.uniforms.size=.25,this.uniforms.value=(r-.1)*2}}var V2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 px;float normpdf(in float x,in float sigma){return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;}vec3 blurMap(){const int mSize=11;const int kSize=(mSize-1)/2;float kernel[mSize];vec3 final_colour=vec3(0.0);float sigma=7.0;float Z=0.0;for(int j=0;j<=kSize;++j){kernel[kSize+j]=kernel[kSize-j]=normpdf(float(j),sigma);}for(int j=0;j<mSize;++j){Z+=kernel[j];}for(int i=-kSize;i<=kSize;++i){for(int j=-kSize;j<=kSize;++j){final_colour+=kernel[kSize+j]*kernel[kSize+i]*texture2D(uSampler,(vTextureCoord.xy+vec2(float(i),float(j))*px)).rgb;}}return vec3(final_colour/(Z*Z));}float luma(vec3 color){return dot(color,vec3(0.299,0.587,0.114));}void main(){vec4 base=texture2D(uSampler,vTextureCoord);vec3 color=blurMap();color=vec3(luma(color));color=vec3((base.r<=0.5)?(2.0*base.r*color.r):(1.0-2.0*(1.0-base.r)*(1.0-color.r)),(base.g<=0.5)?(2.0*base.g*color.g):(1.0-2.0*(1.0-base.g)*(1.0-color.g)),(base.b<=0.5)?(2.0*base.b*color.b):(1.0-2.0*(1.0-base.b)*(1.0-color.b)));gl_FragColor=mix(base,vec4(color,base.a),value);}";class z2 extends ct{constructor(r=0){super(null,V2),this.effectName="glamour",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){var n,a,o,s;let[e,i]=(s=(o=(a=(n=this.uniforms)==null?void 0:n.filterGlobals)==null?void 0:a.uniforms)==null?void 0:o.inputSize)!=null?s:[1920,1080];this.uniforms.px=[1/e,1/i],this.uniforms.value=r}}var W2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 px;float thresh=.5;void main(){vec4 sum=vec4(0);int j=-2;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=-1;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=0;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=1;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=2;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);sum/=25.0;gl_FragColor=texture2D(uSampler,vTextureCoord);if(length(sum)>thresh){gl_FragColor+=sum*value;}}";class Y2 extends ct{constructor(r=0){super(null,W2),this.effectName="bloom",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){var n,a,o,s;let[e,i]=(s=(o=(a=(n=this.uniforms)==null?void 0:n.filterGlobals)==null?void 0:a.uniforms)==null?void 0:o.inputSize)!=null?s:[1920,1080];this.uniforms.px=[1/e,1/i],this.uniforms.value=r}}var q2=`#define GLSLIFY 1;
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 size;float hazeMap(vec4 base){vec3 color=vec3(1.0,1.0,1.0);vec2 step=vec2(1.0/size.xy);const int patchRadius=1;for(int i=-patchRadius;i<=patchRadius;++i){for(int j=-patchRadius;j<=patchRadius;++j){vec2 uv=clamp(vTextureCoord+(vec2(i,j)*step),0.0,1.0);color=min(color,base.rgb);}}return min(color.r,min(color.g,color.b));}void main(){lowp vec4 base=texture2D(uSampler,vTextureCoord.xy);lowp float haze=hazeMap(base);float transmission=1.0-0.95*haze;const float A=0.95;const float t0=0.1;float t=mix(1.0,max(t0,transmission),value);vec3 J=(base.rgb-A)/t+A;gl_FragColor=vec4(J,base.a);}`;class Z2 extends ct{constructor(r=0){super(null,q2),this.effectName="dehaze",this.effectType="filter",this.value=r}get value(){return this.uniforms.value}set value(r){var n,a,o,s;let[e,i]=(s=(o=(a=(n=this.uniforms)==null?void 0:n.filterGlobals)==null?void 0:a.uniforms)==null?void 0:o.inputSize)!=null?s:[1920,1080];this.uniforms.size=[1/e,1/i],this.uniforms.value=r}}var K2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform sampler2D paletteMap;uniform float value;float luma(vec3 color){return dot(color,vec3(0.299,0.587,0.114));}void main(){lowp vec4 base=texture2D(uSampler,vTextureCoord.xy);float avg=luma(base.rgb);float r=texture2D(paletteMap,vec2(avg,0)).r;float g=texture2D(paletteMap,vec2(avg,0)).g;float b=texture2D(paletteMap,vec2(avg,0)).b;gl_FragColor=mix(base,vec4(r,g,b,base.a),value);}";class Va extends ct{constructor(r=0,e="#ff2200",i="#ff00ff"){super(null,K2),this.effectName="toning",this.effectType="filter",this._imageData=new ImageData(256,1),this.value=r,this.lightColor=e,this.darkColor=i}update(){const[r,e,i]=wt(Ot(this.uniforms.lightColor)),[n,a,o]=wt(Ot(this.uniforms.darkColor));let s=this._imageData;Va.fillPaletteMap({value:this.uniforms.value,lightColor:{r:r*255,g:e*255,b:i*255},darkColor:{r:n*255,g:a*255,b:o*255}},s);const l=new Uint8Array(Array.from(s.data));this.uniforms.paletteMap=j.fromBuffer(l,l.length/4,1)}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}get lightColor(){return this.uniforms.lightColor}set lightColor(r){this.uniforms.lightColor=r,this.update()}get darkColor(){return this.uniforms.darkColor}set darkColor(r){this.uniforms.darkColor=r,this.update()}static fillPaletteMap(r,e){for(let i=0;i<256;++i){let n=i/255;e.data[4*i]=Math.round(r.lightColor.r*n+r.darkColor.r*(1-n)),e.data[4*i+1]=Math.round(r.lightColor.g*n+r.darkColor.g*(1-n)),e.data[4*i+2]=Math.round(r.lightColor.b*n+r.darkColor.b*(1-n))}}}var J2="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendSoftLight(float base,float blend){return(blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));}vec3 blendSoftLight(vec3 base,vec3 blend){return vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));}vec3 blendSoftLight(vec3 base,vec3 blend,float opacity){return(blendSoftLight(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendSoftLight(base.rgb,color.rgb,value),base.a);}";class Q2 extends yt{constructor(r=0,e="#f20"){super(null,J2),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var tT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendOverlay(float base,float blend){return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));}vec3 blendOverlay(vec3 base,vec3 blend){return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));}vec3 blendHardLight(vec3 base,vec3 blend){return blendOverlay(blend,base);}vec3 blendHardLight(vec3 base,vec3 blend,float opacity){return(blendHardLight(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendHardLight(base.rgb,color.rgb,value),base.a);}";class eT extends yt{constructor(r=0,e="#f20"){super(null,tT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var rT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendColorBurn(float base,float blend){return(blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);}float blendColorDodge(float base,float blend){return(blend==1.0)?blend:min(base/(1.0-blend),1.0);}float blendVividLight(float base,float blend){return(blend<0.5)?blendColorBurn(base,(2.0*blend)):blendColorDodge(base,(2.0*(blend-0.5)));}vec3 blendVividLight(vec3 base,vec3 blend){return vec3(blendVividLight(base.r,blend.r),blendVividLight(base.g,blend.g),blendVividLight(base.b,blend.b));}vec3 blendVividLight(vec3 base,vec3 blend,float opacity){return(blendVividLight(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendVividLight(base.rgb,color.rgb,value),base.a);}";class iT extends yt{constructor(r=0,e="#f20"){super(null,rT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var nT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendOverlay(float base,float blend){return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));}vec3 blendOverlay(vec3 base,vec3 blend){return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));}vec3 blendOverlay(vec3 base,vec3 blend,float opacity){return(blendOverlay(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendOverlay(base.rgb,color.rgb,value),base.a);}";class aT extends yt{constructor(r=0,e="#f20"){super(null,nT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var oT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;vec3 blendMultiply(vec3 base,vec3 blend){return base*blend;}vec3 blendMultiply(vec3 base,vec3 blend,float opacity){return(blendMultiply(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendMultiply(base.rgb,color.rgb,value),base.a);}";class sT extends yt{constructor(r=0,e="#f20"){super(null,oT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var lT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendColorDodge(float base,float blend){return(blend==1.0)?blend:min(base/(1.0-blend),1.0);}vec3 blendColorDodge(vec3 base,vec3 blend){return vec3(blendColorDodge(base.r,blend.r),blendColorDodge(base.g,blend.g),blendColorDodge(base.b,blend.b));}vec3 blendColorDodge(vec3 base,vec3 blend,float opacity){return(blendColorDodge(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendColorDodge(base.rgb,color.rgb,value),base.a);}";class uT extends yt{constructor(r=0,e="#f20"){super(null,lT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var hT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendColorBurn(float base,float blend){return(blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);}vec3 blendColorBurn(vec3 base,vec3 blend){return vec3(blendColorBurn(base.r,blend.r),blendColorBurn(base.g,blend.g),blendColorBurn(base.b,blend.b));}vec3 blendColorBurn(vec3 base,vec3 blend,float opacity){return(blendColorBurn(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendColorBurn(base.rgb,color.rgb,value),base.a);}";class fT extends yt{constructor(r=0,e="#f20"){super(null,hT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var cT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendScreen(float base,float blend){return 1.0-((1.0-base)*(1.0-blend));}vec3 blendScreen(vec3 base,vec3 blend){return vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));}vec3 blendScreen(vec3 base,vec3 blend,float opacity){return(blendScreen(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendScreen(base.rgb,color.rgb,value),base.a);}";class dT extends yt{constructor(r=0,e="#f20"){super(null,cT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}var pT="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=mix(base,color,value);}";class vT extends yt{constructor(r=0,e="#f20"){super(null,pT),this.value=r,this.fillColor=e}update(){const[r,e,i]=wt(Ot(this.uniforms.fillColor));this.uniforms.color=[r,e,i,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}const Hu={default:vT,screen:dT,overlay:aT,multiply:sT,colorDodge:uT,colorBurn:fT,hardLight:eT,softLight:Q2,vividLight:iT};class mT extends ct{constructor(r=0,e="#ff2200",i="softLight"){super(null,null),this.effectName="fill",this.effectType="filter",this._fillFilter=new Hu[i],this.mode=i,this.value=r,this.fillColor=e}apply(r,e,i,n,a){this._fillFilter.apply(r,e,i,n)}update(){this._fillFilter.value=this.uniforms.value,this._fillFilter.fillColor=this.uniforms.fillColor}get mode(){return this.uniforms.mode}set mode(r){this._fillFilter=new Hu[r],this.uniforms.mode=r,this.update()}get fillColor(){return this.uniforms.fillColor}set fillColor(r){this.uniforms.fillColor=r,this.update()}get value(){return this.uniforms.value}set value(r){this.uniforms.value=r,this.update()}}const _T={flower:[{name:"vibrance",value:.2},{name:"saturation",value:.1},{name:"temperature",value:.1}],forest:[{name:"saturation",value:-.2},{name:"vibrance",value:1},{name:"clarity",value:.2},{name:"temperature",value:.16},{name:"tint",value:.2},{name:"curves",value:{preset:[[0,0,65,52,173,190,236,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}}],beach:[{name:"saturation",value:.2},{name:"vibrance",value:.2},{name:"curves",value:{preset:[[0,0,68,56,199,208,255,255],[0,0,255,255],[0,0,98,97,196,201,255,255],[0,0,87,85,201,182,255,255]]}},{name:"temperature",value:.1}],sham:[{name:"saturation",value:-.3},{name:"fill",value:{value:.3,mode:"overlay",fillColor:"#99ddff"}},{name:"curves",value:{preset:[[60,31,191,217],[0,0,120,134,255,255],[0,0,255,255],[0,0,120,144,255,255]]}}],stalker:[{name:"curves",value:{preset:[[62,64,190,191],[0,0,133,125,255,255],[0,0,54,65,209,208,255,255],[60,62,96,99,240,230,255,255]]}},{name:"contrast",value:.1},{name:"saturation",value:-.2}],shimmer:[{name:"temperature",value:-.2},{name:"tint",value:-.12},{name:"fill",value:{value:.12,mode:"screen",fillColor:"#be0bff"}},{name:"curves",value:{preset:[[8,23,244,227],[0,0,255,255],[0,0,131,124,255,255],[0,0,149,112,255,255]]}}],mold:[{name:"curves",value:{preset:[[65,64,233,233],[0,0,138,121,255,255],[0,0,60,75,184,184,255,255],[0,0,64,75,181,176,255,255]]}},{name:"contrast",value:.1},{name:"saturation",value:-.12}],style:[{name:"curves",value:{preset:[[0,0,73,74,191,177,235,221,255,255],[0,26,89,64,121,126,180,213,255,255],[0,0,71,50,190,210,255,255],[61,64,112,97,199,198,255,255]]}},{name:"vibrance",value:-.1},{name:"saturation",value:-.4},{name:"temperature",value:.1}],cement:[{name:"curves",value:{preset:[[0,0,73,74,191,177,235,221,255,255],[0,0,255,255],[0,0,60,54,198,210,255,255],[0,0,73,37,150,149,199,198,255,255]]}},{name:"vibrance",value:-.1},{name:"saturation",value:-.1}],sharp:[{name:"curves",value:{preset:[[0,0,42,20,199,218,224,246,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"vibrance",value:.1},{name:"sharpen",value:.1},{name:"clarity",value:.1}],corn:[{name:"temperature",value:.1},{name:"vibrance",value:.3},{name:"contrast",value:.1},{name:"curves",value:{preset:[[0,0,66,78,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}}],morning:[{name:"tint",value:.18},{name:"temperature",value:.1},{name:"highlights",value:.08},{name:"levels",value:{minin:0,maxin:245,minout:0,maxout:255,midin:1,mid:.5}},{name:"curves",value:{preset:[[64,64,150,181,254,255],[0,0,122,138,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"fill",value:{value:.2,mode:"overlay",fillColor:"#c27829"}}],ensalat:[{name:"highlights",value:.2},{name:"shadows",value:-.2},{name:"brightness",value:.1},{name:"levels",value:{minin:10,maxin:245,minout:0,maxout:255,midin:1,mid:.5}},{name:"curves",value:{preset:[[0,0,135,119,191,193,255,255],[0,0,255,255],[0,0,129,121,255,255],[0,0,255,255]]}},{name:"clarity",value:.2},{name:"sharpen",value:.15}],berry:[{name:"vibrance",value:.44},{name:"curves",value:{preset:[[0,0,62,66,121,135,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"contrast",value:.2},{name:"highlights",value:.4},{name:"shadows",value:-.2},{name:"levels",value:{minin:20,maxin:255,minout:0,maxout:255,midin:1,mid:.5}}],gritty:[{name:"saturation",value:-.4},{name:"levels",value:{minin:20,maxin:255,minout:0,maxout:255,midin:1,mid:.5}},{name:"curves",value:{preset:[[0,0,50,33,128,112,190,215,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"clarity",value:1},{name:"grain",value:.3}],sunny:[{name:"fill",value:{value:.2,mode:"overlay",fillColor:"#ffc260"}},{name:"temperature",value:.1},{name:"glamour",value:.4},{name:"clarity",value:.3}],film:[{name:"sharpen",value:.2},{name:"glamour",value:.5},{name:"grain",value:.5},{name:"highlights",value:-.2},{name:"shadows",value:-.2},{name:"saturation",value:-.2}],matte:[{name:"curves",value:{preset:[[0,50,38,56,79,82,152,153,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"contrast",value:.12},{name:"saturation",value:-.1}],deep:[{name:"curves",value:{preset:[[0,0,117,99,191,198,255,255],[0,0,71,38,177,209,255,255],[0,0,236,255],[0,28,75,101,190,171,254,233]]}},{name:"saturation",value:-.3}],aladin:[{name:"curves",value:{preset:[[0,0,255,255],[0,52,87,99,255,255],[0,0,106,107,194,190,254,212],[0,0,166,129,254,142]]}}],amber:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,98,150,255,255],[0,0,138,117,255,255],[0,128,254,129]]}}],anne:[{name:"contrast",value:.25},{name:"curves",value:{preset:[[0,0,255,255],[0,0,78,66,135,171,255,255],[0,0,99,87,180,208,255,255],[0,0,94,93,171,161,255,255]]}}],antonio:[{name:"glamour",value:.8}],alex:[{name:"glamour",value:.6}],bob:[{name:"saturation",value:-.6},{name:"highlights",value:.5}],greg:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,74,50,181,198,255,255],[0,0,61,41,108,170,158,207,254,208],[0,0,83,56,168,204,255,255]]}}],hagrid:[{name:"vibrance",value:.9},{name:"saturation",value:.1},{name:"clarity",value:.5},{name:"shadows",value:-.3}],harry:[{name:"fill",value:{value:.7,mode:"overlay",fillColor:"#d6b277"}},{name:"grain",value:.5}],ivan:[{name:"fill",value:{value:.4,mode:"overlay",fillColor:"#ff0044"}},{name:"shadows",value:.15},{name:"levels",value:{minin:6,maxin:255,minout:0,maxout:255,midin:1,mid:.5}}],jean:[{name:"levels",value:{minin:56,maxin:233,minout:0,maxout:255,midin:1,mid:.5}},{name:"saturation",value:-1},{name:"tint",value:.1},{name:"exposure",value:.78},{name:"bloom",value:.1}],josh:[{name:"curves",value:{preset:[[0,0,78,52,175,207,255,255],[0,0,255,255],[0,0,255,255],[0,64,87,129,254,193]]}}],karen:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,89,144,255,255],[0,0,138,112,255,255],[0,0,162,88,255,255]]}}],lucas:[{name:"tint",value:1},{name:"saturation",value:-.85},{name:"contrast",value:.4},{name:"shadows",value:1},{name:"temperature",value:.1}],melissa:[{name:"curves",value:{preset:[[0,0,255,255],[0,62,255,255],[0,0,255,255],[0,61,254,193]]}}],peter:[{name:"curves",value:{preset:[[0,0,255,255],[0,6,31,20,65,26,87,51,195,190,254,230],[0,11,24,27,102,131,189,195,255,255],[0,40,126,148,254,177]]}}],salomon:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,83,50,177,213,255,255],[0,0,69,55,186,205,255,255],[11,56,254,212]]}},{name:"contrast",value:-.2}],sara:[{name:"vibrance",value:1},{name:"contrast",value:.1},{name:"highlights",value:.3}],sophia:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,140,116,222,254],[0,0,70,59,182,201,255,255],[0,29,252,227]]}},{name:"saturation",value:.3}],tony:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,92,42,218,252],[0,0,73,75,157,194,255,255],[0,27,254,227]]}}],agnes:[{name:"desaturate",value:1},{name:"contrast",value:.5}],conny:[{name:"saturation",value:-.55},{name:"temperature",value:.25},{name:"brightness",value:-.25},{name:"levels",value:{minin:14,maxin:233,minout:0,maxout:255,midin:1,mid:.5}},{name:"exposure",value:.35},{name:"highlights",value:-.9}],gordon:[{name:"desaturate",value:1},{name:"temperature",value:.7},{name:"tint",value:.3},{name:"saturation",value:-.2}],harrison:[{name:"toning",value:{value:1,lightColor:"#fff0d7",darkColor:"#301a18"}},{name:"grain",value:.2}],henry:[{name:"toning",value:{value:1,lightColor:"#fff0d7",darkColor:"#301a18"}},{name:"saturation",value:-.5}],logan:[{name:"glamour",value:.5},{name:"tint",value:.4},{name:"saturation",value:-.35},{name:"toning",value:{value:.8,lightColor:"#fff0d7",darkColor:"#301a18"}}],olay:[{name:"saturation",value:-1},{name:"grain",value:.5},{name:"vignette",value:.5}],porter:[{name:"saturation",value:-1},{name:"vignette",value:.4},{name:"levels",value:{minin:50,maxin:205,minout:0,maxout:255,midin:1,mid:.5}}],tom:[{name:"desaturate",value:1}],sampi:[{name:"toning",value:{value:1,lightColor:"#ffe4c4",darkColor:"#000000"}},{name:"levels",value:{minin:0,maxin:217,minout:0,maxout:255,midin:1,mid:.5}},{name:"temperature",value:.3}],vinny:[{name:"curves",value:{preset:[[0,0,133,111,255,255],[0,0,255,255],[0,0,255,255],[0,0,133,138,255,255]]}},{name:"vibrance",value:-1},{name:"saturation",value:1},{name:"temperature",value:.8},{name:"contrast",value:-.1},{name:"highlights",value:.1}],borg:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,94,66,227,255],[0,0,93,94,179,198,255,255],[0,19,254,228]]}},{name:"fill",value:{value:.1,mode:"default",fillColor:"#ccff00"}}],carl:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,93,64,227,255],[0,0,93,94,181,189,255,255],[0,19,254,228]]}},{name:"vignette",value:.3},{name:"contrast",value:.15},{name:"saturation",value:-.3}],coco:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,64,97,255,255],[0,0,142,122,255,255],[0,0,144,112,255,255]]}}],doris:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,78,48,177,209,255,255],[0,0,92,94,179,208,255,255],[0,52,254,215]]}},{name:"saturation",value:-.2}],doug:[{name:"curves",value:{preset:[[0,0,255,255],[0,64,255,255],[0,0,255,255],[1,64,252,193]]}}],earl:[{name:"vignette",value:.4},{name:"curves",value:{preset:[[0,0,255,255],[0,0,222,254],[0,47,223,254],[0,129,222,255]]}},{name:"fill",value:{value:.8,mode:"multiply",fillColor:"#f7daae"}}],kevin:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,75,164,126,212,255,255],[1,37,111,147,217,217],[73,80,149,111,200,173]]}},{name:"contrast",value:.15}],nash:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,221,255],[0,48,222,252],[0,129,226,255]]}},{name:"fill",value:{value:1,mode:"multiply",fillColor:"#f7daae"}},{name:"levels",value:{minin:0,maxin:225,minout:0,maxout:255,midin:1,mid:.5}}],stan:[{name:"curves",value:{preset:[[0,0,69,54,180,199,255,255],[0,117,64,158,147,185,208,228,255,255],[0,69,101,131,180,182,209,224,254,233],[1,87,83,110,168,149,215,145,254,184]]}}],sun:[{name:"fill",value:{value:.8,mode:"multiply",fillColor:"#fbf2a3"}},{name:"vignette",value:-.25}],"bd orange":[{name:"curves",value:{preset:[[1,34,43,43,77,70,97,108,138,158,173,184,223,208,254,231],[28,3,55,38,110,92,152,148,201,208,255,255],[0,0,62,55,193,189,255,255],[0,27,55,75,116,110,190,149,254,163]]}},{name:"grain",value:.33}],blues:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,77,54,181,207,255,255],[0,0,73,51,180,209,255,255],[0,0,54,75,201,185,255,255]]}}],country:[{name:"curves",value:{preset:[[0,0,84,74,115,105,255,255],[0,0,73,80,93,124,255,255],[0,0,50,34,93,105,119,142,255,255],[0,0,85,85,125,112,255,255]]}}],lemonpell:[{name:"curves",value:{preset:[[0,36,80,84,156,190,255,255],[0,0,255,255],[0,0,103,105,158,176,255,255],[0,19,107,83,198,196,255,255]]}}],joyful:[{name:"vibrance",value:.3},{name:"saturation",value:.4},{name:"temperature",value:-.35},{name:"tint",value:.8},{name:"exposure",value:.3}],"tiny dc":[{name:"curves",value:{preset:[[0,0,255,255],[0,0,79,46,199,217,255,255],[9,1,110,126,254,232],[0,46,92,103,191,158,254,205]]}},{name:"grain",value:.3}],sheberios:[{name:"temperature",value:.5},{name:"saturation",value:.25}],superone:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#4d0033"}},{name:"levels",value:{minin:50,maxin:175,minout:0,maxout:255,midin:1,mid:.5}}],tonola:[{name:"toning",value:{value:.8,lightColor:"#ddff99",darkColor:"#4d0033"}},{name:"levels",value:{minin:26,maxin:213,minout:0,maxout:255,midin:1,mid:.5}},{name:"saturation",value:.36},{name:"temperature",value:.22}],reddish:[{name:"toning",value:{value:.8,lightColor:"#ffd693",darkColor:"#6e2500"}},{name:"contrast",value:.3},{name:"highlights",value:1}],fellowing:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#4d2f00"}},{name:"levels",value:{minin:24,maxin:203,minout:0,maxout:255,midin:1,mid:.5}},{name:"contrast",value:.14},{name:"saturation",value:.3},{name:"temperature",value:.18}],grassland:[{name:"toning",value:{value:.7,lightColor:"#ddff99",darkColor:"#004d19"}},{name:"levels",value:{minin:18,maxin:227,minout:0,maxout:255,midin:1,mid:.5}},{name:"contrast",value:.16}],springs:[{name:"toning",value:{value:1,lightColor:"#ddff99",darkColor:"#001a26"}},{name:"highlights",value:1},{name:"levels",value:{minin:40,maxin:155,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:1}],justblues:[{name:"toning",value:{value:.79,lightColor:"#c6ecff",darkColor:"#1a004d"}},{name:"levels",value:{minin:16,maxin:189,minout:0,maxout:255,midin:1,mid:.5}},{name:"saturation",value:.2},{name:"contrast",value:.2}],bluesteel:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#1a004d"}},{name:"levels",value:{minin:0,maxin:215,minout:12,maxout:255,midin:1,mid:.5}}],flowerpot:[{name:"toning",value:{value:.8,lightColor:"#ff99dd",darkColor:"#334d00"}},{name:"levels",value:{minin:22,maxin:215,minout:0,maxout:255,midin:1,mid:.5}},{name:"vignette",value:-.2}],stinker:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#1a004d"}},{name:"levels",value:{minin:0,maxin:247,minout:8,maxout:255,midin:1,mid:.5}},{name:"brightness",value:.14},{name:"contrast",value:.4}],violiin:[{name:"contrast",value:.32},{name:"toning",value:{value:1,lightColor:"#c3a6ff",darkColor:"#210000"}},{name:"levels",value:{minin:22,maxin:223,minout:0,maxout:255,midin:1,mid:.5}},{name:"exposure",value:.22},{name:"brightness",value:.12}],blupur:[{name:"toning",value:{value:.8,lightColor:"#ff99dd",darkColor:"#074461"}},{name:"vibrance",value:.7},{name:"contrast",value:.3}],beyllo:[{name:"vibrance",value:1},{name:"saturation",value:1},{name:"temperature",value:-.55},{name:"tint",value:.1},{name:"levels",value:{minin:0,maxin:255,minout:24,maxout:249,midin:1,mid:.5}},{name:"toning",value:{value:.76,lightColor:"#ffd500",darkColor:"#7d0354"}},{name:"curves",value:{preset:[[0,0,255,255],[0,0,131,115,255,255],[0,0,136,128,255,255],[0,0,122,145,255,255]]}},{name:"vignette",value:.28}],wifortress:[{name:"toning",value:{value:1,lightColor:"#6cceff",darkColor:"#001a26"}},{name:"highlights",value:1},{name:"levels",value:{minin:40,maxin:155,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:1}],vib:[{name:"vibrance",value:.1},{name:"saturation",value:.5},{name:"brightness",value:.1},{name:"temperature",value:.5},{name:"levels",value:{minin:12,maxin:253,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:.2},{name:"curves",value:{preset:[[0,0,255,255],[0,0,70,80,198,181,255,255],[0,0,140,135,255,255],[0,0,74,96,200,172,255,255]]}},{name:"toning",value:{value:.07,lightColor:"#ffeed2",darkColor:"#360606"}},{name:"contrast",value:-.1}],ranguit:[{name:"saturation",value:.22},{name:"temperature",value:.96},{name:"tint",value:-.28},{name:"contrast",value:.14},{name:"brightness",value:-.2},{name:"levels",value:{minin:0,maxin:237,minout:56,maxout:255,midin:1,mid:.5}},{name:"toning",value:{value:.26,lightColor:"#ddff99",darkColor:"#292321"}}],rangeen:[{name:"vibrance",value:1},{name:"saturation",value:.46},{name:"temperature",value:.36},{name:"levels",value:{minin:0,maxin:251,minout:14,maxout:255,midin:1,mid:.5}},{name:"shadows",value:.34},{name:"highlights",value:.12},{name:"toning",value:{value:.12,lightColor:"#79ffe0",darkColor:"#f5166b"}},{name:"contrast",value:-.1},{name:"curves",value:{preset:[[0,0,144,152,255,255],[0,0,136,107,255,255],[0,0,115,102,255,255],[0,0,106,91,255,255]]}}],creamlow:[{name:"vibrance",value:.82},{name:"saturation",value:-.24},{name:"temperature",value:1},{name:"tint",value:.78},{name:"contrast",value:-.3},{name:"levels",value:{minin:40,maxin:247,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:.64},{name:"toning",value:{value:.29,lightColor:"#ddff99",darkColor:"#912709"}},{name:"curves",value:{preset:[[0,0,5,13,78,83,172,162,255,255],[0,0,255,255],[0,0,131,120,255,255],[0,0,68,61,175,184,255,255]]}}],sven:[{name:"vibrance",value:.7},{name:"temperature",value:.5},{name:"tint",value:.3},{name:"exposure",value:.2},{name:"contrast",value:-.2},{name:"levels",value:{minin:4,maxin:255,minout:0,maxout:235,midin:1,mid:.5}},{name:"highlights",value:-.3},{name:"shadows",value:.3},{name:"grain",value:.3},{name:"vignette",value:.45}],yenely:[{name:"tint",value:.5},{name:"levels",value:{minin:0,maxin:235,minout:20,maxout:255,midin:1,mid:.5}},{name:"saturation",value:-.62},{name:"contrast",value:-.3},{name:"shadows",value:-.6},{name:"curves",value:{preset:[[0,0,148,105,255,255],[0,0,92,79,128,227,255,255],[0,0,74,103,119,172,255,255],[0,0,111,148,255,255]]}},{name:"highlights",value:1},{name:"brightness",value:.14},{name:"temperature",value:.3},{name:"vibrance",value:1},{name:"exposure",value:-.1}],ragwarm:[{name:"temperature",value:.62},{name:"levels",value:{minin:32,maxin:255,minout:0,maxout:243,midin:1,mid:.5}},{name:"highlights",value:-.14},{name:"vignette",value:.28},{name:"toning",value:{value:.07,lightColor:"#99ffbb",darkColor:"#15378f"}},{name:"curves",value:{preset:[[0,0,126,125,255,255],[0,0,255,255],[0,0,130,121,255,255],[0,0,138,124,255,255]]}}],greered:[{name:"vibrance",value:.32},{name:"temperature",value:.4},{name:"tint",value:-.5},{name:"brightness",value:.24},{name:"contrast",value:-.1},{name:"vignette",value:.31},{name:"shadows",value:.38}],danligter:[{name:"saturation",value:.86},{name:"temperature",value:-1},{name:"tint",value:-.92},{name:"brightness",value:.22},{name:"exposure",value:.22},{name:"contrast",value:.1},{name:"levels",value:{minin:0,maxin:239,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:-.12},{name:"dehaze",value:-.12},{name:"toning",value:{value:.14,lightColor:"#ffd899",darkColor:"#00344d"}},{name:"curves",value:{preset:[[0,0,255,255],[0,0,96,115,162,194,255,255],[0,0,101,97,185,189,255,255],[0,0,144,130,222,228,255,255]]}}],trotto:[{name:"vibrance",value:1},{name:"saturation",value:-.34},{name:"temperature",value:1},{name:"tint",value:-.26},{name:"levels",value:{minin:24,maxin:229,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:.14},{name:"dehaze",value:.38},{name:"toning",value:{value:.5,lightColor:"#46fa82",darkColor:"#bf5a20"}},{name:"curves",value:{preset:[[0,0,66,56,168,171,255,255],[0,0,68,77,191,179,255,255],[0,0,73,80,173,166,255,255],[0,0,82,110,171,185,255,255]]}},{name:"vignette",value:.14}],rasky:[{name:"vibrance",value:1},{name:"saturation",value:1},{name:"temperature",value:-.84},{name:"tint",value:.34},{name:"dehaze",value:.52},{name:"toning",value:{value:.39,lightColor:"#cbd420",darkColor:"#d9180a"}}],garage:[{name:"tint",value:.6},{name:"saturation",value:-.04},{name:"shadows",value:-1},{name:"grain",value:.42},{name:"glamour",value:.3}],travelster:[{name:"vibrance",value:.84},{name:"saturation",value:.66},{name:"contrast",value:.24},{name:"levels",value:{minin:62,maxin:255,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:.62},{name:"shadows",value:-.3},{name:"curves",value:{preset:[[0,32,136,111,255,255],[0,0,149,161,255,255],[0,0,148,139,255,255],[0,0,99,173,164,213,255,255]]}},{name:"toning",value:{value:.3,lightColor:"#ffd899",darkColor:"#334d00"}},{name:"sharpen",value:.24},{name:"grain",value:.23},{name:"temperature",value:.72},{name:"vignette",value:.13}],strawberry:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#ff0000"}}],clementine:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#ff9e00"}}],pear:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#aaff00"}}],apple:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#00ff55"}}],blueberry:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#00aaff"}}],grapes:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#5500ff"}}],dragon:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#ff00aa"}}],punch:[{name:"curves",value:{preset:[[0,0,80,64,173,193,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"vibrance",value:.5}],bright:[{name:"highlights",value:-.3},{name:"shadows",value:.5},{name:"levels",value:{minin:0,maxin:215,minout:10,maxout:255,midin:1,mid:.5}}],contrast:[{name:"contrast",value:.2},{name:"highlights",value:.2},{name:"levels",value:{minin:20,maxin:215,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:.4}],vivid:[{name:"vibrance",value:.4},{name:"shadows",value:.25}],clairify:[{name:"clarity",value:.6},{name:"sharpen",value:.1},{name:"glamour",value:.2}]};class Rt{constructor(r=0,e=0){this.x=r,this.y=e}distanceTo(r){return Math.sqrt(Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2))}angleTo(r){let e=-(this.x-r.x),i=this.y-r.y,n=360-Math.atan2(i,e)*(180/Math.PI);return n<0&&(n+=360),n>360&&(n-=360),n}dot(r){return this.x*r.x+this.y*r.y}lengthSQ(){return this.dot(this)}length(){return Math.sqrt(this.lengthSQ())}hypot2(){return this.dot(this)}hypot(){return Math.hypot(this.x,this.y)}add(r){return r?r instanceof Rt?new Rt(this.x+r.x,this.y+r.y):new Rt(this.x+r,this.y+r):this}neg(r){return r instanceof Rt?new Rt(this.x-r.x,this.y-r.y):new Rt(this.x-r,this.y-r)}mul(r){return r instanceof Rt?new Rt(this.x*r.x,this.y*r.y):new Rt(this.x*r,this.y*r)}rotateAround(r,e){let i=Math.sin(e),n=Math.cos(e),a=this.x-r.x,o=this.y-r.y,s=a*i+o*n;return new Rt(a*n-o*i+r.x,s+r.y)}equalTo(r){return this.x===r.x&&this.y===r.y}clone(){return new Rt(this.x,this.y)}}class gT{constructor(r,e){var i,n,a,o,s,l,u,h,f,c,d,p,v;if(r!=null&&e!=null){for(h=r.length-1,o=[],d=[],u=[],c=[],p=[],n=[],i=[],a=[],l=[],f=[],s=0;0<=h?s<h:s>h;0<=h?s+=1:s-=1)o[s]=r[s+1]-r[s],l[s]=e[s+1]-e[s],f[s]=l[s]/o[s];for(s=1;1<=h?s<h:s>h;1<=h?s+=1:s-=1)d[s]=3/o[s]*(e[s+1]-e[s])-3/o[s-1]*(e[s]-e[s-1]);for(u[0]=1,c[0]=0,p[0]=0,s=1;1<=h?s<h:s>h;1<=h?s+=1:s-=1)u[s]=2*(r[s+1]-r[s-1])-o[s-1]*c[s-1],c[s]=o[s]/u[s],p[s]=(d[s]-o[s-1]*p[s-1])/u[s];for(u[h]=1,p[h]=0,n[h]=0,s=v=h-1;v<=0?s<=0:s>=0;v<=0?s+=1:s-=1)n[s]=p[s]-c[s]*n[s+1],i[s]=(e[s+1]-e[s])/o[s]-o[s]*(n[s+1]+2*n[s])/3,a[s]=(n[s+1]-n[s])/(3*o[s]);this.x=r.slice(0,h+1),this.a=e.slice(0,h),this.b=i,this.c=n.slice(0,h),this.d=a}}interpolate(r){var e,i,n;for(i=n=this.x.length-1;(n<=0?i<=0:i>=0)&&!(this.x[i]<=r);n<=0?i+=1:i-=1);return e=r-this.x[i],this.a[i]+this.b[i]*e+this.c[i]*Math.pow(e,2)+this.d[i]*Math.pow(e,3)}}var yT=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform sampler2D paletteMap;void main(){lowp vec4 base=texture2D(uSampler,vTextureCoord.xy);float r=texture2D(paletteMap,vec2(base.r,0)).r;float g=texture2D(paletteMap,vec2(base.g,0)).g;float b=texture2D(paletteMap,vec2(base.b,0)).b;gl_FragColor=vec4(r,g,b,base.a);}`;class ff extends yt{constructor(r){super(null,yT),this.paletteMap=r}get paletteMap(){return this.uniforms.paletteMap}set paletteMap(r){const e=new Uint8Array(Array.from(r.data));this.uniforms.paletteMap=j.fromBuffer(e,e.length/4,1)}}class za extends yt{constructor(r){super(null,null),this._imageData=new ImageData(256,1),this.options=r}apply(r,e,i,n,a){this._mapping.apply(r,e,i,n)}update(){let r=this._imageData;we.fillPaletteMap(za.createCurveSet(this.uniforms.options),r),this.uniforms.paletteMap=r,this._mapping?this._mapping.paletteMap=this.uniforms.paletteMap:this._mapping=new ff(this.uniforms.paletteMap)}get options(){return this.uniforms.options}set options(r){this.uniforms.options=r,this.update()}static createCurveSet(r){const e=new Array,i=new Array,n=new Array,a=new Array;for(let o=0;o<r.preset[0].length;o+=2)e.push(new Rt(r.preset[0][o],r.preset[0][o+1]));for(let o=0;o<r.preset[1].length;o+=2)i.push(new Rt(r.preset[1][o],r.preset[1][o+1]));for(let o=0;o<r.preset[2].length;o+=2)n.push(new Rt(r.preset[2][o],r.preset[2][o+1]));for(let o=0;o<r.preset[3].length;o+=2)a.push(new Rt(r.preset[3][o],r.preset[3][o+1]));return new we(1,e,i,n,a)}}class we{constructor(r=255,e=[],i=[],n=[],a=[]){this.scale=r,this.rgb=e,this.red=i,this.green=n,this.blue=a,this.percent=1}static getInterpolation(r,e){let i=[],n=[],a=new Float32Array(256);for(var o=0;o<e.length;o++)i.push(e[o].x*r),n.push(e[o].y*r);let s=new gT(i,n);for(var l=0;l<Math.ceil(i[0]);l++)a[l]=n[0];for(l=Math.ceil(i[0]);l<Math.ceil(i[i.length-1]);l++)a[l]=s.interpolate(l);for(l=Math.ceil(i[i.length-1]);l<256;l++)a[l]=n[n.length-1];return a}static fillPaletteMap(r,e){let i=we.getInterpolation(r.scale,r.rgb),n=we.getInterpolation(r.scale,r.red),a=we.getInterpolation(r.scale,r.green),o=we.getInterpolation(r.scale,r.blue);for(let s=0;s<256;++s){let l=s-i[s];e.data[4*s]=s-Math.round((s-(n[s]-l))*r.percent),e.data[4*s+1]=s-Math.round((s-(a[s]-l))*r.percent),e.data[4*s+2]=s-Math.round((s-(o[s]-l))*r.percent)}}}class cf{constructor(r=0,e=255,i=0,n=255,a=1,o=.5){this.minin=r,this.maxin=e,this.minout=i,this.maxout=n,this.midin=a,this.mid=o,this.map=s=>(s=(s-this.minin)/(this.maxin-this.minin),s=Math.pow(s,this.midin),(s=this.minout+s*(this.maxout-this.minout))>this.maxout?s=this.maxout:s<this.minout&&(s=this.minout),Math.round(s))}reset(){this.minout=0,this.maxout=255,this.midin=1,this.minin=0,this.maxin=255,this.mid=.5}isFlat(){return Boolean(this.minout==0&&this.maxout==255&&this.mid==.5&&this.minin==0&&this.maxin==255)}setMid(r){this.mid=(r-this.minin)/(this.maxin-this.minin),this.midin=this.midToIn(this.mid)}midToIn(r){return Math.min(Math.max(Math.pow(9.99,2*r-1),.1),9.99)}static fillPaletteMap(r,e){for(let i=0;i<256;++i){let n=r.map(i);e.data[4*i]=n,e.data[4*i+1]=n,e.data[4*i+2]=n}}static fillRGBPaletteMap(r,e,i,n){for(let a=0;a<256;++a)n.data[4*a]=r?r.map(a):a,n.data[4*a+1]=e?e.map(a):a,n.data[4*a+2]=i?i.map(a):a}}class bT extends yt{constructor(r){super(null,null),this._imageData=new ImageData(256,1),this.options=r}apply(r,e,i,n,a){this._mapping.apply(r,e,i,n)}update(){let r=this._imageData;this.uniforms.paletteMap=r,cf.fillPaletteMap(this.uniforms.options,r),this._mapping?this._mapping.paletteMap=this.uniforms.paletteMap:this._mapping=new ff(this.uniforms.paletteMap)}get options(){return this.uniforms.options}set options(r){this.uniforms.options=r,this.update()}}class xT extends ct{constructor(r){super(null,null),this.filtersArr=[],this.effectName=r,this.effectType="preset",this.filtersArr=_T[r].map(e=>{if(e.name==="curves")return new za(e.value);if(e.name==="fill"){const{value:i,fillColor:n,mode:a}=e.value;return new te[e.name](i,n,a)}if(e.name==="levels"){const i=e.value,n=new cf(Math.round(i.minin*1),Math.round(255-(255-i.maxin)*1));return new bT(n)}if(e.name==="toning"){const{value:i,lightColor:n,darkColor:a}=e.value;return new te[e.name](i,n,a)}return e.name==="desaturate"?new te.saturation(-1):e.name==="vignette"?e.value<0?new te.vignetteWhite(e.value):new te.vignetteBlack(Math.abs(e.value)):new te[e.name](e.value)})}apply(r,e,i,n,a){const o=r.getFilterTexture(),s=[o];for(let l=0;l<this.filtersArr.length;l++)if(l===0)this.filtersArr[l].apply(r,e,o,1,a);else{const u=r.getFilterTexture();s.push(u),this.filtersArr[l].apply(r,s[l-1],u,1)}r.applyFilter(this,s[s.length-1],i,n),s.reverse().map(l=>{r.returnFilterTexture(l)})}}const te={vibrance:v2,saturation:m2,temperature:g2,tint:b2,hue:x2,brightness:T2,exposure:I2,contrast:C2,black:R2,white:N2,highlights:P2,shadows:U2,sharpen:S2,clarity:L2,smooth:B2,blur:M2,grain:D2,vignetteWhite:X2,vignetteBlack:j2,glamour:z2,bloom:Y2,dehaze:Z2,toning:Va,fill:mT};/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.16.1
 * @author George Michael Brower
 * @license MIT
 */class Vt{constructor(r,e,i,n,a="div"){this.parent=r,this.object=e,this.property=i,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(n),this.$name=document.createElement("div"),this.$name.classList.add("name"),Vt.nextNameID=Vt.nextNameID||0,this.$name.id=`lil-gui-name-${++Vt.nextNameID}`,this.$widget=document.createElement(a),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(r){return this._name=r,this.$name.innerHTML=r,this}onChange(r){return this._onChange=r,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(r){return this._onFinishChange=r,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(r=!0){return this.disable(!r)}disable(r=!0){return r===this._disabled?this:(this._disabled=r,this.domElement.classList.toggle("disabled",r),this.$disable.toggleAttribute("disabled",r),this)}options(r){const e=this.parent.add(this.object,this.property,r);return e.name(this._name),this.destroy(),e}min(r){return this}max(r){return this}step(r){return this}listen(r=!0){return this._listening=r,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const r=this.save();r!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=r}getValue(){return this.object[this.property]}setValue(r){return this.object[this.property]=r,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(r){return this.setValue(r),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class TT extends Vt{constructor(r,e,i){super(r,e,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Ca(t){let r,e;return(r=t.match(/(#|0x)?([a-f0-9]{6})/i))?e=r[2]:(r=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(r[1]).toString(16).padStart(2,0)+parseInt(r[2]).toString(16).padStart(2,0)+parseInt(r[3]).toString(16).padStart(2,0):(r=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),e?"#"+e:!1}const ET={isPrimitive:!0,match:t=>typeof t=="string",fromHexString:Ca,toHexString:Ca},Fr={isPrimitive:!0,match:t=>typeof t=="number",fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},IT={isPrimitive:!1,match:Array.isArray,fromHexString(t,r,e=1){const i=Fr.fromHexString(t);r[0]=(i>>16&255)/255*e,r[1]=(i>>8&255)/255*e,r[2]=(i&255)/255*e},toHexString([t,r,e],i=1){i=255/i;const n=t*i<<16^r*i<<8^e*i<<0;return Fr.toHexString(n)}},CT={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,r,e=1){const i=Fr.fromHexString(t);r.r=(i>>16&255)/255*e,r.g=(i>>8&255)/255*e,r.b=(i&255)/255*e},toHexString({r:t,g:r,b:e},i=1){i=255/i;const n=t*i<<16^r*i<<8^e*i<<0;return Fr.toHexString(n)}},wT=[ET,Fr,IT,CT];function RT(t){return wT.find(r=>r.match(t))}class AT extends Vt{constructor(r,e,i,n){super(r,e,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=RT(this.initialValue),this._rgbScale=n,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const a=Ca(this.$text.value);a&&this._setValueFromHexString(a)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(r){if(this._format.isPrimitive){const e=this._format.fromHexString(r);this.setValue(e)}else this._format.fromHexString(r,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(r){return this._setValueFromHexString(r),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class xn extends Vt{constructor(r,e,i){super(r,e,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",n=>{n.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class NT extends Vt{constructor(r,e,i,n,a,o){super(r,e,i,"number"),this._initInput(),this.min(n),this.max(a);const s=o!==void 0;this.step(s?o:this._getImplicitStep(),s),this.updateDisplay()}min(r){return this._min=r,this._onUpdateMinMax(),this}max(r){return this._max=r,this._onUpdateMinMax(),this}step(r,e=!0){return this._step=r,this._stepExplicit=e,this}updateDisplay(){const r=this.getValue();if(this._hasSlider){let e=(r-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=e*100+"%"}return this._inputFocused||(this.$input.value=r),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const r=()=>{const _=parseFloat(this.$input.value);isNaN(_)||this.setValue(this._clamp(_))},e=_=>{const g=parseFloat(this.$input.value);isNaN(g)||(this._snapClampSetValue(g+_),this.$input.value=this.getValue())},i=_=>{_.code==="Enter"&&this.$input.blur(),_.code==="ArrowUp"&&(_.preventDefault(),e(this._step*this._arrowKeyMultiplier(_))),_.code==="ArrowDown"&&(_.preventDefault(),e(this._step*this._arrowKeyMultiplier(_)*-1))},n=_=>{this._inputFocused&&(_.preventDefault(),e(this._step*this._normalizeMouseWheel(_)))};let a=!1,o,s,l,u,h;const f=5,c=_=>{o=_.clientX,s=l=_.clientY,a=!0,u=this.getValue(),h=0,window.addEventListener("mousemove",d),window.addEventListener("mouseup",p)},d=_=>{if(a){const g=_.clientX-o,y=_.clientY-s;Math.abs(y)>f?(_.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(g)>f&&p()}a||(h-=(_.clientY-l)*this._step*this._arrowKeyMultiplier(_),u+h>this._max?h=this._max-u:u+h<this._min&&(h=this._min-u),this._snapClampSetValue(u+h)),l=_.clientY},p=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",p)},v=()=>{this._inputFocused=!0},m=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",r),this.$input.addEventListener("keydown",i),this.$input.addEventListener("wheel",n,{passive:!1}),this.$input.addEventListener("mousedown",c),this.$input.addEventListener("focus",v),this.$input.addEventListener("blur",m)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const r=(_,g,y,T,x)=>(_-g)/(y-g)*(x-T)+T,e=_=>{const g=this.$slider.getBoundingClientRect();let y=r(_,g.left,g.right,this._min,this._max);this._snapClampSetValue(y)},i=_=>{this._setDraggingStyle(!0),e(_.clientX),window.addEventListener("mousemove",n),window.addEventListener("mouseup",a)},n=_=>{e(_.clientX)},a=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",a)};let o=!1,s,l;const u=_=>{_.preventDefault(),this._setDraggingStyle(!0),e(_.touches[0].clientX),o=!1},h=_=>{_.touches.length>1||(this._hasScrollBar?(s=_.touches[0].clientX,l=_.touches[0].clientY,o=!0):u(_),window.addEventListener("touchmove",f),window.addEventListener("touchend",c))},f=_=>{if(o){const g=_.touches[0].clientX-s,y=_.touches[0].clientY-l;Math.abs(g)>Math.abs(y)?u(_):(window.removeEventListener("touchmove",f),window.removeEventListener("touchend",c))}else _.preventDefault(),e(_.touches[0].clientX)},c=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",c)},d=this._callOnFinishChange.bind(this),p=400;let v;const m=_=>{if(Math.abs(_.deltaX)<Math.abs(_.deltaY)&&this._hasScrollBar)return;_.preventDefault();const y=this._normalizeMouseWheel(_)*this._step;this._snapClampSetValue(this.getValue()+y),this.$input.value=this.getValue(),clearTimeout(v),v=setTimeout(d,p)};this.$slider.addEventListener("mousedown",i),this.$slider.addEventListener("touchstart",h,{passive:!1}),this.$slider.addEventListener("wheel",m,{passive:!1})}_setDraggingStyle(r,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",r),document.body.classList.toggle("lil-gui-dragging",r),document.body.classList.toggle(`lil-gui-${e}`,r)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(r){let{deltaX:e,deltaY:i}=r;return Math.floor(r.deltaY)!==r.deltaY&&r.wheelDelta&&(e=0,i=-r.wheelDelta/120,i*=this._stepExplicit?1:10),e+-i}_arrowKeyMultiplier(r){let e=this._stepExplicit?1:10;return r.shiftKey?e*=10:r.altKey&&(e/=10),e}_snap(r){const e=Math.round(r/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(r){return r<this._min&&(r=this._min),r>this._max&&(r=this._max),r}_snapClampSetValue(r){this.setValue(this._clamp(this._snap(r)))}get _hasScrollBar(){const r=this.parent.root.$children;return r.scrollHeight>r.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class PT extends Vt{constructor(r,e,i,n){super(r,e,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(n)?n:Object.values(n),this._names=Array.isArray(n)?n:Object.keys(n),this._names.forEach(a=>{const o=document.createElement("option");o.innerHTML=a,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const r=this.getValue(),e=this._values.indexOf(r);return this.$select.selectedIndex=e,this.$display.innerHTML=e===-1?r:this._names[e],this}}class UT extends Vt{constructor(r,e,i){super(r,e,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",n=>{n.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const OT=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "\u2195";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "\u25BE";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "\u25B8";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "\u2713";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function ST(t){const r=document.createElement("style");r.innerHTML=t;const e=document.querySelector("head link[rel=stylesheet], head style");e?document.head.insertBefore(r,e):document.head.appendChild(r)}let Xu=!1;class Wa{constructor({parent:r,autoPlace:e=r===void 0,container:i,width:n,title:a="Controls",injectStyles:o=!0,touchStyles:s=!0}={}){if(this.parent=r,this.root=r?r.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{(l.code==="Enter"||l.code==="Space")&&(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(a),s&&this.domElement.classList.add("allow-touch-styles"),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),!Xu&&o&&(ST(OT),Xu=!0),i?i.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),n&&this.domElement.style.setProperty("--width",n+"px"),this.domElement.addEventListener("keydown",l=>l.stopPropagation()),this.domElement.addEventListener("keyup",l=>l.stopPropagation())}add(r,e,i,n,a){if(Object(i)===i)return new PT(this,r,e,i);const o=r[e];switch(typeof o){case"number":return new NT(this,r,e,i,n,a);case"boolean":return new TT(this,r,e);case"string":return new UT(this,r,e);case"function":return new xn(this,r,e)}console.error(`gui.add failed
	property:`,e,`
	object:`,r,`
	value:`,o)}addColor(r,e,i=1){return new AT(this,r,e,i)}addFolder(r){return new Wa({parent:this,title:r})}load(r,e=!0){return r.controllers&&this.controllers.forEach(i=>{i instanceof xn||i._name in r.controllers&&i.load(r.controllers[i._name])}),e&&r.folders&&this.folders.forEach(i=>{i._title in r.folders&&i.load(r.folders[i._title])}),this}save(r=!0){const e={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof xn)){if(i._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);e.controllers[i._name]=i.save()}}),r&&this.folders.forEach(i=>{if(i._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);e.folders[i._title]=i.save()}),e}open(r=!0){return this._closed=!r,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(r=!0){return this._hidden=!r,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(r=!0){return this._closed=!r,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");const i=a=>{a.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const n=r?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!r),requestAnimationFrame(()=>{this.$children.style.height=n+"px"})}),this}title(r){return this._title=r,this.$title.innerHTML=r,this}reset(r=!0){return(r?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(r){return this._onChange=r,this}_callOnChange(r){this.parent&&this.parent._callOnChange(r),this._onChange!==void 0&&this._onChange.call(this,{object:r.object,property:r.property,value:r.getValue(),controller:r})}onFinishChange(r){return this._onFinishChange=r,this}_callOnFinishChange(r){this.parent&&this.parent._callOnFinishChange(r),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:r.object,property:r.property,value:r.getValue(),controller:r})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(r=>r.destroy())}controllersRecursive(){let r=Array.from(this.controllers);return this.folders.forEach(e=>{r=r.concat(e.controllersRecursive())}),r}foldersRecursive(){let r=Array.from(this.folders);return this.folders.forEach(e=>{r=r.concat(e.foldersRecursive())}),r}}function FT(t){var i,n;const r=new Wa,e={reset:()=>{r.reset(!0),t.stage.filters=[]},filters:{vibrance:{enable:!1,value:0},saturation:{enable:!1,value:0},temperature:{enable:!1,value:0},tint:{enable:!1,value:0},hue:{enable:!1,value:0},brightness:{enable:!1,value:0},exposure:{enable:!1,value:0},contrast:{enable:!1,value:0},black:{enable:!1,value:0},white:{enable:!1,value:0},highlights:{enable:!1,value:0},shadows:{enable:!1,value:0},sharpen:{enable:!1,value:0,_valueMin:0,_valueMax:1},clarity:{enable:!1,value:0},smooth:{enable:!1,value:0,_valueMin:0,_valueMax:1},blur:{enable:!1,value:0,_valueMin:0,_valueMax:1},grain:{enable:!1,value:0,_valueMin:0,_valueMax:1},vignetteWhite:{enable:!1,value:0,_valueMin:0,_valueMax:1},vignetteBlack:{enable:!1,value:0,_valueMin:0,_valueMax:1},glamour:{enable:!1,value:0,_valueMin:0,_valueMax:1},bloom:{enable:!1,value:0,_valueMin:0,_valueMax:1},dehaze:{enable:!1,value:0,_valueMin:0,_valueMax:1},toning:{enable:!1,value:0,_valueMin:0,_valueMax:1,lightColor:"#f20",darkColor:"#f0f"},fill:{enable:!1,value:0,_valueMin:0,_valueMax:1,fillColor:"#f20",mode:"softLight",_modeOptions:["default","screen","overlay","multiply","colorDodge","colorBurn","hardLight","softLight","vividLight"]}}};Object.keys(e.filters).map(a=>{e.filters[a].__name=a}),r.add(e,"reset");for(const a in e.filters){let o=a.charAt(0).toUpperCase()+a.slice(1),s=a;const l=r.addFolder(o).close();for(const u in e.filters[s]){let h=e.filters[s][u];if(u.charAt(0)!=="_")if(typeof h=="number"){let f=(i=e.filters[s][`_${u}Min`])!=null?i:-1,c=(n=e.filters[s][`_${u}Max`])!=null?n:1;l.add(e.filters[s],u,f,c,.05)}else if(h.charAt&&h.charAt(0)==="#")l.addColor(e.filters[s],u);else if(typeof h=="string"){let f=e.filters[s][`_${u}Options`];f&&l.add(e.filters[s],u,f)}else l.add(e.filters[s],u)}}return r.onChange(({property:a,value:o,object:s})=>{let l=s.__name;if(a==="enable")if(o)t.stage.filters.push(new te[l]);else{let u=t.stage.filters.find(f=>f instanceof te[l]),h=t.stage.filters.indexOf(u);t.stage.filters.splice(h,1)}else{if(!s.enable)return;let u=t.stage.filters.find(h=>h instanceof te[l]);u[a]=o}}),r}const di={friends:["aladin","alex","amber","anne","antonio","bob","greg","hagrid","harry","ivan","jean","josh","karen","lucas","melissa","peter","salomon","sara","sophia","tony"],"too-old":["agnes","conny","gordon","harrison","henry","logan","olay","porter","sampi","tom","vinny"],instage:["borg","carl","coco","doris","doug","earl","kevin","nash","stan","sun","bd orange","blues","country","lemonpell","joyful","tiny dc","sheberios"],colors:["superone","tonola","reddish","fellowing","grassland","springs","justblues","bluesteel","flowerpot","stinker","violiin","blupur","beyllo","wifortress"],retro:["vib","ranguit","rangeen","creamlow","sven","yenely","ragwarm","greered","danligter","trotto","rasky","garage","travelster"],shades:["strawberry","clementine","pear","apple","blueberry","grapes","dragon"],tuning:["punch","bright","contrast","vivid","clairify"],food:["berry","ensalat","morning","corn","sharp"],urban:["cement","style","mold","shimmer","stalker","sham"],nature:["beach","flower","forest"]};function LT(t,r){let e="";Object.keys(di).map(i=>{e+=`<div class="list"><h2 class="list-title">${i}</h2>`;for(let n=0;n<di[i].length;n++)e+=`<button data-key="${di[i][n]}">${di[i][n]}</button>`;e+="</div>"}),document.getElementById("presetBox").innerHTML=e,Array.from(document.querySelectorAll("#presetBox button")).map(i=>{i.addEventListener("click",()=>{r.reset(!0);let n=new xT(i.dataset.key);t.stage.filters=[n]})})}function GT(t,r){document.getElementById("fileElem").addEventListener("change",e=>{let n=e.target.files[0],a=window.URL.createObjectURL(n),o=ve.from(a);o.anchor.set(0),t.stage.removeChildAt(0),t.stage.addChild(o)})}function BT(t,r){document.getElementById("webcam").addEventListener("click",e=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(i=>{const n=document.createElement("video");n.onloadedmetadata=()=>{n.play(),t.stage.removeChildAt(0);const a=j.from(n),o=a.baseTexture.resource.source;o.autoplay=!0,o.muted=!0;const s=new ve(a);t.stage.addChild(s),console.log("loaded")},n.srcObject=i}).catch(()=>{alert("Webcam Permissions Denied")})})}const ar=new Fh({view:document.getElementById("playground"),width:590,height:419});let df=ve.from("./pic.png");df.anchor.set(0);ar.stage.addChild(df);ar.stage.filters=[];const MT=FT(ar);LT(ar,MT);GT(ar);BT(ar)});export default kT();
