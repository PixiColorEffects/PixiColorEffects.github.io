import{F as u,f as y,h as f,s as d,T,G as O,S as D,A}from"./vendor.fbe33d2b.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=a(r);fetch(r.href,n)}};R();var $="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){vec4 col=texture2D(uSampler,vTextureCoord.xy);vec3 color=col.rgb;float luminance=color.r*0.299+color.g*0.587+color.b*0.114;float mn=min(min(color.r,color.g),color.b);float mx=max(max(color.r,color.g),color.b);float sat=(1.0-(mx-mn))*(1.0-mx)*luminance*5.0;vec3 lightness=vec3((mn+mx)/2.0);color=mix(color,mix(color,lightness,-value),sat);gl_FragColor=vec4(mix(color,lightness,(1.0-lightness)*(1.0-value)/2.0*abs(value)),col.a);}";class G extends u{constructor(e=0){super(null,$);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e}}class q extends u{constructor(e=0){super(null,null);this._colorMatrixFilter=new y.ColorMatrixFilter,this.value=e}apply(e,a,l,r,n){this._colorMatrixFilter.apply(e,a,l,r)}get value(){return this.uniforms.value}set value(e){let a=2*Number(e)/3+1,l=-.5*(a-1);this._colorMatrixFilter.matrix=[a,l,l,0,0,l,a,l,0,0,l,l,a,0,0,0,0,0,1,0],this.uniforms.value=e}}var I="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){vec4 color=texture2D(uSampler,vTextureCoord);color.r=clamp(color.r+value,0.0,1.0);color.b=clamp(color.b-value,0.0,1.0);gl_FragColor=color;}";class U extends u{constructor(e=0){super(null,I);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e/6}}var V="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){vec4 color=texture2D(uSampler,vTextureCoord);color.g=clamp(color.g+value,0.0,1.0);gl_FragColor=color;}";class K extends u{constructor(e=0){super(null,V);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e/6}}class P extends u{constructor(e=0){super(null,null);this._colorMatrixFilter=new y.ColorMatrixFilter,this.value=e}apply(e,a,l,r,n){this._colorMatrixFilter.apply(e,a,l,r)}get value(){return this.uniforms.value}set value(e){this._colorMatrixFilter.reset(),this._colorMatrixFilter.hue(e*180,!0),this.uniforms.value=e}}class H extends u{constructor(e=0){super(null,null);this._colorMatrixFilter=new y.ColorMatrixFilter,this.value=e}apply(e,a,l,r,n){this._colorMatrixFilter.apply(e,a,l,r)}get value(){return this.uniforms.value}set value(e){this._colorMatrixFilter.brightness(e+1,!1),this.uniforms.value=e}}var E=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;const float epsilon=0.000001;const float mx=1.0-epsilon;const mat3 matRGBtoROMM=mat3(0.5293459296226501,0.3300727903842926,0.14058130979537964,0.09837432950735092,0.8734610080718994,0.028164653107523918,0.01688321679830551,0.11767247319221497,0.8654443025588989);const mat3 matROMMtoRGB=mat3(2.0340757369995117,-0.727334201335907,-0.3067416846752167,-0.22881317138671875,1.2317301034927368,-0.0029169507324695587,-0.008569774217903614,-0.1532866358757019,1.1618564128875732);float ramp(in float t){t*=2.0;if(t>=1.0){t-=1.0;t=log(0.5)/log(0.5*(1.0-t)+0.9332*t);}return clamp(t,0.001,10.0);}vec3 rgb2hsv(in vec3 c){vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(in vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 setHue(in vec3 res,in vec3 base){vec3 hsv=rgb2hsv(base);vec3 res_hsv=rgb2hsv(res);return hsv2rgb(vec3(hsv.x,res_hsv.y,res_hsv.z));}void main(){lowp vec4 col=texture2D(uSampler,vTextureCoord.xy);vec3 base=col.rgb*matRGBtoROMM;float a=abs(value)*col.a+epsilon;float v=pow(2.0,a*2.0+1.0)-2.0;float m=mx-exp(-v);vec3 res=(value>0.0)?(1.0-exp(-v*base))/m : log(1.0-base*m)/-v;res=mix(base,res,min(a*100.0,1.0));res=setHue(res,base);res=pow(res,vec3(ramp(1.0-(0.0*col.a+1.0)/2.0)));res=res*matROMMtoRGB;gl_FragColor=vec4(res,col.a);}`;class Y extends u{constructor(e=0){super(null,E);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e}}class Z extends u{constructor(e=0){super(null,null);this._colorMatrixFilter=new y.ColorMatrixFilter,this.value=e}apply(e,a,l,r,n){this._colorMatrixFilter.apply(e,a,l,r)}get value(){return this.uniforms.value}set value(e){this._colorMatrixFilter.contrast(e,!1),this.uniforms.value=e}}var W="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){float bval=value/255.0;float wval=(255.0/(255.0-value));vec3 color=texture2D(uSampler,vTextureCoord).rgb;color=color*wval-(bval*wval);gl_FragColor=vec4(color,texture2D(uSampler,vTextureCoord).a);}";class N extends u{constructor(e=0){super(null,W);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e*(255/2)}}var X="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;void main(){float bval=0.0/255.0;float wval=(255.0/(value-255.0)*-1.0);vec3 color=texture2D(uSampler,vTextureCoord).rgb;color=color*wval-(bval*wval);gl_FragColor=vec4(color,texture2D(uSampler,vTextureCoord).a);}";class J extends u{constructor(e=0){super(null,X);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e*(255/2)}}var F=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;const float epsilon=0.000001;const float mx=1.0-epsilon;const float PI=3.1415926535897932384626433832795;const mat3 matRGBtoROMM=mat3(0.5293459296226501,0.3300727903842926,0.14058130979537964,0.09837432950735092,0.8734610080718994,0.028164653107523918,0.01688321679830551,0.11767247319221497,0.8654443025588989);const mat3 matROMMtoRGB=mat3(2.0340757369995117,-0.727334201335907,-0.3067416846752167,-0.22881317138671875,1.2317301034927368,-0.0029169507324695587,-0.008569774217903614,-0.1532866358757019,1.1618564128875732);float luma_romm(in vec3 color){return dot(color,vec3(0.242655,0.755158,0.002187));}float luma(in vec3 color){return dot(color,vec3(0.298839,0.586811,0.11435));}vec3 rgb2hsv(in vec3 c){vec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);vec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));vec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));float d=q.x-min(q.w,q.y);float e=1.0e-10;return vec3(abs(q.z+(q.w-q.y)/(6.0*d+e)),d/(q.x+e),q.x);}vec3 hsv2rgb(in vec3 c){vec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);vec3 p=abs(fract(c.xxx+K.xyz)*6.0-K.www);return c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);}vec3 setHue(in vec3 res,in vec3 base){vec3 hsv=rgb2hsv(base);vec3 res_hsv=rgb2hsv(res);return hsv2rgb(vec3(hsv.x,res_hsv.y,res_hsv.z));}float gaussian(in float x){return 1.0-exp(-PI*2.0*x*x);}void main(){lowp vec4 col=texture2D(uSampler,vTextureCoord.xy);lowp vec3 map=col.rgb;vec3 base=col.rgb*matRGBtoROMM;float base_lum=luma(col.rgb);float map_lum=luma_romm(map*matRGBtoROMM);float exposure=mix(value,0.0,1.0-map_lum)*col.a;float a=abs(exposure)*col.a+epsilon;float v=pow(2.0,a+1.0)-2.0;float m=mx-exp(-v);vec3 res=(exposure>0.0)?(1.0-exp(-v*base))/m : log(1.0-base*m)/-v;res=mix(base,res,min(a*100.0,1.0));res=setHue(res,base);res=res*matROMMtoRGB;gl_FragColor=vec4(res,col.a);}`;class Q extends u{constructor(e=0){super(null,F);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e}}class ee extends u{constructor(e=0){super(null,F);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e*-1}}var ae="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform vec2 px;uniform float m[9];uniform float value;void main(void){vec4 c11=texture2D(uSampler,vTextureCoord-px);vec4 c12=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y-px.y));vec4 c13=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y-px.y));vec4 c21=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y));vec4 c22=texture2D(uSampler,vTextureCoord);vec4 c23=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y));vec4 c31=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y+px.y));vec4 c32=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y+px.y));vec4 c33=texture2D(uSampler,vTextureCoord+px);vec4 color=c11*m[0]+c12*m[1]+c13*m[2]+c21*m[3]+c22*m[4]+c23*m[5]+c31*m[6]+c32*m[7]+c33*m[8];gl_FragColor=color*value+(c22*(1.0-value));}";class te extends u{constructor(e=0){super(null,ae);this.value=e}get value(){return this.uniforms.value}set value(e){var r,n,o,t;let[a,l]=(t=(o=(n=(r=this.uniforms)==null?void 0:r.filterGlobals)==null?void 0:n.uniforms)==null?void 0:o.inputSize)!=null?t:[1920,1080];this.uniforms.m=new Float32Array([-1,-1,-1,-1,9,-1,-1,-1,-1]),this.uniforms.px=[1/a,1/l],this.uniforms.value=e/2}}var le=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 px;float Lum(vec3 c){return 0.299*c.r+0.587*c.g+0.114*c.b;}float BlendOverlayf(float base,float blend){return(base<0.5 ?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend)));}vec3 BlendOverlay(vec3 base,vec3 blend){return vec3(BlendOverlayf(base.r,blend.r),BlendOverlayf(base.g,blend.g),BlendOverlayf(base.b,blend.b));}float BlendVividLightf(float base,float blend){float BlendColorBurnf=(((2.0*blend)==0.0)?(2.0*blend): max((1.0-((1.0-base)/(2.0*blend))),0.0));float BlendColorDodgef=(((2.0*(blend-0.5))==1.0)?(2.0*(blend-0.5)): min(base/(1.0-(2.0*(blend-0.5))),1.0));return((blend<0.5)? BlendColorBurnf : BlendColorDodgef);}vec3 BlendVividLight(vec3 base,vec3 blend){return vec3(BlendVividLightf(base.r,blend.r),BlendVividLightf(base.g,blend.g),BlendVividLightf(base.b,blend.b));}float normpdf(in float x,in float sigma){return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;}vec3 blurMap(){const int mSize=11;const int kSize=(mSize-1)/2;float kernel[mSize];vec3 final_colour=vec3(0.0);float sigma=7.0;float Z=0.0;for(int j=0;j<=kSize;++j){kernel[kSize+j]=kernel[kSize-j]=normpdf(float(j),sigma);}for(int j=0;j<mSize;++j){Z+=kernel[j];}for(int i=-kSize;i<=kSize;++i){for(int j=-kSize;j<=kSize;++j){final_colour+=kernel[kSize+j]*kernel[kSize+i]*texture2D(uSampler,(vTextureCoord.xy+vec2(float(i),float(j))*px)).rgb;}}return vec3(final_colour/(Z*Z));}void main(){vec4 base4=texture2D(uSampler,vTextureCoord.xy);vec3 blurMap=blurMap();vec3 base=base4.rgb;float intensity=(value<0.0)?(value/2.0): value;float lum=Lum(base);vec3 col=vec3(lum);vec3 mask=vec3(1.0-pow(lum,1.8));vec3 layer=vec3(1.0-Lum(blurMap));vec3 detail=clamp(BlendVividLight(col,layer),0.0,1.0);vec3 inverse=mix(1.0-detail,detail,(intensity+1.0)/2.0);gl_FragColor=vec4(BlendOverlay(base,mix(vec3(0.5),inverse,mask)),base4.a);}`;class re extends u{constructor(e=0){super(null,le);this.value=e}get value(){return this.uniforms.value}set value(e){var r,n,o,t;let[a,l]=(t=(o=(n=(r=this.uniforms)==null?void 0:r.filterGlobals)==null?void 0:n.uniforms)==null?void 0:o.inputSize)!=null?t:[1920,1080];this.uniforms.px=[1/a,1/l],this.uniforms.value=e*2}}var ne="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform vec2 px;uniform float m[9];uniform float value;void main(void){vec4 c11=texture2D(uSampler,vTextureCoord-px);vec4 c12=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y-px.y));vec4 c13=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y-px.y));vec4 c21=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y));vec4 c22=texture2D(uSampler,vTextureCoord);vec4 c23=texture2D(uSampler,vec2(vTextureCoord.x+px.x,vTextureCoord.y));vec4 c31=texture2D(uSampler,vec2(vTextureCoord.x-px.x,vTextureCoord.y+px.y));vec4 c32=texture2D(uSampler,vec2(vTextureCoord.x,vTextureCoord.y+px.y));vec4 c33=texture2D(uSampler,vTextureCoord+px);vec4 color=c11*m[0]+c12*m[1]+c13*m[2]+c21*m[3]+c22*m[4]+c23*m[5]+c31*m[6]+c32*m[7]+c33*m[8];gl_FragColor=color*value+(c22*(1.0-value));}";class oe extends u{constructor(e=0){super(null,ne);this.value=e}get value(){return this.uniforms.value}set value(e){var r,n,o,t;let[a,l]=(t=(o=(n=(r=this.uniforms)==null?void 0:r.filterGlobals)==null?void 0:n.uniforms)==null?void 0:o.inputSize)!=null?t:[1920,1080];this.uniforms.m=new Float32Array([1/16,2/16,1/16,2/16,.25,2/16,1/16,2/16,1/16]),this.uniforms.px=[1/a,1/l],this.uniforms.value=e}}class ie extends u{constructor(e=0){super(null,null);this._blurFilter=new y.BlurFilter,this.value=e}apply(e,a,l,r,n){this._blurFilter.apply(e,a,l,r)}get value(){return this.uniforms.value}set value(e){this._blurFilter.blur=e*10,this.uniforms.value=e}}var ue="precision highp float;uniform sampler2D uSampler;varying vec2 vTextureCoord;uniform float width;uniform float height;uniform float value;uniform float timer;const float permTexUnit=1.0/256.0;const float permTexUnitHalf=0.5/256.0;float grainsize=1.8;float lumamount=1.0;vec4 rnm(in vec2 tc){float noise=sin(dot(tc+vec2(timer,timer),vec2(12.9898,78.233)))*43758.5453;float noiseR=fract(noise)*2.0-1.0;float noiseG=fract(noise*1.2154)*2.0-1.0;float noiseB=fract(noise*1.3453)*2.0-1.0;float noiseA=fract(noise*1.3647)*2.0-1.0;return vec4(noiseR,noiseG,noiseB,noiseA);}float fade(in float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise3D(in vec3 p){vec3 pi=permTexUnit*floor(p)+permTexUnitHalf;vec3 pf=fract(p);float perm00=rnm(pi.xy).a;vec3 grad000=rnm(vec2(perm00,pi.z)).rgb*4.0-1.0;float n000=dot(grad000,pf);vec3 grad001=rnm(vec2(perm00,pi.z+permTexUnit)).rgb*4.0-1.0;float n001=dot(grad001,pf-vec3(0.0,0.0,1.0));float perm01=rnm(pi.xy+vec2(0.0,permTexUnit)).a;vec3 grad010=rnm(vec2(perm01,pi.z)).rgb*4.0-1.0;float n010=dot(grad010,pf-vec3(0.0,1.0,0.0));vec3 grad011=rnm(vec2(perm01,pi.z+permTexUnit)).rgb*4.0-1.0;float n011=dot(grad011,pf-vec3(0.0,1.0,1.0));float perm10=rnm(pi.xy+vec2(permTexUnit,0.0)).a;vec3 grad100=rnm(vec2(perm10,pi.z)).rgb*4.0-1.0;float n100=dot(grad100,pf-vec3(1.0,0.0,0.0));vec3 grad101=rnm(vec2(perm10,pi.z+permTexUnit)).rgb*4.0-1.0;float n101=dot(grad101,pf-vec3(1.0,0.0,1.0));float perm11=rnm(pi.xy+vec2(permTexUnit,permTexUnit)).a;vec3 grad110=rnm(vec2(perm11,pi.z)).rgb*4.0-1.0;float n110=dot(grad110,pf-vec3(1.0,1.0,0.0));vec3 grad111=rnm(vec2(perm11,pi.z+permTexUnit)).rgb*4.0-1.0;float n111=dot(grad111,pf-vec3(1.0,1.0,1.0));vec4 n_x=mix(vec4(n000,n001,n010,n011),vec4(n100,n101,n110,n111),fade(pf.x));vec2 n_xy=mix(n_x.xy,n_x.zw,fade(pf.y));float n_xyz=mix(n_xy.x,n_xy.y,fade(pf.z));return n_xyz;}vec2 coordRot(in vec2 tc,in float angle){float aspect=width/height;float rotX=((tc.x*2.0-1.0)*aspect*cos(angle))-((tc.y*2.0-1.0)*sin(angle));float rotY=((tc.y*2.0-1.0)*cos(angle))+((tc.x*2.0-1.0)*aspect*sin(angle));rotX=((rotX/aspect)*0.5+0.5);rotY=rotY*0.5+0.5;return vec2(rotX,rotY);}void main(){vec3 rotOffset=vec3(1.425,3.892,5.835);vec2 rotCoordsR=coordRot(vTextureCoord,timer+rotOffset.x);vec3 noise=vec3(pnoise3D(vec3(rotCoordsR*vec2(width/grainsize,height/grainsize),0.0)));vec4 tex=texture2D(uSampler,vTextureCoord);vec3 col=tex.rgb;vec3 lumcoeff=vec3(0.299,0.587,0.114);float luminance=mix(0.0,dot(col,lumcoeff),lumamount);float lum=smoothstep(0.2,0.0,luminance);lum+=luminance;noise=mix(noise,vec3(0.0),pow(lum,4.0));col=col+noise*value;gl_FragColor=vec4(col,tex.w);}";class se extends u{constructor(e=0){super(null,ue);this.value=e}get value(){return this.uniforms.value}set value(e){var r,n,o,t;let[a,l]=(t=(o=(n=(r=this.uniforms)==null?void 0:r.filterGlobals)==null?void 0:n.uniforms)==null?void 0:o.inputSize)!=null?t:[1920,1080];this.uniforms.width=a,this.uniforms.height=l,this.uniforms.timer=1,this.uniforms.value=e/10}}var ve="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform float size;void main(){vec4 color=texture2D(uSampler,vTextureCoord);float dist=distance(vTextureCoord,vec2(0.5,0.5));float grd=smoothstep(0.8,size*0.799,dist*(value*0.6+size*2.0));color.rgb+=vec3(1.0,1.0,1.0)*(1.0-grd);gl_FragColor=color;}";class me extends u{constructor(e=0){super(null,ve);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.size=.25,this.uniforms.value=(e-.1)*2}}var ce="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform float size;void main(){vec4 color=texture2D(uSampler,vTextureCoord);float dist=distance(vTextureCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(value*0.75+size*2.0));gl_FragColor=color;}";class fe extends u{constructor(e=0){super(null,ce);this.value=e}get value(){return this.uniforms.value}set value(e){this.uniforms.size=.25,this.uniforms.value=(e-.1)*2}}var de="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 px;float normpdf(in float x,in float sigma){return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;}vec3 blurMap(){const int mSize=11;const int kSize=(mSize-1)/2;float kernel[mSize];vec3 final_colour=vec3(0.0);float sigma=7.0;float Z=0.0;for(int j=0;j<=kSize;++j){kernel[kSize+j]=kernel[kSize-j]=normpdf(float(j),sigma);}for(int j=0;j<mSize;++j){Z+=kernel[j];}for(int i=-kSize;i<=kSize;++i){for(int j=-kSize;j<=kSize;++j){final_colour+=kernel[kSize+j]*kernel[kSize+i]*texture2D(uSampler,(vTextureCoord.xy+vec2(float(i),float(j))*px)).rgb;}}return vec3(final_colour/(Z*Z));}float luma(vec3 color){return dot(color,vec3(0.299,0.587,0.114));}void main(){vec4 base=texture2D(uSampler,vTextureCoord);vec3 color=blurMap();color=vec3(luma(color));color=vec3((base.r<=0.5)?(2.0*base.r*color.r):(1.0-2.0*(1.0-base.r)*(1.0-color.r)),(base.g<=0.5)?(2.0*base.g*color.g):(1.0-2.0*(1.0-base.g)*(1.0-color.g)),(base.b<=0.5)?(2.0*base.b*color.b):(1.0-2.0*(1.0-base.b)*(1.0-color.b)));gl_FragColor=mix(base,vec4(color,base.a),value);}";class he extends u{constructor(e=0){super(null,de);this.value=e}get value(){return this.uniforms.value}set value(e){var r,n,o,t;let[a,l]=(t=(o=(n=(r=this.uniforms)==null?void 0:r.filterGlobals)==null?void 0:n.uniforms)==null?void 0:o.inputSize)!=null?t:[1920,1080];this.uniforms.px=[1/a,1/l],this.uniforms.value=e}}var pe="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 px;float thresh=.5;void main(){vec4 sum=vec4(0);int j=-2;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=-1;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=0;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=1;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);j=2;for(int i=-2;i<=2;i++)sum+=texture2D(uSampler,vTextureCoord+vec2(i,j)*px);sum/=25.0;gl_FragColor=texture2D(uSampler,vTextureCoord);if(length(sum)>thresh){gl_FragColor+=sum*value;}}";class ge extends u{constructor(e=0){super(null,pe);this.value=e}get value(){return this.uniforms.value}set value(e){var r,n,o,t;let[a,l]=(t=(o=(n=(r=this.uniforms)==null?void 0:r.filterGlobals)==null?void 0:n.uniforms)==null?void 0:o.inputSize)!=null?t:[1920,1080];this.uniforms.px=[1/a,1/l],this.uniforms.value=e}}var be=`#define GLSLIFY 1;
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec2 size;float hazeMap(vec4 base){vec3 color=vec3(1.0,1.0,1.0);vec2 step=vec2(1.0/size.xy);const int patchRadius=1;for(int i=-patchRadius;i<=patchRadius;++i){for(int j=-patchRadius;j<=patchRadius;++j){vec2 uv=clamp(vTextureCoord+(vec2(i,j)*step),0.0,1.0);color=min(color,base.rgb);}}return min(color.r,min(color.g,color.b));}void main(){lowp vec4 base=texture2D(uSampler,vTextureCoord.xy);lowp float haze=hazeMap(base);float transmission=1.0-0.95*haze;const float A=0.95;const float t0=0.1;float t=mix(1.0,max(t0,transmission),value);vec3 J=(base.rgb-A)/t+A;gl_FragColor=vec4(J,base.a);}`;class xe extends u{constructor(e=0){super(null,be);this.value=e}get value(){return this.uniforms.value}set value(e){var r,n,o,t;let[a,l]=(t=(o=(n=(r=this.uniforms)==null?void 0:r.filterGlobals)==null?void 0:n.uniforms)==null?void 0:o.inputSize)!=null?t:[1920,1080];this.uniforms.size=[1/a,1/l],this.uniforms.value=e}}var Ce="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform sampler2D paletteMap;uniform float value;float luma(vec3 color){return dot(color,vec3(0.299,0.587,0.114));}void main(){lowp vec4 base=texture2D(uSampler,vTextureCoord.xy);float avg=luma(base.rgb);float r=texture2D(paletteMap,vec2(avg,0)).r;float g=texture2D(paletteMap,vec2(avg,0)).g;float b=texture2D(paletteMap,vec2(avg,0)).b;gl_FragColor=mix(base,vec4(r,g,b,base.a),value);}";class _ extends u{constructor(e=0,a="#ff2200",l="#ff00ff"){super(null,Ce);this._imageData=new ImageData(256,1),this.value=e,this.lightColor=a,this.darkColor=l}update(){const[e,a,l]=f(d(this.uniforms.lightColor)),[r,n,o]=f(d(this.uniforms.darkColor));let t=this._imageData;_.fillPaletteMap({value:this.uniforms.value,lightColor:{r:e*255,g:a*255,b:l*255},darkColor:{r:r*255,g:n*255,b:o*255}},t);const s=new Uint8Array(Array.from(t.data));this.uniforms.paletteMap=T.fromBuffer(s,s.length/4,1)}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}get lightColor(){return this.uniforms.lightColor}set lightColor(e){this.uniforms.lightColor=e,this.update()}get darkColor(){return this.uniforms.darkColor}set darkColor(e){this.uniforms.darkColor=e,this.update()}static fillPaletteMap(e,a){for(let l=0;l<256;++l){let r=l/255;a.data[4*l]=Math.round(e.lightColor.r*r+e.darkColor.r*(1-r)),a.data[4*l+1]=Math.round(e.lightColor.g*r+e.darkColor.g*(1-r)),a.data[4*l+2]=Math.round(e.lightColor.b*r+e.darkColor.b*(1-r))}}}var ye="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendSoftLight(float base,float blend){return(blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));}vec3 blendSoftLight(vec3 base,vec3 blend){return vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));}vec3 blendSoftLight(vec3 base,vec3 blend,float opacity){return(blendSoftLight(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendSoftLight(base.rgb,color.rgb,value),base.a);}";class Se extends u{constructor(e=0,a="#f20"){super(null,ye);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var we="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendOverlay(float base,float blend){return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));}vec3 blendOverlay(vec3 base,vec3 blend){return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));}vec3 blendHardLight(vec3 base,vec3 blend){return blendOverlay(blend,base);}vec3 blendHardLight(vec3 base,vec3 blend,float opacity){return(blendHardLight(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendHardLight(base.rgb,color.rgb,value),base.a);}";class Me extends u{constructor(e=0,a="#f20"){super(null,we);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var Te="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendColorBurn(float base,float blend){return(blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);}float blendColorDodge(float base,float blend){return(blend==1.0)?blend:min(base/(1.0-blend),1.0);}float blendVividLight(float base,float blend){return(blend<0.5)?blendColorBurn(base,(2.0*blend)):blendColorDodge(base,(2.0*(blend-0.5)));}vec3 blendVividLight(vec3 base,vec3 blend){return vec3(blendVividLight(base.r,blend.r),blendVividLight(base.g,blend.g),blendVividLight(base.b,blend.b));}vec3 blendVividLight(vec3 base,vec3 blend,float opacity){return(blendVividLight(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendVividLight(base.rgb,color.rgb,value),base.a);}";class De extends u{constructor(e=0,a="#f20"){super(null,Te);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var _e="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendOverlay(float base,float blend){return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));}vec3 blendOverlay(vec3 base,vec3 blend){return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));}vec3 blendOverlay(vec3 base,vec3 blend,float opacity){return(blendOverlay(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendOverlay(base.rgb,color.rgb,value),base.a);}";class ke extends u{constructor(e=0,a="#f20"){super(null,_e);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var ze="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;vec3 blendMultiply(vec3 base,vec3 blend){return base*blend;}vec3 blendMultiply(vec3 base,vec3 blend,float opacity){return(blendMultiply(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendMultiply(base.rgb,color.rgb,value),base.a);}";class Fe extends u{constructor(e=0,a="#f20"){super(null,ze);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var Le="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendColorDodge(float base,float blend){return(blend==1.0)?blend:min(base/(1.0-blend),1.0);}vec3 blendColorDodge(vec3 base,vec3 blend){return vec3(blendColorDodge(base.r,blend.r),blendColorDodge(base.g,blend.g),blendColorDodge(base.b,blend.b));}vec3 blendColorDodge(vec3 base,vec3 blend,float opacity){return(blendColorDodge(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendColorDodge(base.rgb,color.rgb,value),base.a);}";class Be extends u{constructor(e=0,a="#f20"){super(null,Le);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var je="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendColorBurn(float base,float blend){return(blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);}vec3 blendColorBurn(vec3 base,vec3 blend){return vec3(blendColorBurn(base.r,blend.r),blendColorBurn(base.g,blend.g),blendColorBurn(base.b,blend.b));}vec3 blendColorBurn(vec3 base,vec3 blend,float opacity){return(blendColorBurn(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendColorBurn(base.rgb,color.rgb,value),base.a);}";class Oe extends u{constructor(e=0,a="#f20"){super(null,je);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var Ae="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;float blendScreen(float base,float blend){return 1.0-((1.0-base)*(1.0-blend));}vec3 blendScreen(vec3 base,vec3 blend){return vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));}vec3 blendScreen(vec3 base,vec3 blend,float opacity){return(blendScreen(base,blend)*opacity+base*(1.0-opacity));}void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=vec4(blendScreen(base.rgb,color.rgb,value),base.a);}";class Re extends u{constructor(e=0,a="#f20"){super(null,Ae);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}var $e="precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform float value;uniform vec4 color;void main(){vec4 base=texture2D(uSampler,vTextureCoord.xy);gl_FragColor=mix(base,color,value);}";class Ge extends u{constructor(e=0,a="#f20"){super(null,$e);this.value=e,this.fillColor=a}update(){const[e,a,l]=f(d(this.uniforms.fillColor));this.uniforms.color=[e,a,l,1]}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}const z={default:Ge,screen:Re,overlay:ke,multiply:Fe,colorDodge:Be,colorBurn:Oe,hardLight:Me,softLight:Se,vividLight:De};class qe extends u{constructor(e=0,a="#ff2200",l="softLight"){super(null,null);this._fillFilter=new z[l],this.mode=l,this.value=e,this.fillColor=a}apply(e,a,l,r,n){this._fillFilter.apply(e,a,l,r)}update(){this._fillFilter.value=this.uniforms.value,this._fillFilter.fillColor=this.uniforms.fillColor}get mode(){return this.uniforms.mode}set mode(e){this._fillFilter=new z[e],this.uniforms.mode=e,this.update()}get fillColor(){return this.uniforms.fillColor}set fillColor(e){this.uniforms.fillColor=e,this.update()}get value(){return this.uniforms.value}set value(e){this.uniforms.value=e,this.update()}}const Ie={flower:[{name:"vibrance",value:.2},{name:"saturation",value:.1},{name:"temperature",value:.1}],forest:[{name:"saturation",value:-.2},{name:"vibrance",value:1},{name:"clarity",value:.2},{name:"temperature",value:.16},{name:"tint",value:.2},{name:"curves",value:{preset:[[0,0,65,52,173,190,236,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}}],beach:[{name:"saturation",value:.2},{name:"vibrance",value:.2},{name:"curves",value:{preset:[[0,0,68,56,199,208,255,255],[0,0,255,255],[0,0,98,97,196,201,255,255],[0,0,87,85,201,182,255,255]]}},{name:"temperature",value:.1}],sham:[{name:"saturation",value:-.3},{name:"fill",value:{value:.3,mode:"overlay",fillColor:"#99ddff"}},{name:"curves",value:{preset:[[60,31,191,217],[0,0,120,134,255,255],[0,0,255,255],[0,0,120,144,255,255]]}}],stalker:[{name:"curves",value:{preset:[[62,64,190,191],[0,0,133,125,255,255],[0,0,54,65,209,208,255,255],[60,62,96,99,240,230,255,255]]}},{name:"contrast",value:.1},{name:"saturation",value:-.2}],shimmer:[{name:"temperature",value:-.2},{name:"tint",value:-.12},{name:"fill",value:{value:.12,mode:"screen",fillColor:"#be0bff"}},{name:"curves",value:{preset:[[8,23,244,227],[0,0,255,255],[0,0,131,124,255,255],[0,0,149,112,255,255]]}}],mold:[{name:"curves",value:{preset:[[65,64,233,233],[0,0,138,121,255,255],[0,0,60,75,184,184,255,255],[0,0,64,75,181,176,255,255]]}},{name:"contrast",value:.1},{name:"saturation",value:-.12}],style:[{name:"curves",value:{preset:[[0,0,73,74,191,177,235,221,255,255],[0,26,89,64,121,126,180,213,255,255],[0,0,71,50,190,210,255,255],[61,64,112,97,199,198,255,255]]}},{name:"vibrance",value:-.1},{name:"saturation",value:-.4},{name:"temperature",value:.1}],cement:[{name:"curves",value:{preset:[[0,0,73,74,191,177,235,221,255,255],[0,0,255,255],[0,0,60,54,198,210,255,255],[0,0,73,37,150,149,199,198,255,255]]}},{name:"vibrance",value:-.1},{name:"saturation",value:-.1}],sharp:[{name:"curves",value:{preset:[[0,0,42,20,199,218,224,246,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"vibrance",value:.1},{name:"sharpen",value:.1},{name:"clarity",value:.1}],corn:[{name:"temperature",value:.1},{name:"vibrance",value:.3},{name:"contrast",value:.1},{name:"curves",value:{preset:[[0,0,66,78,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}}],morning:[{name:"tint",value:.18},{name:"temperature",value:.1},{name:"highlights",value:.08},{name:"levels",value:{minin:0,maxin:245,minout:0,maxout:255,midin:1,mid:.5}},{name:"curves",value:{preset:[[64,64,150,181,254,255],[0,0,122,138,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"fill",value:{value:.2,mode:"overlay",fillColor:"#c27829"}}],ensalat:[{name:"highlights",value:.2},{name:"shadows",value:-.2},{name:"brightness",value:.1},{name:"levels",value:{minin:10,maxin:245,minout:0,maxout:255,midin:1,mid:.5}},{name:"curves",value:{preset:[[0,0,135,119,191,193,255,255],[0,0,255,255],[0,0,129,121,255,255],[0,0,255,255]]}},{name:"clarity",value:.2},{name:"sharpen",value:.15}],berry:[{name:"vibrance",value:.44},{name:"curves",value:{preset:[[0,0,62,66,121,135,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"contrast",value:.2},{name:"highlights",value:.4},{name:"shadows",value:-.2},{name:"levels",value:{minin:20,maxin:255,minout:0,maxout:255,midin:1,mid:.5}}],gritty:[{name:"saturation",value:-.4},{name:"levels",value:{minin:20,maxin:255,minout:0,maxout:255,midin:1,mid:.5}},{name:"curves",value:{preset:[[0,0,50,33,128,112,190,215,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"clarity",value:1},{name:"grain",value:.3}],sunny:[{name:"fill",value:{value:.2,mode:"overlay",fillColor:"#ffc260"}},{name:"temperature",value:.1},{name:"glamour",value:.4},{name:"clarity",value:.3}],film:[{name:"sharpen",value:.2},{name:"glamour",value:.5},{name:"grain",value:.5},{name:"highlights",value:-.2},{name:"shadows",value:-.2},{name:"saturation",value:-.2}],matte:[{name:"curves",value:{preset:[[0,50,38,56,79,82,152,153,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"contrast",value:.12},{name:"saturation",value:-.1}],deep:[{name:"curves",value:{preset:[[0,0,117,99,191,198,255,255],[0,0,71,38,177,209,255,255],[0,0,236,255],[0,28,75,101,190,171,254,233]]}},{name:"saturation",value:-.3}],aladin:[{name:"curves",value:{preset:[[0,0,255,255],[0,52,87,99,255,255],[0,0,106,107,194,190,254,212],[0,0,166,129,254,142]]}}],amber:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,98,150,255,255],[0,0,138,117,255,255],[0,128,254,129]]}}],anne:[{name:"contrast",value:.25},{name:"curves",value:{preset:[[0,0,255,255],[0,0,78,66,135,171,255,255],[0,0,99,87,180,208,255,255],[0,0,94,93,171,161,255,255]]}}],antonio:[{name:"glamour",value:.8}],alex:[{name:"glamour",value:.6}],bob:[{name:"saturation",value:-.6},{name:"highlights",value:.5}],greg:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,74,50,181,198,255,255],[0,0,61,41,108,170,158,207,254,208],[0,0,83,56,168,204,255,255]]}}],hagrid:[{name:"vibrance",value:.9},{name:"saturation",value:.1},{name:"clarity",value:.5},{name:"shadows",value:-.3}],harry:[{name:"fill",value:{value:.7,mode:"overlay",fillColor:"#d6b277"}},{name:"grain",value:.5}],ivan:[{name:"fill",value:{value:.4,mode:"overlay",fillColor:"#ff0044"}},{name:"shadows",value:.15},{name:"levels",value:{minin:6,maxin:255,minout:0,maxout:255,midin:1,mid:.5}}],jean:[{name:"levels",value:{minin:56,maxin:233,minout:0,maxout:255,midin:1,mid:.5}},{name:"saturation",value:-1},{name:"tint",value:.1},{name:"exposure",value:.78},{name:"bloom",value:.1}],josh:[{name:"curves",value:{preset:[[0,0,78,52,175,207,255,255],[0,0,255,255],[0,0,255,255],[0,64,87,129,254,193]]}}],karen:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,89,144,255,255],[0,0,138,112,255,255],[0,0,162,88,255,255]]}}],lucas:[{name:"tint",value:1},{name:"saturation",value:-.85},{name:"contrast",value:.4},{name:"shadows",value:1},{name:"temperature",value:.1}],melissa:[{name:"curves",value:{preset:[[0,0,255,255],[0,62,255,255],[0,0,255,255],[0,61,254,193]]}}],peter:[{name:"curves",value:{preset:[[0,0,255,255],[0,6,31,20,65,26,87,51,195,190,254,230],[0,11,24,27,102,131,189,195,255,255],[0,40,126,148,254,177]]}}],salomon:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,83,50,177,213,255,255],[0,0,69,55,186,205,255,255],[11,56,254,212]]}},{name:"contrast",value:-.2}],sara:[{name:"vibrance",value:1},{name:"contrast",value:.1},{name:"highlights",value:.3}],sophia:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,140,116,222,254],[0,0,70,59,182,201,255,255],[0,29,252,227]]}},{name:"saturation",value:.3}],tony:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,92,42,218,252],[0,0,73,75,157,194,255,255],[0,27,254,227]]}}],agnes:[{name:"desaturate",value:1},{name:"contrast",value:.5}],conny:[{name:"saturation",value:-.55},{name:"temperature",value:.25},{name:"brightness",value:-.25},{name:"levels",value:{minin:14,maxin:233,minout:0,maxout:255,midin:1,mid:.5}},{name:"exposure",value:.35},{name:"highlights",value:-.9}],gordon:[{name:"desaturate",value:1},{name:"temperature",value:.7},{name:"tint",value:.3},{name:"saturation",value:-.2}],harrison:[{name:"toning",value:{value:1,lightColor:"#fff0d7",darkColor:"#301a18"}},{name:"grain",value:.2}],henry:[{name:"toning",value:{value:1,lightColor:"#fff0d7",darkColor:"#301a18"}},{name:"saturation",value:-.5}],logan:[{name:"glamour",value:.5},{name:"tint",value:.4},{name:"saturation",value:-.35},{name:"toning",value:{value:.8,lightColor:"#fff0d7",darkColor:"#301a18"}}],olay:[{name:"saturation",value:-1},{name:"grain",value:.5},{name:"vignette",value:.5}],porter:[{name:"saturation",value:-1},{name:"vignette",value:.4},{name:"levels",value:{minin:50,maxin:205,minout:0,maxout:255,midin:1,mid:.5}}],tom:[{name:"desaturate",value:1}],sampi:[{name:"toning",value:{value:1,lightColor:"#ffe4c4",darkColor:"#000000"}},{name:"levels",value:{minin:0,maxin:217,minout:0,maxout:255,midin:1,mid:.5}},{name:"temperature",value:.3}],vinny:[{name:"curves",value:{preset:[[0,0,133,111,255,255],[0,0,255,255],[0,0,255,255],[0,0,133,138,255,255]]}},{name:"vibrance",value:-1},{name:"saturation",value:1},{name:"temperature",value:.8},{name:"contrast",value:-.1},{name:"highlights",value:.1}],borg:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,94,66,227,255],[0,0,93,94,179,198,255,255],[0,19,254,228]]}},{name:"fill",value:{value:.1,mode:"default",fillColor:"#ccff00"}}],carl:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,93,64,227,255],[0,0,93,94,181,189,255,255],[0,19,254,228]]}},{name:"vignette",value:.3},{name:"contrast",value:.15},{name:"saturation",value:-.3}],coco:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,64,97,255,255],[0,0,142,122,255,255],[0,0,144,112,255,255]]}}],doris:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,78,48,177,209,255,255],[0,0,92,94,179,208,255,255],[0,52,254,215]]}},{name:"saturation",value:-.2}],doug:[{name:"curves",value:{preset:[[0,0,255,255],[0,64,255,255],[0,0,255,255],[1,64,252,193]]}}],earl:[{name:"vignette",value:.4},{name:"curves",value:{preset:[[0,0,255,255],[0,0,222,254],[0,47,223,254],[0,129,222,255]]}},{name:"fill",value:{value:.8,mode:"multiply",fillColor:"#f7daae"}}],kevin:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,75,164,126,212,255,255],[1,37,111,147,217,217],[73,80,149,111,200,173]]}},{name:"contrast",value:.15}],nash:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,221,255],[0,48,222,252],[0,129,226,255]]}},{name:"fill",value:{value:1,mode:"multiply",fillColor:"#f7daae"}},{name:"levels",value:{minin:0,maxin:225,minout:0,maxout:255,midin:1,mid:.5}}],stan:[{name:"curves",value:{preset:[[0,0,69,54,180,199,255,255],[0,117,64,158,147,185,208,228,255,255],[0,69,101,131,180,182,209,224,254,233],[1,87,83,110,168,149,215,145,254,184]]}}],sun:[{name:"fill",value:{value:.8,mode:"multiply",fillColor:"#fbf2a3"}},{name:"vignette",value:-.25}],"bd orange":[{name:"curves",value:{preset:[[1,34,43,43,77,70,97,108,138,158,173,184,223,208,254,231],[28,3,55,38,110,92,152,148,201,208,255,255],[0,0,62,55,193,189,255,255],[0,27,55,75,116,110,190,149,254,163]]}},{name:"grain",value:.33}],blues:[{name:"curves",value:{preset:[[0,0,255,255],[0,0,77,54,181,207,255,255],[0,0,73,51,180,209,255,255],[0,0,54,75,201,185,255,255]]}}],country:[{name:"curves",value:{preset:[[0,0,84,74,115,105,255,255],[0,0,73,80,93,124,255,255],[0,0,50,34,93,105,119,142,255,255],[0,0,85,85,125,112,255,255]]}}],lemonpell:[{name:"curves",value:{preset:[[0,36,80,84,156,190,255,255],[0,0,255,255],[0,0,103,105,158,176,255,255],[0,19,107,83,198,196,255,255]]}}],joyful:[{name:"vibrance",value:.3},{name:"saturation",value:.4},{name:"temperature",value:-.35},{name:"tint",value:.8},{name:"exposure",value:.3}],"tiny dc":[{name:"curves",value:{preset:[[0,0,255,255],[0,0,79,46,199,217,255,255],[9,1,110,126,254,232],[0,46,92,103,191,158,254,205]]}},{name:"grain",value:.3}],sheberios:[{name:"temperature",value:.5},{name:"saturation",value:.25}],superone:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#4d0033"}},{name:"levels",value:{minin:50,maxin:175,minout:0,maxout:255,midin:1,mid:.5}}],tonola:[{name:"toning",value:{value:.8,lightColor:"#ddff99",darkColor:"#4d0033"}},{name:"levels",value:{minin:26,maxin:213,minout:0,maxout:255,midin:1,mid:.5}},{name:"saturation",value:.36},{name:"temperature",value:.22}],reddish:[{name:"toning",value:{value:.8,lightColor:"#ffd693",darkColor:"#6e2500"}},{name:"contrast",value:.3},{name:"highlights",value:1}],fellowing:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#4d2f00"}},{name:"levels",value:{minin:24,maxin:203,minout:0,maxout:255,midin:1,mid:.5}},{name:"contrast",value:.14},{name:"saturation",value:.3},{name:"temperature",value:.18}],grassland:[{name:"toning",value:{value:.7,lightColor:"#ddff99",darkColor:"#004d19"}},{name:"levels",value:{minin:18,maxin:227,minout:0,maxout:255,midin:1,mid:.5}},{name:"contrast",value:.16}],springs:[{name:"toning",value:{value:1,lightColor:"#ddff99",darkColor:"#001a26"}},{name:"highlights",value:1},{name:"levels",value:{minin:40,maxin:155,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:1}],justblues:[{name:"toning",value:{value:.79,lightColor:"#c6ecff",darkColor:"#1a004d"}},{name:"levels",value:{minin:16,maxin:189,minout:0,maxout:255,midin:1,mid:.5}},{name:"saturation",value:.2},{name:"contrast",value:.2}],bluesteel:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#1a004d"}},{name:"levels",value:{minin:0,maxin:215,minout:12,maxout:255,midin:1,mid:.5}}],flowerpot:[{name:"toning",value:{value:.8,lightColor:"#ff99dd",darkColor:"#334d00"}},{name:"levels",value:{minin:22,maxin:215,minout:0,maxout:255,midin:1,mid:.5}},{name:"vignette",value:-.2}],stinker:[{name:"toning",value:{value:.8,lightColor:"#ffd899",darkColor:"#1a004d"}},{name:"levels",value:{minin:0,maxin:247,minout:8,maxout:255,midin:1,mid:.5}},{name:"brightness",value:.14},{name:"contrast",value:.4}],violiin:[{name:"contrast",value:.32},{name:"toning",value:{value:1,lightColor:"#c3a6ff",darkColor:"#210000"}},{name:"levels",value:{minin:22,maxin:223,minout:0,maxout:255,midin:1,mid:.5}},{name:"exposure",value:.22},{name:"brightness",value:.12}],blupur:[{name:"toning",value:{value:.8,lightColor:"#ff99dd",darkColor:"#074461"}},{name:"vibrance",value:.7},{name:"contrast",value:.3}],beyllo:[{name:"vibrance",value:1},{name:"saturation",value:1},{name:"temperature",value:-.55},{name:"tint",value:.1},{name:"levels",value:{minin:0,maxin:255,minout:24,maxout:249,midin:1,mid:.5}},{name:"toning",value:{value:.76,lightColor:"#ffd500",darkColor:"#7d0354"}},{name:"curves",value:{preset:[[0,0,255,255],[0,0,131,115,255,255],[0,0,136,128,255,255],[0,0,122,145,255,255]]}},{name:"vignette",value:.28}],wifortress:[{name:"toning",value:{value:1,lightColor:"#6cceff",darkColor:"#001a26"}},{name:"highlights",value:1},{name:"levels",value:{minin:40,maxin:155,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:1}],vib:[{name:"vibrance",value:.1},{name:"saturation",value:.5},{name:"brightness",value:.1},{name:"temperature",value:.5},{name:"levels",value:{minin:12,maxin:253,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:.2},{name:"curves",value:{preset:[[0,0,255,255],[0,0,70,80,198,181,255,255],[0,0,140,135,255,255],[0,0,74,96,200,172,255,255]]}},{name:"toning",value:{value:.07,lightColor:"#ffeed2",darkColor:"#360606"}},{name:"contrast",value:-.1}],ranguit:[{name:"saturation",value:.22},{name:"temperature",value:.96},{name:"tint",value:-.28},{name:"contrast",value:.14},{name:"brightness",value:-.2},{name:"levels",value:{minin:0,maxin:237,minout:56,maxout:255,midin:1,mid:.5}},{name:"toning",value:{value:.26,lightColor:"#ddff99",darkColor:"#292321"}}],rangeen:[{name:"vibrance",value:1},{name:"saturation",value:.46},{name:"temperature",value:.36},{name:"levels",value:{minin:0,maxin:251,minout:14,maxout:255,midin:1,mid:.5}},{name:"shadows",value:.34},{name:"highlights",value:.12},{name:"toning",value:{value:.12,lightColor:"#79ffe0",darkColor:"#f5166b"}},{name:"contrast",value:-.1},{name:"curves",value:{preset:[[0,0,144,152,255,255],[0,0,136,107,255,255],[0,0,115,102,255,255],[0,0,106,91,255,255]]}}],creamlow:[{name:"vibrance",value:.82},{name:"saturation",value:-.24},{name:"temperature",value:1},{name:"tint",value:.78},{name:"contrast",value:-.3},{name:"levels",value:{minin:40,maxin:247,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:.64},{name:"toning",value:{value:.29,lightColor:"#ddff99",darkColor:"#912709"}},{name:"curves",value:{preset:[[0,0,5,13,78,83,172,162,255,255],[0,0,255,255],[0,0,131,120,255,255],[0,0,68,61,175,184,255,255]]}}],sven:[{name:"vibrance",value:.7},{name:"temperature",value:.5},{name:"tint",value:.3},{name:"exposure",value:.2},{name:"contrast",value:-.2},{name:"levels",value:{minin:4,maxin:255,minout:0,maxout:235,midin:1,mid:.5}},{name:"highlights",value:-.3},{name:"shadows",value:.3},{name:"grain",value:.3},{name:"vignette",value:.45}],yenely:[{name:"tint",value:.5},{name:"levels",value:{minin:0,maxin:235,minout:20,maxout:255,midin:1,mid:.5}},{name:"saturation",value:-.62},{name:"contrast",value:-.3},{name:"shadows",value:-.6},{name:"curves",value:{preset:[[0,0,148,105,255,255],[0,0,92,79,128,227,255,255],[0,0,74,103,119,172,255,255],[0,0,111,148,255,255]]}},{name:"highlights",value:1},{name:"brightness",value:.14},{name:"temperature",value:.3},{name:"vibrance",value:1},{name:"exposure",value:-.1}],ragwarm:[{name:"temperature",value:.62},{name:"levels",value:{minin:32,maxin:255,minout:0,maxout:243,midin:1,mid:.5}},{name:"highlights",value:-.14},{name:"vignette",value:.28},{name:"toning",value:{value:.07,lightColor:"#99ffbb",darkColor:"#15378f"}},{name:"curves",value:{preset:[[0,0,126,125,255,255],[0,0,255,255],[0,0,130,121,255,255],[0,0,138,124,255,255]]}}],greered:[{name:"vibrance",value:.32},{name:"temperature",value:.4},{name:"tint",value:-.5},{name:"brightness",value:.24},{name:"contrast",value:-.1},{name:"vignette",value:.31},{name:"shadows",value:.38}],danligter:[{name:"saturation",value:.86},{name:"temperature",value:-1},{name:"tint",value:-.92},{name:"brightness",value:.22},{name:"exposure",value:.22},{name:"contrast",value:.1},{name:"levels",value:{minin:0,maxin:239,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:-.12},{name:"dehaze",value:-.12},{name:"toning",value:{value:.14,lightColor:"#ffd899",darkColor:"#00344d"}},{name:"curves",value:{preset:[[0,0,255,255],[0,0,96,115,162,194,255,255],[0,0,101,97,185,189,255,255],[0,0,144,130,222,228,255,255]]}}],trotto:[{name:"vibrance",value:1},{name:"saturation",value:-.34},{name:"temperature",value:1},{name:"tint",value:-.26},{name:"levels",value:{minin:24,maxin:229,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:.14},{name:"dehaze",value:.38},{name:"toning",value:{value:.5,lightColor:"#46fa82",darkColor:"#bf5a20"}},{name:"curves",value:{preset:[[0,0,66,56,168,171,255,255],[0,0,68,77,191,179,255,255],[0,0,73,80,173,166,255,255],[0,0,82,110,171,185,255,255]]}},{name:"vignette",value:.14}],rasky:[{name:"vibrance",value:1},{name:"saturation",value:1},{name:"temperature",value:-.84},{name:"tint",value:.34},{name:"dehaze",value:.52},{name:"toning",value:{value:.39,lightColor:"#cbd420",darkColor:"#d9180a"}}],garage:[{name:"tint",value:.6},{name:"saturation",value:-.04},{name:"shadows",value:-1},{name:"grain",value:.42},{name:"glamour",value:.3}],travelster:[{name:"vibrance",value:.84},{name:"saturation",value:.66},{name:"contrast",value:.24},{name:"levels",value:{minin:62,maxin:255,minout:0,maxout:255,midin:1,mid:.5}},{name:"highlights",value:.62},{name:"shadows",value:-.3},{name:"curves",value:{preset:[[0,32,136,111,255,255],[0,0,149,161,255,255],[0,0,148,139,255,255],[0,0,99,173,164,213,255,255]]}},{name:"toning",value:{value:.3,lightColor:"#ffd899",darkColor:"#334d00"}},{name:"sharpen",value:.24},{name:"grain",value:.23},{name:"temperature",value:.72},{name:"vignette",value:.13}],strawberry:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#ff0000"}}],clementine:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#ff9e00"}}],pear:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#aaff00"}}],apple:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#00ff55"}}],blueberry:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#00aaff"}}],grapes:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#5500ff"}}],dragon:[{name:"fill",value:{value:.5,mode:"softLight",fillColor:"#ff00aa"}}],punch:[{name:"curves",value:{preset:[[0,0,80,64,173,193,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]}},{name:"vibrance",value:.5}],bright:[{name:"highlights",value:-.3},{name:"shadows",value:.5},{name:"levels",value:{minin:0,maxin:215,minout:10,maxout:255,midin:1,mid:.5}}],contrast:[{name:"contrast",value:.2},{name:"highlights",value:.2},{name:"levels",value:{minin:20,maxin:215,minout:0,maxout:255,midin:1,mid:.5}},{name:"shadows",value:.4}],vivid:[{name:"vibrance",value:.4},{name:"shadows",value:.25}],clairify:[{name:"clarity",value:.6},{name:"sharpen",value:.1},{name:"glamour",value:.2}]};class c{constructor(e=0,a=0){this.x=e,this.y=a}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}angleTo(e){let a=-(this.x-e.x),l=this.y-e.y,r=360-Math.atan2(l,a)*(180/Math.PI);return r<0&&(r+=360),r>360&&(r-=360),r}dot(e){return this.x*e.x+this.y*e.y}lengthSQ(){return this.dot(this)}length(){return Math.sqrt(this.lengthSQ())}hypot2(){return this.dot(this)}hypot(){return Math.hypot(this.x,this.y)}add(e){return e?e instanceof c?new c(this.x+e.x,this.y+e.y):new c(this.x+e,this.y+e):this}neg(e){return e instanceof c?new c(this.x-e.x,this.y-e.y):new c(this.x-e,this.y-e)}mul(e){return e instanceof c?new c(this.x*e.x,this.y*e.y):new c(this.x*e,this.y*e)}rotateAround(e,a){let l=Math.sin(a),r=Math.cos(a),n=this.x-e.x,o=this.y-e.y,t=n*l+o*r;return new c(n*r-o*l+e.x,t+e.y)}equalTo(e){return this.x===e.x&&this.y===e.y}clone(){return new c(this.x,this.y)}}class Ue{constructor(e,a){var l,r,n,o,t,s,m,v,h,g,w,x,M;if(e!=null&&a!=null){for(v=e.length-1,o=[],w=[],m=[],g=[],x=[],r=[],l=[],n=[],s=[],h=[],t=0;0<=v?t<v:t>v;0<=v?t+=1:t-=1)o[t]=e[t+1]-e[t],s[t]=a[t+1]-a[t],h[t]=s[t]/o[t];for(t=1;1<=v?t<v:t>v;1<=v?t+=1:t-=1)w[t]=3/o[t]*(a[t+1]-a[t])-3/o[t-1]*(a[t]-a[t-1]);for(m[0]=1,g[0]=0,x[0]=0,t=1;1<=v?t<v:t>v;1<=v?t+=1:t-=1)m[t]=2*(e[t+1]-e[t-1])-o[t-1]*g[t-1],g[t]=o[t]/m[t],x[t]=(w[t]-o[t-1]*x[t-1])/m[t];for(m[v]=1,x[v]=0,r[v]=0,t=M=v-1;M<=0?t<=0:t>=0;M<=0?t+=1:t-=1)r[t]=x[t]-g[t]*r[t+1],l[t]=(a[t+1]-a[t])/o[t]-o[t]*(r[t+1]+2*r[t])/3,n[t]=(r[t+1]-r[t])/(3*o[t]);this.x=e.slice(0,v+1),this.a=a.slice(0,v),this.b=l,this.c=r.slice(0,v),this.d=n}}interpolate(e){var a,l,r;for(l=r=this.x.length-1;(r<=0?l<=0:l>=0)&&!(this.x[l]<=e);r<=0?l+=1:l-=1);return a=e-this.x[l],this.a[l]+this.b[l]*a+this.c[l]*Math.pow(a,2)+this.d[l]*Math.pow(a,3)}}var Ve=`#define GLSLIFY 1
precision highp float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform sampler2D paletteMap;void main(){lowp vec4 base=texture2D(uSampler,vTextureCoord.xy);float r=texture2D(paletteMap,vec2(base.r,0)).r;float g=texture2D(paletteMap,vec2(base.g,0)).g;float b=texture2D(paletteMap,vec2(base.b,0)).b;gl_FragColor=vec4(r,g,b,base.a);}`;class L extends u{constructor(e){super(null,Ve);this.paletteMap=e}get paletteMap(){return this.uniforms.paletteMap}set paletteMap(e){const a=new Uint8Array(Array.from(e.data));this.uniforms.paletteMap=T.fromBuffer(a,a.length/4,1)}}class k extends u{constructor(e){super(null,null);this._imageData=new ImageData(256,1),this.options=e}apply(e,a,l,r,n){this._mapping.apply(e,a,l,r)}update(){let e=this._imageData;b.fillPaletteMap(k.createCurveSet(this.uniforms.options),e),this.uniforms.paletteMap=e,this._mapping?this._mapping.paletteMap=this.uniforms.paletteMap:this._mapping=new L(this.uniforms.paletteMap)}get options(){return this.uniforms.options}set options(e){this.uniforms.options=e,this.update()}static createCurveSet(e){const a=new Array,l=new Array,r=new Array,n=new Array;for(let o=0;o<e.preset[0].length;o+=2)a.push(new c(e.preset[0][o],e.preset[0][o+1]));for(let o=0;o<e.preset[1].length;o+=2)l.push(new c(e.preset[1][o],e.preset[1][o+1]));for(let o=0;o<e.preset[2].length;o+=2)r.push(new c(e.preset[2][o],e.preset[2][o+1]));for(let o=0;o<e.preset[3].length;o+=2)n.push(new c(e.preset[3][o],e.preset[3][o+1]));return new b(1,a,l,r,n)}}class b{constructor(e=255,a=[],l=[],r=[],n=[]){this.scale=e,this.rgb=a,this.red=l,this.green=r,this.blue=n,this.percent=1}static getInterpolation(e,a){let l=[],r=[],n=new Float32Array(256);for(var o=0;o<a.length;o++)l.push(a[o].x*e),r.push(a[o].y*e);let t=new Ue(l,r);for(var s=0;s<Math.ceil(l[0]);s++)n[s]=r[0];for(s=Math.ceil(l[0]);s<Math.ceil(l[l.length-1]);s++)n[s]=t.interpolate(s);for(s=Math.ceil(l[l.length-1]);s<256;s++)n[s]=r[r.length-1];return n}static fillPaletteMap(e,a){let l=b.getInterpolation(e.scale,e.rgb),r=b.getInterpolation(e.scale,e.red),n=b.getInterpolation(e.scale,e.green),o=b.getInterpolation(e.scale,e.blue);for(let t=0;t<256;++t){let s=t-l[t];a.data[4*t]=t-Math.round((t-(r[t]-s))*e.percent),a.data[4*t+1]=t-Math.round((t-(n[t]-s))*e.percent),a.data[4*t+2]=t-Math.round((t-(o[t]-s))*e.percent)}}}class B{constructor(e=0,a=255,l=0,r=255,n=1,o=.5){this.minin=e,this.maxin=a,this.minout=l,this.maxout=r,this.midin=n,this.mid=o,this.map=t=>(t=(t-this.minin)/(this.maxin-this.minin),t=Math.pow(t,this.midin),(t=this.minout+t*(this.maxout-this.minout))>this.maxout?t=this.maxout:t<this.minout&&(t=this.minout),Math.round(t))}reset(){this.minout=0,this.maxout=255,this.midin=1,this.minin=0,this.maxin=255,this.mid=.5}isFlat(){return Boolean(this.minout==0&&this.maxout==255&&this.mid==.5&&this.minin==0&&this.maxin==255)}setMid(e){this.mid=(e-this.minin)/(this.maxin-this.minin),this.midin=this.midToIn(this.mid)}midToIn(e){return Math.min(Math.max(Math.pow(9.99,2*e-1),.1),9.99)}static fillPaletteMap(e,a){for(let l=0;l<256;++l){let r=e.map(l);a.data[4*l]=r,a.data[4*l+1]=r,a.data[4*l+2]=r}}static fillRGBPaletteMap(e,a,l,r){for(let n=0;n<256;++n)r.data[4*n]=e?e.map(n):n,r.data[4*n+1]=a?a.map(n):n,r.data[4*n+2]=l?l.map(n):n}}class Ke extends u{constructor(e){super(null,null);this._imageData=new ImageData(256,1),this.options=e}apply(e,a,l,r,n){this._mapping.apply(e,a,l,r)}update(){let e=this._imageData;this.uniforms.paletteMap=e,B.fillPaletteMap(this.uniforms.options,e),this._mapping?this._mapping.paletteMap=this.uniforms.paletteMap:this._mapping=new L(this.uniforms.paletteMap)}get options(){return this.uniforms.options}set options(e){this.uniforms.options=e,this.update()}}class Pe extends u{constructor(e){super(null,null);this.filtersArr=[],this.filtersArr=Ie[e].map(a=>{if(a.name==="curves")return new k(a.value);if(a.name==="fill"){const{value:l,fillColor:r,mode:n}=a.value;return new p[a.name](l,r,n)}if(a.name==="levels"){const l=a.value,r=new B(Math.round(l.minin*1),Math.round(255-(255-l.maxin)*1));return new Ke(r)}if(a.name==="toning"){const{value:l,lightColor:r,darkColor:n}=a.value;return new p[a.name](l,r,n)}return a.name==="desaturate"?new p.saturation(-1):a.name==="vignette"?a.value<0?new p.vignetteWhite(a.value):new p.vignetteBlack(Math.abs(a.value)):new p[a.name](a.value)})}apply(e,a,l,r,n){let o={};for(let t=0;t<this.filtersArr.length;t++)t===0?this.filtersArr.length===1?this.filtersArr[t].apply(e,a,l,0):(o[t]=e.getFilterTexture(),this.filtersArr[t].apply(e,a,o[t],0)):t===this.filtersArr.length-1?this.filtersArr[t].apply(e,o[t-1],l,0):(o[t]=e.getFilterTexture(),this.filtersArr[t].apply(e,o[t-1],o[t],0))}}const p={vibrance:G,saturation:q,temperature:U,tint:K,hue:P,brightness:H,exposure:Y,contrast:Z,black:N,white:J,highlights:Q,shadows:ee,sharpen:te,clarity:re,smooth:oe,blur:ie,grain:se,vignetteWhite:me,vignetteBlack:fe,glamour:he,bloom:ge,dehaze:xe,toning:_,fill:qe};function He(i){var l,r;const e=new O,a={reset:()=>{e.reset(!0),i.stage.filters=[]},filters:{vibrance:{enable:!1,value:0},saturation:{enable:!1,value:0},temperature:{enable:!1,value:0},tint:{enable:!1,value:0},hue:{enable:!1,value:0},brightness:{enable:!1,value:0},exposure:{enable:!1,value:0},contrast:{enable:!1,value:0},black:{enable:!1,value:0},white:{enable:!1,value:0},highlights:{enable:!1,value:0},shadows:{enable:!1,value:0},sharpen:{enable:!1,value:0,_valueMin:0,_valueMax:1},clarity:{enable:!1,value:0},smooth:{enable:!1,value:0,_valueMin:0,_valueMax:1},blur:{enable:!1,value:0,_valueMin:0,_valueMax:1},grain:{enable:!1,value:0,_valueMin:0,_valueMax:1},vignetteWhite:{enable:!1,value:0,_valueMin:0,_valueMax:1},vignetteBlack:{enable:!1,value:0,_valueMin:0,_valueMax:1},glamour:{enable:!1,value:0,_valueMin:0,_valueMax:1},bloom:{enable:!1,value:0,_valueMin:0,_valueMax:1},dehaze:{enable:!1,value:0,_valueMin:0,_valueMax:1},toning:{enable:!1,value:0,_valueMin:0,_valueMax:1,lightColor:"#f20",darkColor:"#f0f"},fill:{enable:!1,value:0,_valueMin:0,_valueMax:1,fillColor:"#f20",mode:"softLight",_modeOptions:["default","screen","overlay","multiply","colorDodge","colorBurn","hardLight","softLight","vividLight"]}}};Object.keys(a.filters).map(n=>{a.filters[n].__name=n}),e.add(a,"reset");for(const n in a.filters){let o=n.charAt(0).toUpperCase()+n.slice(1),t=n;const s=e.addFolder(o).close();for(const m in a.filters[t]){let v=a.filters[t][m];if(m.charAt(0)!=="_")if(typeof v=="number"){let h=(l=a.filters[t][`_${m}Min`])!=null?l:-1,g=(r=a.filters[t][`_${m}Max`])!=null?r:1;s.add(a.filters[t],m,h,g,.05)}else if(v.charAt&&v.charAt(0)==="#")s.addColor(a.filters[t],m);else if(typeof v=="string"){let h=a.filters[t][`_${m}Options`];h&&s.add(a.filters[t],m,h)}else s.add(a.filters[t],m)}}return e.onChange(({property:n,value:o,object:t})=>{let s=t.__name;if(n==="enable")if(o)i.stage.filters.push(new p[s]);else{let m=i.stage.filters.find(h=>h instanceof p[s]),v=i.stage.filters.indexOf(m);i.stage.filters.splice(v,1)}else{if(!t.enable)return;let m=i.stage.filters.find(v=>v instanceof p[s]);m[n]=o}}),e}const S={friends:["aladin","alex","amber","anne","antonio","bob","greg","hagrid","harry","ivan","jean","josh","karen","lucas","melissa","peter","salomon","sara","sophia","tony"],"too-old":["agnes","conny","gordon","harrison","henry","logan","olay","porter","sampi","tom","vinny"],instage:["borg","carl","coco","doris","doug","earl","kevin","nash","stan","sun","bd orange","blues","country","lemonpell","joyful","tiny dc","sheberios"],colors:["superone","tonola","reddish","fellowing","grassland","springs","justblues","bluesteel","flowerpot","stinker","violiin","blupur","beyllo","wifortress"],retro:["vib","ranguit","rangeen","creamlow","sven","yenely","ragwarm","greered","danligter","trotto","rasky","garage","travelster"],shades:["strawberry","clementine","pear","apple","blueberry","grapes","dragon"],tuning:["punch","bright","contrast","vivid","clairify"],food:["berry","ensalat","morning","corn","sharp"],urban:["cement","style","mold","shimmer","stalker","sham"],nature:["beach","flower","forest"]};function Ee(i,e){let a="";Object.keys(S).map(l=>{a+=`<div class="list"><h2 class="list-title">${l}</h2>`;for(let r=0;r<S[l].length;r++)a+=`<button data-key="${S[l][r]}">${S[l][r]}</button>`;a+="</div>"}),document.getElementById("presetBox").innerHTML=a,Array.from(document.querySelectorAll("#presetBox button")).map(l=>{l.addEventListener("click",()=>{e.reset(!0);let r=new Pe(l.dataset.key);i.stage.filters=[r]})})}function Ye(i,e){document.getElementById("fileElem").addEventListener("change",a=>{let r=a.target.files[0],n=window.URL.createObjectURL(r),o=D.from(n);o.anchor.set(0),i.stage.removeChildAt(0),i.stage.addChild(o)})}function Ze(i,e){document.getElementById("webcam").addEventListener("click",a=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(l=>{const r=document.createElement("video");r.onloadedmetadata=()=>{r.play(),i.stage.removeChildAt(0);const n=T.from(r),o=n.baseTexture.resource.source;o.autoplay=!0,o.muted=!0;const t=new D(n);i.stage.addChild(t),console.log("loaded")},r.srcObject=l}).catch(()=>{alert("Webcam Permissions Denied")})})}const C=new A({view:document.getElementById("playground"),width:590,height:419});let j=D.from("./pic.png");j.anchor.set(0);C.stage.addChild(j);C.stage.filters=[];const We=He(C);Ee(C,We);Ye(C);Ze(C);
